(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function i(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=i(o);fetch(o.href,u)}})();var Ah={exports:{}},Ia={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg;function RS(){if(Hg)return Ia;Hg=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(a,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:r,type:a,key:f,ref:o!==void 0?o:null,props:u}}return Ia.Fragment=t,Ia.jsx=i,Ia.jsxs=i,Ia}var Pg;function OS(){return Pg||(Pg=1,Ah.exports=RS()),Ah.exports}var v=OS(),Rh={exports:{}},oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function xS(){if(Bg)return oe;Bg=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),b=Symbol.iterator;function N(S){return S===null||typeof S!="object"?null:(S=b&&S[b]||S["@@iterator"],typeof S=="function"?S:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,$={};function ue(S,k,F){this.props=S,this.context=k,this.refs=$,this.updater=F||U}ue.prototype.isReactComponent={},ue.prototype.setState=function(S,k){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,k,"setState")},ue.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function Ae(){}Ae.prototype=ue.prototype;function Re(S,k,F){this.props=S,this.context=k,this.refs=$,this.updater=F||U}var Ee=Re.prototype=new Ae;Ee.constructor=Re,H(Ee,ue.prototype),Ee.isPureReactComponent=!0;var it=Array.isArray,he={H:null,A:null,T:null,S:null},Oe=Object.prototype.hasOwnProperty;function gt(S,k,F,W,P,le){return F=le.ref,{$$typeof:r,type:S,key:k,ref:F!==void 0?F:null,props:le}}function St(S,k){return gt(S.type,k,void 0,void 0,void 0,S.props)}function B(S){return typeof S=="object"&&S!==null&&S.$$typeof===r}function ie(S){var k={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(F){return k[F]})}var qe=/\/+/g;function st(S,k){return typeof S=="object"&&S!==null&&S.key!=null?ie(""+S.key):k.toString(36)}function bt(){}function Pe(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(bt,bt):(S.status="pending",S.then(function(k){S.status==="pending"&&(S.status="fulfilled",S.value=k)},function(k){S.status==="pending"&&(S.status="rejected",S.reason=k)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function be(S,k,F,W,P){var le=typeof S;(le==="undefined"||le==="boolean")&&(S=null);var se=!1;if(S===null)se=!0;else switch(le){case"bigint":case"string":case"number":se=!0;break;case"object":switch(S.$$typeof){case r:case t:se=!0;break;case E:return se=S._init,be(se(S._payload),k,F,W,P)}}if(se)return P=P(S),se=W===""?"."+st(S,0):W,it(P)?(F="",se!=null&&(F=se.replace(qe,"$&/")+"/"),be(P,k,F,"",function(xe){return xe})):P!=null&&(B(P)&&(P=St(P,F+(P.key==null||S&&S.key===P.key?"":(""+P.key).replace(qe,"$&/")+"/")+se)),k.push(P)),1;se=0;var Xe=W===""?".":W+":";if(it(S))for(var re=0;re<S.length;re++)W=S[re],le=Xe+st(W,re),se+=be(W,k,F,le,P);else if(re=N(S),typeof re=="function")for(S=re.call(S),re=0;!(W=S.next()).done;)W=W.value,le=Xe+st(W,re++),se+=be(W,k,F,le,P);else if(le==="object"){if(typeof S.then=="function")return be(Pe(S),k,F,W,P);throw k=String(S),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}return se}function z(S,k,F){if(S==null)return S;var W=[],P=0;return be(S,W,"","",function(le){return k.call(F,le,P++)}),W}function J(S){if(S._status===-1){var k=S._result;k=k(),k.then(function(F){(S._status===0||S._status===-1)&&(S._status=1,S._result=F)},function(F){(S._status===0||S._status===-1)&&(S._status=2,S._result=F)}),S._status===-1&&(S._status=0,S._result=k)}if(S._status===1)return S._result.default;throw S._result}var Q=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var k=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(k))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)};function ve(){}return oe.Children={map:z,forEach:function(S,k,F){z(S,function(){k.apply(this,arguments)},F)},count:function(S){var k=0;return z(S,function(){k++}),k},toArray:function(S){return z(S,function(k){return k})||[]},only:function(S){if(!B(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},oe.Component=ue,oe.Fragment=i,oe.Profiler=o,oe.PureComponent=Re,oe.StrictMode=a,oe.Suspense=m,oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=he,oe.act=function(){throw Error("act(...) is not supported in production builds of React.")},oe.cache=function(S){return function(){return S.apply(null,arguments)}},oe.cloneElement=function(S,k,F){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var W=H({},S.props),P=S.key,le=void 0;if(k!=null)for(se in k.ref!==void 0&&(le=void 0),k.key!==void 0&&(P=""+k.key),k)!Oe.call(k,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&k.ref===void 0||(W[se]=k[se]);var se=arguments.length-2;if(se===1)W.children=F;else if(1<se){for(var Xe=Array(se),re=0;re<se;re++)Xe[re]=arguments[re+2];W.children=Xe}return gt(S.type,P,void 0,void 0,le,W)},oe.createContext=function(S){return S={$$typeof:f,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:u,_context:S},S},oe.createElement=function(S,k,F){var W,P={},le=null;if(k!=null)for(W in k.key!==void 0&&(le=""+k.key),k)Oe.call(k,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(P[W]=k[W]);var se=arguments.length-2;if(se===1)P.children=F;else if(1<se){for(var Xe=Array(se),re=0;re<se;re++)Xe[re]=arguments[re+2];P.children=Xe}if(S&&S.defaultProps)for(W in se=S.defaultProps,se)P[W]===void 0&&(P[W]=se[W]);return gt(S,le,void 0,void 0,null,P)},oe.createRef=function(){return{current:null}},oe.forwardRef=function(S){return{$$typeof:p,render:S}},oe.isValidElement=B,oe.lazy=function(S){return{$$typeof:E,_payload:{_status:-1,_result:S},_init:J}},oe.memo=function(S,k){return{$$typeof:g,type:S,compare:k===void 0?null:k}},oe.startTransition=function(S){var k=he.T,F={};he.T=F;try{var W=S(),P=he.S;P!==null&&P(F,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(ve,Q)}catch(le){Q(le)}finally{he.T=k}},oe.unstable_useCacheRefresh=function(){return he.H.useCacheRefresh()},oe.use=function(S){return he.H.use(S)},oe.useActionState=function(S,k,F){return he.H.useActionState(S,k,F)},oe.useCallback=function(S,k){return he.H.useCallback(S,k)},oe.useContext=function(S){return he.H.useContext(S)},oe.useDebugValue=function(){},oe.useDeferredValue=function(S,k){return he.H.useDeferredValue(S,k)},oe.useEffect=function(S,k){return he.H.useEffect(S,k)},oe.useId=function(){return he.H.useId()},oe.useImperativeHandle=function(S,k,F){return he.H.useImperativeHandle(S,k,F)},oe.useInsertionEffect=function(S,k){return he.H.useInsertionEffect(S,k)},oe.useLayoutEffect=function(S,k){return he.H.useLayoutEffect(S,k)},oe.useMemo=function(S,k){return he.H.useMemo(S,k)},oe.useOptimistic=function(S,k){return he.H.useOptimistic(S,k)},oe.useReducer=function(S,k,F){return he.H.useReducer(S,k,F)},oe.useRef=function(S){return he.H.useRef(S)},oe.useState=function(S){return he.H.useState(S)},oe.useSyncExternalStore=function(S,k,F){return he.H.useSyncExternalStore(S,k,F)},oe.useTransition=function(){return he.H.useTransition()},oe.version="19.0.0",oe}var qg;function Ef(){return qg||(qg=1,Rh.exports=xS()),Rh.exports}var Z=Ef(),Oh={exports:{}},ka={},xh={exports:{}},Dh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg;function DS(){return Gg||(Gg=1,function(r){function t(z,J){var Q=z.length;z.push(J);e:for(;0<Q;){var ve=Q-1>>>1,S=z[ve];if(0<o(S,J))z[ve]=J,z[Q]=S,Q=ve;else break e}}function i(z){return z.length===0?null:z[0]}function a(z){if(z.length===0)return null;var J=z[0],Q=z.pop();if(Q!==J){z[0]=Q;e:for(var ve=0,S=z.length,k=S>>>1;ve<k;){var F=2*(ve+1)-1,W=z[F],P=F+1,le=z[P];if(0>o(W,Q))P<S&&0>o(le,W)?(z[ve]=le,z[P]=Q,ve=P):(z[ve]=W,z[F]=Q,ve=F);else if(P<S&&0>o(le,Q))z[ve]=le,z[P]=Q,ve=P;else break e}}return J}function o(z,J){var Q=z.sortIndex-J.sortIndex;return Q!==0?Q:z.id-J.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();r.unstable_now=function(){return f.now()-p}}var m=[],g=[],E=1,b=null,N=3,U=!1,H=!1,$=!1,ue=typeof setTimeout=="function"?setTimeout:null,Ae=typeof clearTimeout=="function"?clearTimeout:null,Re=typeof setImmediate<"u"?setImmediate:null;function Ee(z){for(var J=i(g);J!==null;){if(J.callback===null)a(g);else if(J.startTime<=z)a(g),J.sortIndex=J.expirationTime,t(m,J);else break;J=i(g)}}function it(z){if($=!1,Ee(z),!H)if(i(m)!==null)H=!0,Pe();else{var J=i(g);J!==null&&be(it,J.startTime-z)}}var he=!1,Oe=-1,gt=5,St=-1;function B(){return!(r.unstable_now()-St<gt)}function ie(){if(he){var z=r.unstable_now();St=z;var J=!0;try{e:{H=!1,$&&($=!1,Ae(Oe),Oe=-1),U=!0;var Q=N;try{t:{for(Ee(z),b=i(m);b!==null&&!(b.expirationTime>z&&B());){var ve=b.callback;if(typeof ve=="function"){b.callback=null,N=b.priorityLevel;var S=ve(b.expirationTime<=z);if(z=r.unstable_now(),typeof S=="function"){b.callback=S,Ee(z),J=!0;break t}b===i(m)&&a(m),Ee(z)}else a(m);b=i(m)}if(b!==null)J=!0;else{var k=i(g);k!==null&&be(it,k.startTime-z),J=!1}}break e}finally{b=null,N=Q,U=!1}J=void 0}}finally{J?qe():he=!1}}}var qe;if(typeof Re=="function")qe=function(){Re(ie)};else if(typeof MessageChannel<"u"){var st=new MessageChannel,bt=st.port2;st.port1.onmessage=ie,qe=function(){bt.postMessage(null)}}else qe=function(){ue(ie,0)};function Pe(){he||(he=!0,qe())}function be(z,J){Oe=ue(function(){z(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(z){z.callback=null},r.unstable_continueExecution=function(){H||U||(H=!0,Pe())},r.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):gt=0<z?Math.floor(1e3/z):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_getFirstCallbackNode=function(){return i(m)},r.unstable_next=function(z){switch(N){case 1:case 2:case 3:var J=3;break;default:J=N}var Q=N;N=J;try{return z()}finally{N=Q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(z,J){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=N;N=z;try{return J()}finally{N=Q}},r.unstable_scheduleCallback=function(z,J,Q){var ve=r.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ve+Q:ve):Q=ve,z){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=Q+S,z={id:E++,callback:J,priorityLevel:z,startTime:Q,expirationTime:S,sortIndex:-1},Q>ve?(z.sortIndex=Q,t(g,z),i(m)===null&&z===i(g)&&($?(Ae(Oe),Oe=-1):$=!0,be(it,Q-ve))):(z.sortIndex=S,t(m,z),H||U||(H=!0,Pe())),z},r.unstable_shouldYield=B,r.unstable_wrapCallback=function(z){var J=N;return function(){var Q=N;N=J;try{return z.apply(this,arguments)}finally{N=Q}}}}(Dh)),Dh}var Vg;function MS(){return Vg||(Vg=1,xh.exports=DS()),xh.exports}var Mh={exports:{}},Ct={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg;function IS(){if(Yg)return Ct;Yg=1;var r=Ef();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(m,g,E){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:m,containerInfo:g,implementation:E}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Ct.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Ct.createPortal=function(m,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(m,g,null,E)},Ct.flushSync=function(m){var g=f.T,E=a.p;try{if(f.T=null,a.p=2,m)return m()}finally{f.T=g,a.p=E,a.d.f()}},Ct.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(m,g))},Ct.prefetchDNS=function(m){typeof m=="string"&&a.d.D(m)},Ct.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var E=g.as,b=p(E,g.crossOrigin),N=typeof g.integrity=="string"?g.integrity:void 0,U=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?a.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:N,fetchPriority:U}):E==="script"&&a.d.X(m,{crossOrigin:b,integrity:N,fetchPriority:U,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Ct.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=p(g.as,g.crossOrigin);a.d.M(m,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(m)},Ct.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,b=p(E,g.crossOrigin);a.d.L(m,E,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Ct.preloadModule=function(m,g){if(typeof m=="string")if(g){var E=p(g.as,g.crossOrigin);a.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(m)},Ct.requestFormReset=function(m){a.d.r(m)},Ct.unstable_batchedUpdates=function(m,g){return m(g)},Ct.useFormState=function(m,g,E){return f.H.useFormState(m,g,E)},Ct.useFormStatus=function(){return f.H.useHostTransitionStatus()},Ct.version="19.0.0",Ct}var Fg;function kS(){if(Fg)return Mh.exports;Fg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Mh.exports=IS(),Mh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg;function US(){if(Qg)return ka;Qg=1;var r=MS(),t=Ef(),i=kS();function a(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var u=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),U=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),Ae=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),Ee=Symbol.for("react.offscreen"),it=Symbol.for("react.memo_cache_sentinel"),he=Symbol.iterator;function Oe(e){return e===null||typeof e!="object"?null:(e=he&&e[he]||e["@@iterator"],typeof e=="function"?e:null)}var gt=Symbol.for("react.client.reference");function St(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===gt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case m:return"Fragment";case p:return"Portal";case E:return"Profiler";case g:return"StrictMode";case $:return"Suspense";case ue:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case U:return(e.displayName||"Context")+".Provider";case N:return(e._context.displayName||"Context")+".Consumer";case H:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ae:return n=e.displayName||null,n!==null?n:St(e.type)||"Memo";case Re:n=e._payload,e=e._init;try{return St(e(n))}catch{}}return null}var B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=Object.assign,qe,st;function bt(e){if(qe===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);qe=n&&n[1]||"",st=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qe+e+st}var Pe=!1;function be(e,n){if(!e||Pe)return"";Pe=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var I=function(){throw Error()};if(Object.defineProperty(I.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(I,[])}catch(O){var R=O}Reflect.construct(e,[],I)}else{try{I.call()}catch(O){R=O}e.call(I.prototype)}}else{try{throw Error()}catch(O){R=O}(I=e())&&typeof I.catch=="function"&&I.catch(function(){})}}catch(O){if(O&&R&&typeof O.stack=="string")return[O.stack,R.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),d=h[0],_=h[1];if(d&&_){var y=d.split(`
`),C=_.split(`
`);for(c=l=0;l<y.length&&!y[l].includes("DetermineComponentFrameRoot");)l++;for(;c<C.length&&!C[c].includes("DetermineComponentFrameRoot");)c++;if(l===y.length||c===C.length)for(l=y.length-1,c=C.length-1;1<=l&&0<=c&&y[l]!==C[c];)c--;for(;1<=l&&0<=c;l--,c--)if(y[l]!==C[c]){if(l!==1||c!==1)do if(l--,c--,0>c||y[l]!==C[c]){var x=`
`+y[l].replace(" at new "," at ");return e.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",e.displayName)),x}while(1<=l&&0<=c);break}}}finally{Pe=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?bt(s):""}function z(e){switch(e.tag){case 26:case 27:case 5:return bt(e.type);case 16:return bt("Lazy");case 13:return bt("Suspense");case 19:return bt("SuspenseList");case 0:case 15:return e=be(e.type,!1),e;case 11:return e=be(e.type.render,!1),e;case 1:return e=be(e.type,!0),e;default:return""}}function J(e){try{var n="";do n+=z(e),e=e.return;while(e);return n}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function Q(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function ve(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function S(e){if(Q(e)!==e)throw Error(a(188))}function k(e){var n=e.alternate;if(!n){if(n=Q(e),n===null)throw Error(a(188));return n!==e?null:e}for(var s=e,l=n;;){var c=s.return;if(c===null)break;var h=c.alternate;if(h===null){if(l=c.return,l!==null){s=l;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===s)return S(c),e;if(h===l)return S(c),n;h=h.sibling}throw Error(a(188))}if(s.return!==l.return)s=c,l=h;else{for(var d=!1,_=c.child;_;){if(_===s){d=!0,s=c,l=h;break}if(_===l){d=!0,l=c,s=h;break}_=_.sibling}if(!d){for(_=h.child;_;){if(_===s){d=!0,s=h,l=c;break}if(_===l){d=!0,l=h,s=c;break}_=_.sibling}if(!d)throw Error(a(189))}}if(s.alternate!==l)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?e:n}function F(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=F(e),n!==null)return n;e=e.sibling}return null}var W=Array.isArray,P=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},se=[],Xe=-1;function re(e){return{current:e}}function xe(e){0>Xe||(e.current=se[Xe],se[Xe]=null,Xe--)}function Ne(e,n){Xe++,se[Xe]=e.current,e.current=n}var At=re(null),M=re(null),Y=re(null),$e=re(null);function Sn(e,n){switch(Ne(Y,n),Ne(M,e),Ne(At,null),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)&&(n=n.namespaceURI)?pg(n):0;break;default:if(e=e===8?n.parentNode:n,n=e.tagName,e=e.namespaceURI)e=pg(e),n=mg(e,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}xe(At),Ne(At,n)}function Bt(){xe(At),xe(M),xe(Y)}function Ds(e){e.memoizedState!==null&&Ne($e,e);var n=At.current,s=mg(n,e.type);n!==s&&(Ne(M,e),Ne(At,s))}function Ms(e){M.current===e&&(xe(At),xe(M)),$e.current===e&&(xe($e),Ra._currentValue=le)}var Is=Object.prototype.hasOwnProperty,un=r.unstable_scheduleCallback,Mn=r.unstable_cancelCallback,vc=r.unstable_shouldYield,yc=r.unstable_requestPaint,Wt=r.unstable_now,ml=r.unstable_getCurrentPriorityLevel,In=r.unstable_ImmediatePriority,gl=r.unstable_UserBlockingPriority,ks=r.unstable_NormalPriority,_l=r.unstable_LowPriority,vl=r.unstable_IdlePriority,Ec=r.log,yl=r.unstable_setDisableYieldValue,Wi=null,Rt=null;function Sc(e){if(Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(Wi,e,void 0,(e.current.flags&128)===128)}catch{}}function bn(e){if(typeof Ec=="function"&&yl(e),Rt&&typeof Rt.setStrictMode=="function")try{Rt.setStrictMode(Wi,e)}catch{}}var Ot=Math.clz32?Math.clz32:bc,Tn=Math.log,El=Math.LN2;function bc(e){return e>>>=0,e===0?32:31-(Tn(e)/El|0)|0}var Us=128,Xi=4194304;function L(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function G(e,n){var s=e.pendingLanes;if(s===0)return 0;var l=0,c=e.suspendedLanes,h=e.pingedLanes,d=e.warmLanes;e=e.finishedLanes!==0;var _=s&134217727;return _!==0?(s=_&~c,s!==0?l=L(s):(h&=_,h!==0?l=L(h):e||(d=_&~d,d!==0&&(l=L(d))))):(_=s&~c,_!==0?l=L(_):h!==0?l=L(h):e||(d=s&~d,d!==0&&(l=L(d)))),l===0?0:n!==0&&n!==l&&(n&c)===0&&(c=l&-l,d=n&-n,c>=d||c===32&&(d&4194176)!==0)?n:l}function X(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function pe(e,n){switch(e){case 1:case 2:case 4:case 8:return n+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qt(){var e=Us;return Us<<=1,(Us&4194176)===0&&(Us=128),e}function Ut(){var e=Xi;return Xi<<=1,(Xi&62914560)===0&&(Xi=4194304),e}function Hr(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function Ls(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ke(e,n,s,l,c,h){var d=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var _=e.entanglements,y=e.expirationTimes,C=e.hiddenUpdates;for(s=d&~s;0<s;){var x=31-Ot(s),I=1<<x;_[x]=0,y[x]=-1;var R=C[x];if(R!==null)for(C[x]=null,x=0;x<R.length;x++){var O=R[x];O!==null&&(O.lane&=-536870913)}s&=~I}l!==0&&Je(e,l,0),h!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=h&~(d&~n))}function Je(e,n,s){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-Ot(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|s&4194218}function kn(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var l=31-Ot(s),c=1<<l;c&n|e[l]&n&&(e[l]|=n),s&=~c}}function hi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Gt(){var e=P.p;return e!==0?e:(e=window.event,e===void 0?32:Ig(e.type))}function hn(e,n){var s=P.p;try{return P.p=e,n()}finally{P.p=s}}var xt=Math.random().toString(36).slice(2),Ge="__reactFiber$"+xt,_t="__reactProps$"+xt,Un="__reactContainer$"+xt,Tc="__reactEvents$"+xt,y0="__reactListeners$"+xt,E0="__reactHandles$"+xt,fd="__reactResources$"+xt,Pr="__reactMarker$"+xt;function Cc(e){delete e[Ge],delete e[_t],delete e[Tc],delete e[y0],delete e[E0]}function Zi(e){var n=e[Ge];if(n)return n;for(var s=e.parentNode;s;){if(n=s[Un]||s[Ge]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=vg(e);e!==null;){if(s=e[Ge])return s;e=vg(e)}return n}e=s,s=e.parentNode}return null}function js(e){if(e=e[Ge]||e[Un]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function Br(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(a(33))}function zs(e){var n=e[fd];return n||(n=e[fd]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ct(e){e[Pr]=!0}var dd=new Set,pd={};function $i(e,n){Hs(e,n),Hs(e+"Capture",n)}function Hs(e,n){for(pd[e]=n,e=0;e<n.length;e++)dd.add(n[e])}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),md={},gd={};function b0(e){return Is.call(gd,e)?!0:Is.call(md,e)?!1:S0.test(e)?gd[e]=!0:(md[e]=!0,!1)}function Sl(e,n,s){if(b0(n))if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+s)}}function bl(e,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+s)}}function jn(e,n,s,l){if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(n,s,""+l)}}function Xt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _d(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function T0(e){var n=_d(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),l=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,h=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return c.call(this)},set:function(d){l=""+d,h.call(this,d)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(d){l=""+d},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Tl(e){e._valueTracker||(e._valueTracker=T0(e))}function vd(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),l="";return e&&(l=_d(e)?e.checked?"true":"false":e.value),e=l,e!==s?(n.setValue(e),!0):!1}function Cl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var C0=/[\n"\\]/g;function Zt(e){return e.replace(C0,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function wc(e,n,s,l,c,h,d,_){e.name="",d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.type=d:e.removeAttribute("type"),n!=null?d==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Xt(n)):e.value!==""+Xt(n)&&(e.value=""+Xt(n)):d!=="submit"&&d!=="reset"||e.removeAttribute("value"),n!=null?Nc(e,d,Xt(n)):s!=null?Nc(e,d,Xt(s)):l!=null&&e.removeAttribute("value"),c==null&&h!=null&&(e.defaultChecked=!!h),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+Xt(_):e.removeAttribute("name")}function yd(e,n,s,l,c,h,d,_){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),n!=null||s!=null){if(!(h!=="submit"&&h!=="reset"||n!=null))return;s=s!=null?""+Xt(s):"",n=n!=null?""+Xt(n):s,_||n===e.value||(e.value=n),e.defaultValue=n}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=_?e.checked:!!l,e.defaultChecked=!!l,d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.name=d)}function Nc(e,n,s){n==="number"&&Cl(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Ps(e,n,s,l){if(e=e.options,n){n={};for(var c=0;c<s.length;c++)n["$"+s[c]]=!0;for(s=0;s<e.length;s++)c=n.hasOwnProperty("$"+e[s].value),e[s].selected!==c&&(e[s].selected=c),c&&l&&(e[s].defaultSelected=!0)}else{for(s=""+Xt(s),n=null,c=0;c<e.length;c++){if(e[c].value===s){e[c].selected=!0,l&&(e[c].defaultSelected=!0);return}n!==null||e[c].disabled||(n=e[c])}n!==null&&(n.selected=!0)}}function Ed(e,n,s){if(n!=null&&(n=""+Xt(n),n!==e.value&&(e.value=n),s==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=s!=null?""+Xt(s):""}function Sd(e,n,s,l){if(n==null){if(l!=null){if(s!=null)throw Error(a(92));if(W(l)){if(1<l.length)throw Error(a(93));l=l[0]}s=l}s==null&&(s=""),n=s}s=Xt(n),e.defaultValue=s,l=e.textContent,l===s&&l!==""&&l!==null&&(e.value=l)}function Bs(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var w0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bd(e,n,s){var l=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,s):typeof s!="number"||s===0||w0.has(n)?n==="float"?e.cssFloat=s:e[n]=(""+s).trim():e[n]=s+"px"}function Td(e,n,s){if(n!=null&&typeof n!="object")throw Error(a(62));if(e=e.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var c in n)l=n[c],n.hasOwnProperty(c)&&s[c]!==l&&bd(e,c,l)}else for(var h in n)n.hasOwnProperty(h)&&bd(e,h,n[h])}function Ac(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var N0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),A0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wl(e){return A0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Rc=null;function Oc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qs=null,Gs=null;function Cd(e){var n=js(e);if(n&&(e=n.stateNode)){var s=e[_t]||null;e:switch(e=n.stateNode,n.type){case"input":if(wc(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Zt(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var l=s[n];if(l!==e&&l.form===e.form){var c=l[_t]||null;if(!c)throw Error(a(90));wc(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<s.length;n++)l=s[n],l.form===e.form&&vd(l)}break e;case"textarea":Ed(e,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&Ps(e,!!s.multiple,n,!1)}}}var xc=!1;function wd(e,n,s){if(xc)return e(n,s);xc=!0;try{var l=e(n);return l}finally{if(xc=!1,(qs!==null||Gs!==null)&&(oo(),qs&&(n=qs,e=Gs,Gs=qs=null,Cd(n),e)))for(n=0;n<e.length;n++)Cd(e[n])}}function qr(e,n){var s=e.stateNode;if(s===null)return null;var l=s[_t]||null;if(l===null)return null;s=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(a(231,n,typeof s));return s}var Dc=!1;if(Ln)try{var Gr={};Object.defineProperty(Gr,"passive",{get:function(){Dc=!0}}),window.addEventListener("test",Gr,Gr),window.removeEventListener("test",Gr,Gr)}catch{Dc=!1}var fi=null,Mc=null,Nl=null;function Nd(){if(Nl)return Nl;var e,n=Mc,s=n.length,l,c="value"in fi?fi.value:fi.textContent,h=c.length;for(e=0;e<s&&n[e]===c[e];e++);var d=s-e;for(l=1;l<=d&&n[s-l]===c[h-l];l++);return Nl=c.slice(e,1<l?1-l:void 0)}function Al(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Rl(){return!0}function Ad(){return!1}function Lt(e){function n(s,l,c,h,d){this._reactName=s,this._targetInst=c,this.type=l,this.nativeEvent=h,this.target=d,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(s=e[_],this[_]=s?s(h):h[_]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Rl:Ad,this.isPropagationStopped=Ad,this}return ie(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Rl)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Rl)},persist:function(){},isPersistent:Rl}),n}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ol=Lt(Ji),Vr=ie({},Ji,{view:0,detail:0}),R0=Lt(Vr),Ic,kc,Yr,xl=ie({},Vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yr&&(Yr&&e.type==="mousemove"?(Ic=e.screenX-Yr.screenX,kc=e.screenY-Yr.screenY):kc=Ic=0,Yr=e),Ic)},movementY:function(e){return"movementY"in e?e.movementY:kc}}),Rd=Lt(xl),O0=ie({},xl,{dataTransfer:0}),x0=Lt(O0),D0=ie({},Vr,{relatedTarget:0}),Uc=Lt(D0),M0=ie({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),I0=Lt(M0),k0=ie({},Ji,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),U0=Lt(k0),L0=ie({},Ji,{data:0}),Od=Lt(L0),j0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function P0(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=H0[e])?!!n[e]:!1}function Lc(){return P0}var B0=ie({},Vr,{key:function(e){if(e.key){var n=j0[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Al(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?z0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lc,charCode:function(e){return e.type==="keypress"?Al(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Al(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),q0=Lt(B0),G0=ie({},xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xd=Lt(G0),V0=ie({},Vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lc}),Y0=Lt(V0),F0=ie({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q0=Lt(F0),K0=ie({},xl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),W0=Lt(K0),X0=ie({},Ji,{newState:0,oldState:0}),Z0=Lt(X0),$0=[9,13,27,32],jc=Ln&&"CompositionEvent"in window,Fr=null;Ln&&"documentMode"in document&&(Fr=document.documentMode);var J0=Ln&&"TextEvent"in window&&!Fr,Dd=Ln&&(!jc||Fr&&8<Fr&&11>=Fr),Md=" ",Id=!1;function kd(e,n){switch(e){case"keyup":return $0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ud(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vs=!1;function eE(e,n){switch(e){case"compositionend":return Ud(n);case"keypress":return n.which!==32?null:(Id=!0,Md);case"textInput":return e=n.data,e===Md&&Id?null:e;default:return null}}function tE(e,n){if(Vs)return e==="compositionend"||!jc&&kd(e,n)?(e=Nd(),Nl=Mc=fi=null,Vs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Dd&&n.locale!=="ko"?null:n.data;default:return null}}var nE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ld(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!nE[e.type]:n==="textarea"}function jd(e,n,s,l){qs?Gs?Gs.push(l):Gs=[l]:qs=l,n=po(n,"onChange"),0<n.length&&(s=new Ol("onChange","change",null,s,l),e.push({event:s,listeners:n}))}var Qr=null,Kr=null;function iE(e){cg(e,0)}function Dl(e){var n=Br(e);if(vd(n))return e}function zd(e,n){if(e==="change")return n}var Hd=!1;if(Ln){var zc;if(Ln){var Hc="oninput"in document;if(!Hc){var Pd=document.createElement("div");Pd.setAttribute("oninput","return;"),Hc=typeof Pd.oninput=="function"}zc=Hc}else zc=!1;Hd=zc&&(!document.documentMode||9<document.documentMode)}function Bd(){Qr&&(Qr.detachEvent("onpropertychange",qd),Kr=Qr=null)}function qd(e){if(e.propertyName==="value"&&Dl(Kr)){var n=[];jd(n,Kr,e,Oc(e)),wd(iE,n)}}function sE(e,n,s){e==="focusin"?(Bd(),Qr=n,Kr=s,Qr.attachEvent("onpropertychange",qd)):e==="focusout"&&Bd()}function rE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Dl(Kr)}function aE(e,n){if(e==="click")return Dl(n)}function lE(e,n){if(e==="input"||e==="change")return Dl(n)}function oE(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Vt=typeof Object.is=="function"?Object.is:oE;function Wr(e,n){if(Vt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),l=Object.keys(n);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var c=s[l];if(!Is.call(n,c)||!Vt(e[c],n[c]))return!1}return!0}function Gd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vd(e,n){var s=Gd(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=n&&l>=n)return{node:s,offset:n-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Gd(s)}}function Yd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Yd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Fd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Cl(e.document);n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=Cl(e.document)}return n}function Pc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function cE(e,n){var s=Fd(n);n=e.focusedElem;var l=e.selectionRange;if(s!==n&&n&&n.ownerDocument&&Yd(n.ownerDocument.documentElement,n)){if(l!==null&&Pc(n)){if(e=l.start,s=l.end,s===void 0&&(s=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(s,n.value.length);else if(s=(e=n.ownerDocument||document)&&e.defaultView||window,s.getSelection){s=s.getSelection();var c=n.textContent.length,h=Math.min(l.start,c);l=l.end===void 0?h:Math.min(l.end,c),!s.extend&&h>l&&(c=l,l=h,h=c),c=Vd(n,h);var d=Vd(n,l);c&&d&&(s.rangeCount!==1||s.anchorNode!==c.node||s.anchorOffset!==c.offset||s.focusNode!==d.node||s.focusOffset!==d.offset)&&(e=e.createRange(),e.setStart(c.node,c.offset),s.removeAllRanges(),h>l?(s.addRange(e),s.extend(d.node,d.offset)):(e.setEnd(d.node,d.offset),s.addRange(e)))}}for(e=[],s=n;s=s.parentNode;)s.nodeType===1&&e.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)s=e[n],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var uE=Ln&&"documentMode"in document&&11>=document.documentMode,Ys=null,Bc=null,Xr=null,qc=!1;function Qd(e,n,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;qc||Ys==null||Ys!==Cl(l)||(l=Ys,"selectionStart"in l&&Pc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Xr&&Wr(Xr,l)||(Xr=l,l=po(Bc,"onSelect"),0<l.length&&(n=new Ol("onSelect","select",null,n,s),e.push({event:n,listeners:l}),n.target=Ys)))}function es(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var Fs={animationend:es("Animation","AnimationEnd"),animationiteration:es("Animation","AnimationIteration"),animationstart:es("Animation","AnimationStart"),transitionrun:es("Transition","TransitionRun"),transitionstart:es("Transition","TransitionStart"),transitioncancel:es("Transition","TransitionCancel"),transitionend:es("Transition","TransitionEnd")},Gc={},Kd={};Ln&&(Kd=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function ts(e){if(Gc[e])return Gc[e];if(!Fs[e])return e;var n=Fs[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in Kd)return Gc[e]=n[s];return e}var Wd=ts("animationend"),Xd=ts("animationiteration"),Zd=ts("animationstart"),hE=ts("transitionrun"),fE=ts("transitionstart"),dE=ts("transitioncancel"),$d=ts("transitionend"),Jd=new Map,ep="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function fn(e,n){Jd.set(e,n),$i(n,[e])}var $t=[],Qs=0,Vc=0;function Ml(){for(var e=Qs,n=Vc=Qs=0;n<e;){var s=$t[n];$t[n++]=null;var l=$t[n];$t[n++]=null;var c=$t[n];$t[n++]=null;var h=$t[n];if($t[n++]=null,l!==null&&c!==null){var d=l.pending;d===null?c.next=c:(c.next=d.next,d.next=c),l.pending=c}h!==0&&tp(s,c,h)}}function Il(e,n,s,l){$t[Qs++]=e,$t[Qs++]=n,$t[Qs++]=s,$t[Qs++]=l,Vc|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Yc(e,n,s,l){return Il(e,n,s,l),kl(e)}function di(e,n){return Il(e,null,null,n),kl(e)}function tp(e,n,s){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s);for(var c=!1,h=e.return;h!==null;)h.childLanes|=s,l=h.alternate,l!==null&&(l.childLanes|=s),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(c=!0)),e=h,h=h.return;c&&n!==null&&e.tag===3&&(h=e.stateNode,c=31-Ot(s),h=h.hiddenUpdates,e=h[c],e===null?h[c]=[n]:e.push(n),n.lane=s|536870912)}function kl(e){if(50<Sa)throw Sa=0,Zu=null,Error(a(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ks={},np=new WeakMap;function Jt(e,n){if(typeof e=="object"&&e!==null){var s=np.get(e);return s!==void 0?s:(n={value:e,source:n,stack:J(n)},np.set(e,n),n)}return{value:e,source:n,stack:J(n)}}var Ws=[],Xs=0,Ul=null,Ll=0,en=[],tn=0,ns=null,zn=1,Hn="";function is(e,n){Ws[Xs++]=Ll,Ws[Xs++]=Ul,Ul=e,Ll=n}function ip(e,n,s){en[tn++]=zn,en[tn++]=Hn,en[tn++]=ns,ns=e;var l=zn;e=Hn;var c=32-Ot(l)-1;l&=~(1<<c),s+=1;var h=32-Ot(n)+c;if(30<h){var d=c-c%5;h=(l&(1<<d)-1).toString(32),l>>=d,c-=d,zn=1<<32-Ot(n)+c|s<<c|l,Hn=h+e}else zn=1<<h|s<<c|l,Hn=e}function Fc(e){e.return!==null&&(is(e,1),ip(e,1,0))}function Qc(e){for(;e===Ul;)Ul=Ws[--Xs],Ws[Xs]=null,Ll=Ws[--Xs],Ws[Xs]=null;for(;e===ns;)ns=en[--tn],en[tn]=null,Hn=en[--tn],en[tn]=null,zn=en[--tn],en[tn]=null}var Dt=null,vt=null,Te=!1,dn=null,Cn=!1,Kc=Error(a(519));function ss(e){var n=Error(a(418,""));throw Jr(Jt(n,e)),Kc}function sp(e){var n=e.stateNode,s=e.type,l=e.memoizedProps;switch(n[Ge]=e,n[_t]=l,s){case"dialog":ye("cancel",n),ye("close",n);break;case"iframe":case"object":case"embed":ye("load",n);break;case"video":case"audio":for(s=0;s<Ta.length;s++)ye(Ta[s],n);break;case"source":ye("error",n);break;case"img":case"image":case"link":ye("error",n),ye("load",n);break;case"details":ye("toggle",n);break;case"input":ye("invalid",n),yd(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Tl(n);break;case"select":ye("invalid",n);break;case"textarea":ye("invalid",n),Sd(n,l.value,l.defaultValue,l.children),Tl(n)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||l.suppressHydrationWarning===!0||dg(n.textContent,s)?(l.popover!=null&&(ye("beforetoggle",n),ye("toggle",n)),l.onScroll!=null&&ye("scroll",n),l.onScrollEnd!=null&&ye("scrollend",n),l.onClick!=null&&(n.onclick=mo),n=!0):n=!1,n||ss(e)}function rp(e){for(Dt=e.return;Dt;)switch(Dt.tag){case 3:case 27:Cn=!0;return;case 5:case 13:Cn=!1;return;default:Dt=Dt.return}}function Zr(e){if(e!==Dt)return!1;if(!Te)return rp(e),Te=!0,!1;var n=!1,s;if((s=e.tag!==3&&e.tag!==27)&&((s=e.tag===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||ph(e.type,e.memoizedProps)),s=!s),s&&(n=!0),n&&vt&&ss(e),rp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(s=e.data,s==="/$"){if(n===0){vt=mn(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++;e=e.nextSibling}vt=null}}else vt=Dt?mn(e.stateNode.nextSibling):null;return!0}function $r(){vt=Dt=null,Te=!1}function Jr(e){dn===null?dn=[e]:dn.push(e)}var ea=Error(a(460)),ap=Error(a(474)),Wc={then:function(){}};function lp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function jl(){}function op(e,n,s){switch(s=e[s],s===void 0?e.push(n):s!==n&&(n.then(jl,jl),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,e===ea?Error(a(483)):e;default:if(typeof n.status=="string")n.then(jl,jl);else{if(e=je,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=l}},function(l){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,e===ea?Error(a(483)):e}throw ta=n,ea}}var ta=null;function cp(){if(ta===null)throw Error(a(459));var e=ta;return ta=null,e}var Zs=null,na=0;function zl(e){var n=na;return na+=1,Zs===null&&(Zs=[]),op(Zs,e,n)}function ia(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Hl(e,n){throw n.$$typeof===u?Error(a(525)):(e=Object.prototype.toString.call(n),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function up(e){var n=e._init;return n(e._payload)}function hp(e){function n(w,T){if(e){var A=w.deletions;A===null?(w.deletions=[T],w.flags|=16):A.push(T)}}function s(w,T){if(!e)return null;for(;T!==null;)n(w,T),T=T.sibling;return null}function l(w){for(var T=new Map;w!==null;)w.key!==null?T.set(w.key,w):T.set(w.index,w),w=w.sibling;return T}function c(w,T){return w=wi(w,T),w.index=0,w.sibling=null,w}function h(w,T,A){return w.index=A,e?(A=w.alternate,A!==null?(A=A.index,A<T?(w.flags|=33554434,T):A):(w.flags|=33554434,T)):(w.flags|=1048576,T)}function d(w){return e&&w.alternate===null&&(w.flags|=33554434),w}function _(w,T,A,D){return T===null||T.tag!==6?(T=Gu(A,w.mode,D),T.return=w,T):(T=c(T,A),T.return=w,T)}function y(w,T,A,D){var q=A.type;return q===m?x(w,T,A.props.children,D,A.key):T!==null&&(T.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Re&&up(q)===T.type)?(T=c(T,A.props),ia(T,A),T.return=w,T):(T=io(A.type,A.key,A.props,null,w.mode,D),ia(T,A),T.return=w,T)}function C(w,T,A,D){return T===null||T.tag!==4||T.stateNode.containerInfo!==A.containerInfo||T.stateNode.implementation!==A.implementation?(T=Vu(A,w.mode,D),T.return=w,T):(T=c(T,A.children||[]),T.return=w,T)}function x(w,T,A,D,q){return T===null||T.tag!==7?(T=ps(A,w.mode,D,q),T.return=w,T):(T=c(T,A),T.return=w,T)}function I(w,T,A){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=Gu(""+T,w.mode,A),T.return=w,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case f:return A=io(T.type,T.key,T.props,null,w.mode,A),ia(A,T),A.return=w,A;case p:return T=Vu(T,w.mode,A),T.return=w,T;case Re:var D=T._init;return T=D(T._payload),I(w,T,A)}if(W(T)||Oe(T))return T=ps(T,w.mode,A,null),T.return=w,T;if(typeof T.then=="function")return I(w,zl(T),A);if(T.$$typeof===U)return I(w,eo(w,T),A);Hl(w,T)}return null}function R(w,T,A,D){var q=T!==null?T.key:null;if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return q!==null?null:_(w,T,""+A,D);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case f:return A.key===q?y(w,T,A,D):null;case p:return A.key===q?C(w,T,A,D):null;case Re:return q=A._init,A=q(A._payload),R(w,T,A,D)}if(W(A)||Oe(A))return q!==null?null:x(w,T,A,D,null);if(typeof A.then=="function")return R(w,T,zl(A),D);if(A.$$typeof===U)return R(w,T,eo(w,A),D);Hl(w,A)}return null}function O(w,T,A,D,q){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return w=w.get(A)||null,_(T,w,""+D,q);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case f:return w=w.get(D.key===null?A:D.key)||null,y(T,w,D,q);case p:return w=w.get(D.key===null?A:D.key)||null,C(T,w,D,q);case Re:var fe=D._init;return D=fe(D._payload),O(w,T,A,D,q)}if(W(D)||Oe(D))return w=w.get(A)||null,x(T,w,D,q,null);if(typeof D.then=="function")return O(w,T,A,zl(D),q);if(D.$$typeof===U)return O(w,T,A,eo(T,D),q);Hl(T,D)}return null}function V(w,T,A,D){for(var q=null,fe=null,K=T,ee=T=0,ft=null;K!==null&&ee<A.length;ee++){K.index>ee?(ft=K,K=null):ft=K.sibling;var Ce=R(w,K,A[ee],D);if(Ce===null){K===null&&(K=ft);break}e&&K&&Ce.alternate===null&&n(w,K),T=h(Ce,T,ee),fe===null?q=Ce:fe.sibling=Ce,fe=Ce,K=ft}if(ee===A.length)return s(w,K),Te&&is(w,ee),q;if(K===null){for(;ee<A.length;ee++)K=I(w,A[ee],D),K!==null&&(T=h(K,T,ee),fe===null?q=K:fe.sibling=K,fe=K);return Te&&is(w,ee),q}for(K=l(K);ee<A.length;ee++)ft=O(K,w,ee,A[ee],D),ft!==null&&(e&&ft.alternate!==null&&K.delete(ft.key===null?ee:ft.key),T=h(ft,T,ee),fe===null?q=ft:fe.sibling=ft,fe=ft);return e&&K.forEach(function(Mi){return n(w,Mi)}),Te&&is(w,ee),q}function ae(w,T,A,D){if(A==null)throw Error(a(151));for(var q=null,fe=null,K=T,ee=T=0,ft=null,Ce=A.next();K!==null&&!Ce.done;ee++,Ce=A.next()){K.index>ee?(ft=K,K=null):ft=K.sibling;var Mi=R(w,K,Ce.value,D);if(Mi===null){K===null&&(K=ft);break}e&&K&&Mi.alternate===null&&n(w,K),T=h(Mi,T,ee),fe===null?q=Mi:fe.sibling=Mi,fe=Mi,K=ft}if(Ce.done)return s(w,K),Te&&is(w,ee),q;if(K===null){for(;!Ce.done;ee++,Ce=A.next())Ce=I(w,Ce.value,D),Ce!==null&&(T=h(Ce,T,ee),fe===null?q=Ce:fe.sibling=Ce,fe=Ce);return Te&&is(w,ee),q}for(K=l(K);!Ce.done;ee++,Ce=A.next())Ce=O(K,w,ee,Ce.value,D),Ce!==null&&(e&&Ce.alternate!==null&&K.delete(Ce.key===null?ee:Ce.key),T=h(Ce,T,ee),fe===null?q=Ce:fe.sibling=Ce,fe=Ce);return e&&K.forEach(function(AS){return n(w,AS)}),Te&&is(w,ee),q}function Ke(w,T,A,D){if(typeof A=="object"&&A!==null&&A.type===m&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case f:e:{for(var q=A.key;T!==null;){if(T.key===q){if(q=A.type,q===m){if(T.tag===7){s(w,T.sibling),D=c(T,A.props.children),D.return=w,w=D;break e}}else if(T.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Re&&up(q)===T.type){s(w,T.sibling),D=c(T,A.props),ia(D,A),D.return=w,w=D;break e}s(w,T);break}else n(w,T);T=T.sibling}A.type===m?(D=ps(A.props.children,w.mode,D,A.key),D.return=w,w=D):(D=io(A.type,A.key,A.props,null,w.mode,D),ia(D,A),D.return=w,w=D)}return d(w);case p:e:{for(q=A.key;T!==null;){if(T.key===q)if(T.tag===4&&T.stateNode.containerInfo===A.containerInfo&&T.stateNode.implementation===A.implementation){s(w,T.sibling),D=c(T,A.children||[]),D.return=w,w=D;break e}else{s(w,T);break}else n(w,T);T=T.sibling}D=Vu(A,w.mode,D),D.return=w,w=D}return d(w);case Re:return q=A._init,A=q(A._payload),Ke(w,T,A,D)}if(W(A))return V(w,T,A,D);if(Oe(A)){if(q=Oe(A),typeof q!="function")throw Error(a(150));return A=q.call(A),ae(w,T,A,D)}if(typeof A.then=="function")return Ke(w,T,zl(A),D);if(A.$$typeof===U)return Ke(w,T,eo(w,A),D);Hl(w,A)}return typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint"?(A=""+A,T!==null&&T.tag===6?(s(w,T.sibling),D=c(T,A),D.return=w,w=D):(s(w,T),D=Gu(A,w.mode,D),D.return=w,w=D),d(w)):s(w,T)}return function(w,T,A,D){try{na=0;var q=Ke(w,T,A,D);return Zs=null,q}catch(K){if(K===ea)throw K;var fe=an(29,K,null,w.mode);return fe.lanes=D,fe.return=w,fe}finally{}}}var rs=hp(!0),fp=hp(!1),$s=re(null),Pl=re(0);function dp(e,n){e=Xn,Ne(Pl,e),Ne($s,n),Xn=e|n.baseLanes}function Xc(){Ne(Pl,Xn),Ne($s,$s.current)}function Zc(){Xn=Pl.current,xe($s),xe(Pl)}var nn=re(null),wn=null;function pi(e){var n=e.alternate;Ne(rt,rt.current&1),Ne(nn,e),wn===null&&(n===null||$s.current!==null||n.memoizedState!==null)&&(wn=e)}function pp(e){if(e.tag===22){if(Ne(rt,rt.current),Ne(nn,e),wn===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(wn=e)}}else mi()}function mi(){Ne(rt,rt.current),Ne(nn,nn.current)}function Pn(e){xe(nn),wn===e&&(wn=null),xe(rt)}var rt=re(0);function Bl(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var pE=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(s,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(s){return s()})}},mE=r.unstable_scheduleCallback,gE=r.unstable_NormalPriority,at={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $c(){return{controller:new pE,data:new Map,refCount:0}}function sa(e){e.refCount--,e.refCount===0&&mE(gE,function(){e.controller.abort()})}var ra=null,Jc=0,Js=0,er=null;function _E(e,n){if(ra===null){var s=ra=[];Jc=0,Js=rh(),er={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Jc++,n.then(mp,mp),n}function mp(){if(--Jc===0&&ra!==null){er!==null&&(er.status="fulfilled");var e=ra;ra=null,Js=0,er=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function vE(e,n){var s=[],l={status:"pending",value:null,reason:null,then:function(c){s.push(c)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var c=0;c<s.length;c++)(0,s[c])(n)},function(c){for(l.status="rejected",l.reason=c,c=0;c<s.length;c++)(0,s[c])(void 0)}),l}var gp=B.S;B.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&_E(e,n),gp!==null&&gp(e,n)};var as=re(null);function eu(){var e=as.current;return e!==null?e:je.pooledCache}function ql(e,n){n===null?Ne(as,as.current):Ne(as,n.pool)}function _p(){var e=eu();return e===null?null:{parent:at._currentValue,pool:e}}var gi=0,ce=null,De=null,et=null,Gl=!1,tr=!1,ls=!1,Vl=0,aa=0,nr=null,yE=0;function Ze(){throw Error(a(321))}function tu(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!Vt(e[s],n[s]))return!1;return!0}function nu(e,n,s,l,c,h){return gi=h,ce=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,B.H=e===null||e.memoizedState===null?os:_i,ls=!1,h=s(l,c),ls=!1,tr&&(h=yp(n,s,l,c)),vp(e),h}function vp(e){B.H=Nn;var n=De!==null&&De.next!==null;if(gi=0,et=De=ce=null,Gl=!1,aa=0,nr=null,n)throw Error(a(300));e===null||ut||(e=e.dependencies,e!==null&&Jl(e)&&(ut=!0))}function yp(e,n,s,l){ce=e;var c=0;do{if(tr&&(nr=null),aa=0,tr=!1,25<=c)throw Error(a(301));if(c+=1,et=De=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}B.H=cs,h=n(s,l)}while(tr);return h}function EE(){var e=B.H,n=e.useState()[0];return n=typeof n.then=="function"?la(n):n,e=e.useState()[0],(De!==null?De.memoizedState:null)!==e&&(ce.flags|=1024),n}function iu(){var e=Vl!==0;return Vl=0,e}function su(e,n,s){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~s}function ru(e){if(Gl){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Gl=!1}gi=0,et=De=ce=null,tr=!1,aa=Vl=0,nr=null}function jt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?ce.memoizedState=et=e:et=et.next=e,et}function tt(){if(De===null){var e=ce.alternate;e=e!==null?e.memoizedState:null}else e=De.next;var n=et===null?ce.memoizedState:et.next;if(n!==null)et=n,De=e;else{if(e===null)throw ce.alternate===null?Error(a(467)):Error(a(310));De=e,e={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},et===null?ce.memoizedState=et=e:et=et.next=e}return et}var Yl;Yl=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function la(e){var n=aa;return aa+=1,nr===null&&(nr=[]),e=op(nr,e,n),n=ce,(et===null?n.memoizedState:et.next)===null&&(n=n.alternate,B.H=n===null||n.memoizedState===null?os:_i),e}function Fl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return la(e);if(e.$$typeof===U)return Tt(e)}throw Error(a(438,String(e)))}function au(e){var n=null,s=ce.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var l=ce.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=Yl(),ce.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(e),l=0;l<e;l++)s[l]=it;return n.index++,s}function Bn(e,n){return typeof n=="function"?n(e):n}function Ql(e){var n=tt();return lu(n,De,e)}function lu(e,n,s){var l=e.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=s;var c=e.baseQueue,h=l.pending;if(h!==null){if(c!==null){var d=c.next;c.next=h.next,h.next=d}n.baseQueue=c=h,l.pending=null}if(h=e.baseState,c===null)e.memoizedState=h;else{n=c.next;var _=d=null,y=null,C=n,x=!1;do{var I=C.lane&-536870913;if(I!==C.lane?(Se&I)===I:(gi&I)===I){var R=C.revertLane;if(R===0)y!==null&&(y=y.next={lane:0,revertLane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),I===Js&&(x=!0);else if((gi&R)===R){C=C.next,R===Js&&(x=!0);continue}else I={lane:0,revertLane:C.revertLane,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null},y===null?(_=y=I,d=h):y=y.next=I,ce.lanes|=R,Ni|=R;I=C.action,ls&&s(h,I),h=C.hasEagerState?C.eagerState:s(h,I)}else R={lane:I,revertLane:C.revertLane,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null},y===null?(_=y=R,d=h):y=y.next=R,ce.lanes|=I,Ni|=I;C=C.next}while(C!==null&&C!==n);if(y===null?d=h:y.next=_,!Vt(h,e.memoizedState)&&(ut=!0,x&&(s=er,s!==null)))throw s;e.memoizedState=h,e.baseState=d,e.baseQueue=y,l.lastRenderedState=h}return c===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function ou(e){var n=tt(),s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=e;var l=s.dispatch,c=s.pending,h=n.memoizedState;if(c!==null){s.pending=null;var d=c=c.next;do h=e(h,d.action),d=d.next;while(d!==c);Vt(h,n.memoizedState)||(ut=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),s.lastRenderedState=h}return[h,l]}function Ep(e,n,s){var l=ce,c=tt(),h=Te;if(h){if(s===void 0)throw Error(a(407));s=s()}else s=n();var d=!Vt((De||c).memoizedState,s);if(d&&(c.memoizedState=s,ut=!0),c=c.queue,hu(Tp.bind(null,l,c,e),[e]),c.getSnapshot!==n||d||et!==null&&et.memoizedState.tag&1){if(l.flags|=2048,ir(9,bp.bind(null,l,c,s,n),{destroy:void 0},null),je===null)throw Error(a(349));h||(gi&60)!==0||Sp(l,n,s)}return s}function Sp(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=ce.updateQueue,n===null?(n=Yl(),ce.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function bp(e,n,s,l){n.value=s,n.getSnapshot=l,Cp(n)&&wp(e)}function Tp(e,n,s){return s(function(){Cp(n)&&wp(e)})}function Cp(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!Vt(e,s)}catch{return!0}}function wp(e){var n=di(e,2);n!==null&&Mt(n,e,2)}function cu(e){var n=jt();if(typeof e=="function"){var s=e;if(e=s(),ls){bn(!0);try{s()}finally{bn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:e},n}function Np(e,n,s,l){return e.baseState=s,lu(e,De,typeof l=="function"?l:Bn)}function SE(e,n,s,l,c){if(Xl(e))throw Error(a(485));if(e=n.action,e!==null){var h={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(d){h.listeners.push(d)}};B.T!==null?s(!0):h.isTransition=!1,l(h),s=n.pending,s===null?(h.next=n.pending=h,Ap(n,h)):(h.next=s.next,n.pending=s.next=h)}}function Ap(e,n){var s=n.action,l=n.payload,c=e.state;if(n.isTransition){var h=B.T,d={};B.T=d;try{var _=s(c,l),y=B.S;y!==null&&y(d,_),Rp(e,n,_)}catch(C){uu(e,n,C)}finally{B.T=h}}else try{h=s(c,l),Rp(e,n,h)}catch(C){uu(e,n,C)}}function Rp(e,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Op(e,n,l)},function(l){return uu(e,n,l)}):Op(e,n,s)}function Op(e,n,s){n.status="fulfilled",n.value=s,xp(n),e.state=s,n=e.pending,n!==null&&(s=n.next,s===n?e.pending=null:(s=s.next,n.next=s,Ap(e,s)))}function uu(e,n,s){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=s,xp(n),n=n.next;while(n!==l)}e.action=null}function xp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Dp(e,n){return n}function Mp(e,n){if(Te){var s=je.formState;if(s!==null){e:{var l=ce;if(Te){if(vt){t:{for(var c=vt,h=Cn;c.nodeType!==8;){if(!h){c=null;break t}if(c=mn(c.nextSibling),c===null){c=null;break t}}h=c.data,c=h==="F!"||h==="F"?c:null}if(c){vt=mn(c.nextSibling),l=c.data==="F!";break e}}ss(l)}l=!1}l&&(n=s[0])}}return s=jt(),s.memoizedState=s.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dp,lastRenderedState:n},s.queue=l,s=Xp.bind(null,ce,l),l.dispatch=s,l=cu(!1),h=gu.bind(null,ce,!1,l.queue),l=jt(),c={state:n,dispatch:null,action:e,pending:null},l.queue=c,s=SE.bind(null,ce,c,h,s),c.dispatch=s,l.memoizedState=e,[n,s,!1]}function Ip(e){var n=tt();return kp(n,De,e)}function kp(e,n,s){n=lu(e,n,Dp)[0],e=Ql(Bn)[0],n=typeof n=="object"&&n!==null&&typeof n.then=="function"?la(n):n;var l=tt(),c=l.queue,h=c.dispatch;return s!==l.memoizedState&&(ce.flags|=2048,ir(9,bE.bind(null,c,s),{destroy:void 0},null)),[n,h,e]}function bE(e,n){e.action=n}function Up(e){var n=tt(),s=De;if(s!==null)return kp(n,s,e);tt(),n=n.memoizedState,s=tt();var l=s.queue.dispatch;return s.memoizedState=e,[n,l,!1]}function ir(e,n,s,l){return e={tag:e,create:n,inst:s,deps:l,next:null},n=ce.updateQueue,n===null&&(n=Yl(),ce.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,n.lastEffect=e),e}function Lp(){return tt().memoizedState}function Kl(e,n,s,l){var c=jt();ce.flags|=e,c.memoizedState=ir(1|n,s,{destroy:void 0},l===void 0?null:l)}function Wl(e,n,s,l){var c=tt();l=l===void 0?null:l;var h=c.memoizedState.inst;De!==null&&l!==null&&tu(l,De.memoizedState.deps)?c.memoizedState=ir(n,s,h,l):(ce.flags|=e,c.memoizedState=ir(1|n,s,h,l))}function jp(e,n){Kl(8390656,8,e,n)}function hu(e,n){Wl(2048,8,e,n)}function zp(e,n){return Wl(4,2,e,n)}function Hp(e,n){return Wl(4,4,e,n)}function Pp(e,n){if(typeof n=="function"){e=e();var s=n(e);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Bp(e,n,s){s=s!=null?s.concat([e]):null,Wl(4,4,Pp.bind(null,n,e),s)}function fu(){}function qp(e,n){var s=tt();n=n===void 0?null:n;var l=s.memoizedState;return n!==null&&tu(n,l[1])?l[0]:(s.memoizedState=[e,n],e)}function Gp(e,n){var s=tt();n=n===void 0?null:n;var l=s.memoizedState;if(n!==null&&tu(n,l[1]))return l[0];if(l=e(),ls){bn(!0);try{e()}finally{bn(!1)}}return s.memoizedState=[l,n],l}function du(e,n,s){return s===void 0||(gi&1073741824)!==0?e.memoizedState=n:(e.memoizedState=s,e=Ym(),ce.lanes|=e,Ni|=e,s)}function Vp(e,n,s,l){return Vt(s,n)?s:$s.current!==null?(e=du(e,s,l),Vt(e,n)||(ut=!0),e):(gi&42)===0?(ut=!0,e.memoizedState=s):(e=Ym(),ce.lanes|=e,Ni|=e,n)}function Yp(e,n,s,l,c){var h=P.p;P.p=h!==0&&8>h?h:8;var d=B.T,_={};B.T=_,gu(e,!1,n,s);try{var y=c(),C=B.S;if(C!==null&&C(_,y),y!==null&&typeof y=="object"&&typeof y.then=="function"){var x=vE(y,l);oa(e,n,x,Kt(e))}else oa(e,n,l,Kt(e))}catch(I){oa(e,n,{then:function(){},status:"rejected",reason:I},Kt())}finally{P.p=h,B.T=d}}function TE(){}function pu(e,n,s,l){if(e.tag!==5)throw Error(a(476));var c=Fp(e).queue;Yp(e,c,n,le,s===null?TE:function(){return Qp(e),s(l)})}function Fp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:le},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:s},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Qp(e){var n=Fp(e).next.queue;oa(e,n,{},Kt())}function mu(){return Tt(Ra)}function Kp(){return tt().memoizedState}function Wp(){return tt().memoizedState}function CE(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var s=Kt();e=Ei(s);var l=Si(n,e,s);l!==null&&(Mt(l,n,s),ha(l,n,s)),n={cache:$c()},e.payload=n;return}n=n.return}}function wE(e,n,s){var l=Kt();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Xl(e)?Zp(n,s):(s=Yc(e,n,s,l),s!==null&&(Mt(s,e,l),$p(s,n,l)))}function Xp(e,n,s){var l=Kt();oa(e,n,s,l)}function oa(e,n,s,l){var c={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Xl(e))Zp(n,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var d=n.lastRenderedState,_=h(d,s);if(c.hasEagerState=!0,c.eagerState=_,Vt(_,d))return Il(e,n,c,0),je===null&&Ml(),!1}catch{}finally{}if(s=Yc(e,n,c,l),s!==null)return Mt(s,e,l),$p(s,n,l),!0}return!1}function gu(e,n,s,l){if(l={lane:2,revertLane:rh(),action:l,hasEagerState:!1,eagerState:null,next:null},Xl(e)){if(n)throw Error(a(479))}else n=Yc(e,s,l,2),n!==null&&Mt(n,e,2)}function Xl(e){var n=e.alternate;return e===ce||n!==null&&n===ce}function Zp(e,n){tr=Gl=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function $p(e,n,s){if((s&4194176)!==0){var l=n.lanes;l&=e.pendingLanes,s|=l,n.lanes=s,kn(e,s)}}var Nn={readContext:Tt,use:Fl,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useLayoutEffect:Ze,useInsertionEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useSyncExternalStore:Ze,useId:Ze};Nn.useCacheRefresh=Ze,Nn.useMemoCache=Ze,Nn.useHostTransitionStatus=Ze,Nn.useFormState=Ze,Nn.useActionState=Ze,Nn.useOptimistic=Ze;var os={readContext:Tt,use:Fl,useCallback:function(e,n){return jt().memoizedState=[e,n===void 0?null:n],e},useContext:Tt,useEffect:jp,useImperativeHandle:function(e,n,s){s=s!=null?s.concat([e]):null,Kl(4194308,4,Pp.bind(null,n,e),s)},useLayoutEffect:function(e,n){return Kl(4194308,4,e,n)},useInsertionEffect:function(e,n){Kl(4,2,e,n)},useMemo:function(e,n){var s=jt();n=n===void 0?null:n;var l=e();if(ls){bn(!0);try{e()}finally{bn(!1)}}return s.memoizedState=[l,n],l},useReducer:function(e,n,s){var l=jt();if(s!==void 0){var c=s(n);if(ls){bn(!0);try{s(n)}finally{bn(!1)}}}else c=n;return l.memoizedState=l.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},l.queue=e,e=e.dispatch=wE.bind(null,ce,e),[l.memoizedState,e]},useRef:function(e){var n=jt();return e={current:e},n.memoizedState=e},useState:function(e){e=cu(e);var n=e.queue,s=Xp.bind(null,ce,n);return n.dispatch=s,[e.memoizedState,s]},useDebugValue:fu,useDeferredValue:function(e,n){var s=jt();return du(s,e,n)},useTransition:function(){var e=cu(!1);return e=Yp.bind(null,ce,e.queue,!0,!1),jt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,s){var l=ce,c=jt();if(Te){if(s===void 0)throw Error(a(407));s=s()}else{if(s=n(),je===null)throw Error(a(349));(Se&60)!==0||Sp(l,n,s)}c.memoizedState=s;var h={value:s,getSnapshot:n};return c.queue=h,jp(Tp.bind(null,l,h,e),[e]),l.flags|=2048,ir(9,bp.bind(null,l,h,s,n),{destroy:void 0},null),s},useId:function(){var e=jt(),n=je.identifierPrefix;if(Te){var s=Hn,l=zn;s=(l&~(1<<32-Ot(l)-1)).toString(32)+s,n=":"+n+"R"+s,s=Vl++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=yE++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},useCacheRefresh:function(){return jt().memoizedState=CE.bind(null,ce)}};os.useMemoCache=au,os.useHostTransitionStatus=mu,os.useFormState=Mp,os.useActionState=Mp,os.useOptimistic=function(e){var n=jt();n.memoizedState=n.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=gu.bind(null,ce,!0,s),s.dispatch=n,[e,n]};var _i={readContext:Tt,use:Fl,useCallback:qp,useContext:Tt,useEffect:hu,useImperativeHandle:Bp,useInsertionEffect:zp,useLayoutEffect:Hp,useMemo:Gp,useReducer:Ql,useRef:Lp,useState:function(){return Ql(Bn)},useDebugValue:fu,useDeferredValue:function(e,n){var s=tt();return Vp(s,De.memoizedState,e,n)},useTransition:function(){var e=Ql(Bn)[0],n=tt().memoizedState;return[typeof e=="boolean"?e:la(e),n]},useSyncExternalStore:Ep,useId:Kp};_i.useCacheRefresh=Wp,_i.useMemoCache=au,_i.useHostTransitionStatus=mu,_i.useFormState=Ip,_i.useActionState=Ip,_i.useOptimistic=function(e,n){var s=tt();return Np(s,De,e,n)};var cs={readContext:Tt,use:Fl,useCallback:qp,useContext:Tt,useEffect:hu,useImperativeHandle:Bp,useInsertionEffect:zp,useLayoutEffect:Hp,useMemo:Gp,useReducer:ou,useRef:Lp,useState:function(){return ou(Bn)},useDebugValue:fu,useDeferredValue:function(e,n){var s=tt();return De===null?du(s,e,n):Vp(s,De.memoizedState,e,n)},useTransition:function(){var e=ou(Bn)[0],n=tt().memoizedState;return[typeof e=="boolean"?e:la(e),n]},useSyncExternalStore:Ep,useId:Kp};cs.useCacheRefresh=Wp,cs.useMemoCache=au,cs.useHostTransitionStatus=mu,cs.useFormState=Up,cs.useActionState=Up,cs.useOptimistic=function(e,n){var s=tt();return De!==null?Np(s,De,e,n):(s.baseState=e,[e,s.queue.dispatch])};function _u(e,n,s,l){n=e.memoizedState,s=s(l,n),s=s==null?n:ie({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var vu={isMounted:function(e){return(e=e._reactInternals)?Q(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var l=Kt(),c=Ei(l);c.payload=n,s!=null&&(c.callback=s),n=Si(e,c,l),n!==null&&(Mt(n,e,l),ha(n,e,l))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var l=Kt(),c=Ei(l);c.tag=1,c.payload=n,s!=null&&(c.callback=s),n=Si(e,c,l),n!==null&&(Mt(n,e,l),ha(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=Kt(),l=Ei(s);l.tag=2,n!=null&&(l.callback=n),n=Si(e,l,s),n!==null&&(Mt(n,e,s),ha(n,e,s))}};function Jp(e,n,s,l,c,h,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,d):n.prototype&&n.prototype.isPureReactComponent?!Wr(s,l)||!Wr(c,h):!0}function em(e,n,s,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,l),n.state!==e&&vu.enqueueReplaceState(n,n.state,null)}function us(e,n){var s=n;if("ref"in n){s={};for(var l in n)l!=="ref"&&(s[l]=n[l])}if(e=e.defaultProps){s===n&&(s=ie({},s));for(var c in e)s[c]===void 0&&(s[c]=e[c])}return s}var Zl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function tm(e){Zl(e)}function nm(e){console.error(e)}function im(e){Zl(e)}function $l(e,n){try{var s=e.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function sm(e,n,s){try{var l=e.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function yu(e,n,s){return s=Ei(s),s.tag=3,s.payload={element:null},s.callback=function(){$l(e,n)},s}function rm(e){return e=Ei(e),e.tag=3,e}function am(e,n,s,l){var c=s.type.getDerivedStateFromError;if(typeof c=="function"){var h=l.value;e.payload=function(){return c(h)},e.callback=function(){sm(n,s,l)}}var d=s.stateNode;d!==null&&typeof d.componentDidCatch=="function"&&(e.callback=function(){sm(n,s,l),typeof c!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var _=l.stack;this.componentDidCatch(l.value,{componentStack:_!==null?_:""})})}function NE(e,n,s,l,c){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=s.alternate,n!==null&&ua(n,s,c,!0),s=nn.current,s!==null){switch(s.tag){case 13:return wn===null?eh():s.alternate===null&&Qe===0&&(Qe=3),s.flags&=-257,s.flags|=65536,s.lanes=c,l===Wc?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([l]):n.add(l),nh(e,l,c)),!1;case 22:return s.flags|=65536,l===Wc?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([l]):s.add(l)),nh(e,l,c)),!1}throw Error(a(435,s.tag))}return nh(e,l,c),eh(),!1}if(Te)return n=nn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,l!==Kc&&(e=Error(a(422),{cause:l}),Jr(Jt(e,s)))):(l!==Kc&&(n=Error(a(423),{cause:l}),Jr(Jt(n,s))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,l=Jt(l,s),c=yu(e.stateNode,l,c),ku(e,c),Qe!==4&&(Qe=2)),!1;var h=Error(a(520),{cause:l});if(h=Jt(h,s),ya===null?ya=[h]:ya.push(h),Qe!==4&&(Qe=2),n===null)return!0;l=Jt(l,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,e=c&-c,s.lanes|=e,e=yu(s.stateNode,l,e),ku(s,e),!1;case 1:if(n=s.type,h=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Ai===null||!Ai.has(h))))return s.flags|=65536,c&=-c,s.lanes|=c,c=rm(c),am(c,e,s,l),ku(s,c),!1}s=s.return}while(s!==null);return!1}var lm=Error(a(461)),ut=!1;function yt(e,n,s,l){n.child=e===null?fp(n,null,s,l):rs(n,e.child,s,l)}function om(e,n,s,l,c){s=s.render;var h=n.ref;if("ref"in l){var d={};for(var _ in l)_!=="ref"&&(d[_]=l[_])}else d=l;return fs(n),l=nu(e,n,s,d,h,c),_=iu(),e!==null&&!ut?(su(e,n,c),qn(e,n,c)):(Te&&_&&Fc(n),n.flags|=1,yt(e,n,l,c),n.child)}function cm(e,n,s,l,c){if(e===null){var h=s.type;return typeof h=="function"&&!qu(h)&&h.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=h,um(e,n,h,l,c)):(e=io(s.type,null,l,n,n.mode,c),e.ref=n.ref,e.return=n,n.child=e)}if(h=e.child,!Ru(e,c)){var d=h.memoizedProps;if(s=s.compare,s=s!==null?s:Wr,s(d,l)&&e.ref===n.ref)return qn(e,n,c)}return n.flags|=1,e=wi(h,l),e.ref=n.ref,e.return=n,n.child=e}function um(e,n,s,l,c){if(e!==null){var h=e.memoizedProps;if(Wr(h,l)&&e.ref===n.ref)if(ut=!1,n.pendingProps=l=h,Ru(e,c))(e.flags&131072)!==0&&(ut=!0);else return n.lanes=e.lanes,qn(e,n,c)}return Eu(e,n,s,l,c)}function hm(e,n,s){var l=n.pendingProps,c=l.children,h=(n.stateNode._pendingVisibility&2)!==0,d=e!==null?e.memoizedState:null;if(ca(e,n),l.mode==="hidden"||h){if((n.flags&128)!==0){if(l=d!==null?d.baseLanes|s:s,e!==null){for(c=n.child=e.child,h=0;c!==null;)h=h|c.lanes|c.childLanes,c=c.sibling;n.childLanes=h&~l}else n.childLanes=0,n.child=null;return fm(e,n,l,s)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&ql(n,d!==null?d.cachePool:null),d!==null?dp(n,d):Xc(),pp(n);else return n.lanes=n.childLanes=536870912,fm(e,n,d!==null?d.baseLanes|s:s,s)}else d!==null?(ql(n,d.cachePool),dp(n,d),mi(),n.memoizedState=null):(e!==null&&ql(n,null),Xc(),mi());return yt(e,n,c,s),n.child}function fm(e,n,s,l){var c=eu();return c=c===null?null:{parent:at._currentValue,pool:c},n.memoizedState={baseLanes:s,cachePool:c},e!==null&&ql(n,null),Xc(),pp(n),e!==null&&ua(e,n,l,!0),null}function ca(e,n){var s=n.ref;if(s===null)e!==null&&e.ref!==null&&(n.flags|=2097664);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(e===null||e.ref!==s)&&(n.flags|=2097664)}}function Eu(e,n,s,l,c){return fs(n),s=nu(e,n,s,l,void 0,c),l=iu(),e!==null&&!ut?(su(e,n,c),qn(e,n,c)):(Te&&l&&Fc(n),n.flags|=1,yt(e,n,s,c),n.child)}function dm(e,n,s,l,c,h){return fs(n),n.updateQueue=null,s=yp(n,l,s,c),vp(e),l=iu(),e!==null&&!ut?(su(e,n,h),qn(e,n,h)):(Te&&l&&Fc(n),n.flags|=1,yt(e,n,s,h),n.child)}function pm(e,n,s,l,c){if(fs(n),n.stateNode===null){var h=Ks,d=s.contextType;typeof d=="object"&&d!==null&&(h=Tt(d)),h=new s(l,h),n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=vu,n.stateNode=h,h._reactInternals=n,h=n.stateNode,h.props=l,h.state=n.memoizedState,h.refs={},Mu(n),d=s.contextType,h.context=typeof d=="object"&&d!==null?Tt(d):Ks,h.state=n.memoizedState,d=s.getDerivedStateFromProps,typeof d=="function"&&(_u(n,s,d,l),h.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(d=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),d!==h.state&&vu.enqueueReplaceState(h,h.state,null),da(n,l,h,c),fa(),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){h=n.stateNode;var _=n.memoizedProps,y=us(s,_);h.props=y;var C=h.context,x=s.contextType;d=Ks,typeof x=="object"&&x!==null&&(d=Tt(x));var I=s.getDerivedStateFromProps;x=typeof I=="function"||typeof h.getSnapshotBeforeUpdate=="function",_=n.pendingProps!==_,x||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_||C!==d)&&em(n,h,l,d),yi=!1;var R=n.memoizedState;h.state=R,da(n,l,h,c),fa(),C=n.memoizedState,_||R!==C||yi?(typeof I=="function"&&(_u(n,s,I,l),C=n.memoizedState),(y=yi||Jp(n,s,y,l,R,C,d))?(x||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=C),h.props=l,h.state=C,h.context=d,l=y):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{h=n.stateNode,Iu(e,n),d=n.memoizedProps,x=us(s,d),h.props=x,I=n.pendingProps,R=h.context,C=s.contextType,y=Ks,typeof C=="object"&&C!==null&&(y=Tt(C)),_=s.getDerivedStateFromProps,(C=typeof _=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(d!==I||R!==y)&&em(n,h,l,y),yi=!1,R=n.memoizedState,h.state=R,da(n,l,h,c),fa();var O=n.memoizedState;d!==I||R!==O||yi||e!==null&&e.dependencies!==null&&Jl(e.dependencies)?(typeof _=="function"&&(_u(n,s,_,l),O=n.memoizedState),(x=yi||Jp(n,s,x,l,R,O,y)||e!==null&&e.dependencies!==null&&Jl(e.dependencies))?(C||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,O,y),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,O,y)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||d===e.memoizedProps&&R===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&R===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=O),h.props=l,h.state=O,h.context=y,l=x):(typeof h.componentDidUpdate!="function"||d===e.memoizedProps&&R===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&R===e.memoizedState||(n.flags|=1024),l=!1)}return h=l,ca(e,n),l=(n.flags&128)!==0,h||l?(h=n.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:h.render(),n.flags|=1,e!==null&&l?(n.child=rs(n,e.child,null,c),n.child=rs(n,null,s,c)):yt(e,n,s,c),n.memoizedState=h.state,e=n.child):e=qn(e,n,c),e}function mm(e,n,s,l){return $r(),n.flags|=256,yt(e,n,s,l),n.child}var Su={dehydrated:null,treeContext:null,retryLane:0};function bu(e){return{baseLanes:e,cachePool:_p()}}function Tu(e,n,s){return e=e!==null?e.childLanes&~s:0,n&&(e|=ln),e}function gm(e,n,s){var l=n.pendingProps,c=!1,h=(n.flags&128)!==0,d;if((d=h)||(d=e!==null&&e.memoizedState===null?!1:(rt.current&2)!==0),d&&(c=!0,n.flags&=-129),d=(n.flags&32)!==0,n.flags&=-33,e===null){if(Te){if(c?pi(n):mi(),Te){var _=vt,y;if(y=_){e:{for(y=_,_=Cn;y.nodeType!==8;){if(!_){_=null;break e}if(y=mn(y.nextSibling),y===null){_=null;break e}}_=y}_!==null?(n.memoizedState={dehydrated:_,treeContext:ns!==null?{id:zn,overflow:Hn}:null,retryLane:536870912},y=an(18,null,null,0),y.stateNode=_,y.return=n,n.child=y,Dt=n,vt=null,y=!0):y=!1}y||ss(n)}if(_=n.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return _.data==="$!"?n.lanes=16:n.lanes=536870912,null;Pn(n)}return _=l.children,l=l.fallback,c?(mi(),c=n.mode,_=wu({mode:"hidden",children:_},c),l=ps(l,c,s,null),_.return=n,l.return=n,_.sibling=l,n.child=_,c=n.child,c.memoizedState=bu(s),c.childLanes=Tu(e,d,s),n.memoizedState=Su,l):(pi(n),Cu(n,_))}if(y=e.memoizedState,y!==null&&(_=y.dehydrated,_!==null)){if(h)n.flags&256?(pi(n),n.flags&=-257,n=Nu(e,n,s)):n.memoizedState!==null?(mi(),n.child=e.child,n.flags|=128,n=null):(mi(),c=l.fallback,_=n.mode,l=wu({mode:"visible",children:l.children},_),c=ps(c,_,s,null),c.flags|=2,l.return=n,c.return=n,l.sibling=c,n.child=l,rs(n,e.child,null,s),l=n.child,l.memoizedState=bu(s),l.childLanes=Tu(e,d,s),n.memoizedState=Su,n=c);else if(pi(n),_.data==="$!"){if(d=_.nextSibling&&_.nextSibling.dataset,d)var C=d.dgst;d=C,l=Error(a(419)),l.stack="",l.digest=d,Jr({value:l,source:null,stack:null}),n=Nu(e,n,s)}else if(ut||ua(e,n,s,!1),d=(s&e.childLanes)!==0,ut||d){if(d=je,d!==null){if(l=s&-s,(l&42)!==0)l=1;else switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=64;break;case 268435456:l=134217728;break;default:l=0}if(l=(l&(d.suspendedLanes|s))!==0?0:l,l!==0&&l!==y.retryLane)throw y.retryLane=l,di(e,l),Mt(d,e,l),lm}_.data==="$?"||eh(),n=Nu(e,n,s)}else _.data==="$?"?(n.flags|=128,n.child=e.child,n=BE.bind(null,e),_._reactRetry=n,n=null):(e=y.treeContext,vt=mn(_.nextSibling),Dt=n,Te=!0,dn=null,Cn=!1,e!==null&&(en[tn++]=zn,en[tn++]=Hn,en[tn++]=ns,zn=e.id,Hn=e.overflow,ns=n),n=Cu(n,l.children),n.flags|=4096);return n}return c?(mi(),c=l.fallback,_=n.mode,y=e.child,C=y.sibling,l=wi(y,{mode:"hidden",children:l.children}),l.subtreeFlags=y.subtreeFlags&31457280,C!==null?c=wi(C,c):(c=ps(c,_,s,null),c.flags|=2),c.return=n,l.return=n,l.sibling=c,n.child=l,l=c,c=n.child,_=e.child.memoizedState,_===null?_=bu(s):(y=_.cachePool,y!==null?(C=at._currentValue,y=y.parent!==C?{parent:C,pool:C}:y):y=_p(),_={baseLanes:_.baseLanes|s,cachePool:y}),c.memoizedState=_,c.childLanes=Tu(e,d,s),n.memoizedState=Su,l):(pi(n),s=e.child,e=s.sibling,s=wi(s,{mode:"visible",children:l.children}),s.return=n,s.sibling=null,e!==null&&(d=n.deletions,d===null?(n.deletions=[e],n.flags|=16):d.push(e)),n.child=s,n.memoizedState=null,s)}function Cu(e,n){return n=wu({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function wu(e,n){return qm(e,n,0,null)}function Nu(e,n,s){return rs(n,e.child,null,s),e=Cu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function _m(e,n,s){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),xu(e.return,n,s)}function Au(e,n,s,l,c){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:c}:(h.isBackwards=n,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=s,h.tailMode=c)}function vm(e,n,s){var l=n.pendingProps,c=l.revealOrder,h=l.tail;if(yt(e,n,l.children,s),l=rt.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_m(e,s,n);else if(e.tag===19)_m(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(Ne(rt,l),c){case"forwards":for(s=n.child,c=null;s!==null;)e=s.alternate,e!==null&&Bl(e)===null&&(c=s),s=s.sibling;s=c,s===null?(c=n.child,n.child=null):(c=s.sibling,s.sibling=null),Au(n,!1,c,s,h);break;case"backwards":for(s=null,c=n.child,n.child=null;c!==null;){if(e=c.alternate,e!==null&&Bl(e)===null){n.child=c;break}e=c.sibling,c.sibling=s,s=c,c=e}Au(n,!0,s,null,h);break;case"together":Au(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function qn(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),Ni|=n.lanes,(s&n.childLanes)===0)if(e!==null){if(ua(e,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(a(153));if(n.child!==null){for(e=n.child,s=wi(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=wi(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function Ru(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Jl(e)))}function AE(e,n,s){switch(n.tag){case 3:Sn(n,n.stateNode.containerInfo),vi(n,at,e.memoizedState.cache),$r();break;case 27:case 5:Ds(n);break;case 4:Sn(n,n.stateNode.containerInfo);break;case 10:vi(n,n.type,n.memoizedProps.value);break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(pi(n),n.flags|=128,null):(s&n.child.childLanes)!==0?gm(e,n,s):(pi(n),e=qn(e,n,s),e!==null?e.sibling:null);pi(n);break;case 19:var c=(e.flags&128)!==0;if(l=(s&n.childLanes)!==0,l||(ua(e,n,s,!1),l=(s&n.childLanes)!==0),c){if(l)return vm(e,n,s);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Ne(rt,rt.current),l)break;return null;case 22:case 23:return n.lanes=0,hm(e,n,s);case 24:vi(n,at,e.memoizedState.cache)}return qn(e,n,s)}function ym(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps)ut=!0;else{if(!Ru(e,s)&&(n.flags&128)===0)return ut=!1,AE(e,n,s);ut=(e.flags&131072)!==0}else ut=!1,Te&&(n.flags&1048576)!==0&&ip(n,Ll,n.index);switch(n.lanes=0,n.tag){case 16:e:{e=n.pendingProps;var l=n.elementType,c=l._init;if(l=c(l._payload),n.type=l,typeof l=="function")qu(l)?(e=us(l,e),n.tag=1,n=pm(null,n,l,e,s)):(n.tag=0,n=Eu(null,n,l,e,s));else{if(l!=null){if(c=l.$$typeof,c===H){n.tag=11,n=om(null,n,l,e,s);break e}else if(c===Ae){n.tag=14,n=cm(null,n,l,e,s);break e}}throw n=St(l)||l,Error(a(306,n,""))}}return n;case 0:return Eu(e,n,n.type,n.pendingProps,s);case 1:return l=n.type,c=us(l,n.pendingProps),pm(e,n,l,c,s);case 3:e:{if(Sn(n,n.stateNode.containerInfo),e===null)throw Error(a(387));var h=n.pendingProps;c=n.memoizedState,l=c.element,Iu(e,n),da(n,h,null,s);var d=n.memoizedState;if(h=d.cache,vi(n,at,h),h!==c.cache&&Du(n,[at],s,!0),fa(),h=d.element,c.isDehydrated)if(c={element:h,isDehydrated:!1,cache:d.cache},n.updateQueue.baseState=c,n.memoizedState=c,n.flags&256){n=mm(e,n,h,s);break e}else if(h!==l){l=Jt(Error(a(424)),n),Jr(l),n=mm(e,n,h,s);break e}else for(vt=mn(n.stateNode.containerInfo.firstChild),Dt=n,Te=!0,dn=null,Cn=!0,s=fp(n,null,h,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if($r(),h===l){n=qn(e,n,s);break e}yt(e,n,h,s)}n=n.child}return n;case 26:return ca(e,n),e===null?(s=bg(n.type,null,n.pendingProps,null))?n.memoizedState=s:Te||(s=n.type,e=n.pendingProps,l=go(Y.current).createElement(s),l[Ge]=n,l[_t]=e,Et(l,s,e),ct(l),n.stateNode=l):n.memoizedState=bg(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Ds(n),e===null&&Te&&(l=n.stateNode=yg(n.type,n.pendingProps,Y.current),Dt=n,Cn=!0,vt=mn(l.firstChild)),l=n.pendingProps.children,e!==null||Te?yt(e,n,l,s):n.child=rs(n,null,l,s),ca(e,n),n.child;case 5:return e===null&&Te&&((c=l=vt)&&(l=iS(l,n.type,n.pendingProps,Cn),l!==null?(n.stateNode=l,Dt=n,vt=mn(l.firstChild),Cn=!1,c=!0):c=!1),c||ss(n)),Ds(n),c=n.type,h=n.pendingProps,d=e!==null?e.memoizedProps:null,l=h.children,ph(c,h)?l=null:d!==null&&ph(c,d)&&(n.flags|=32),n.memoizedState!==null&&(c=nu(e,n,EE,null,null,s),Ra._currentValue=c),ca(e,n),yt(e,n,l,s),n.child;case 6:return e===null&&Te&&((e=s=vt)&&(s=sS(s,n.pendingProps,Cn),s!==null?(n.stateNode=s,Dt=n,vt=null,e=!0):e=!1),e||ss(n)),null;case 13:return gm(e,n,s);case 4:return Sn(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=rs(n,null,l,s):yt(e,n,l,s),n.child;case 11:return om(e,n,n.type,n.pendingProps,s);case 7:return yt(e,n,n.pendingProps,s),n.child;case 8:return yt(e,n,n.pendingProps.children,s),n.child;case 12:return yt(e,n,n.pendingProps.children,s),n.child;case 10:return l=n.pendingProps,vi(n,n.type,l.value),yt(e,n,l.children,s),n.child;case 9:return c=n.type._context,l=n.pendingProps.children,fs(n),c=Tt(c),l=l(c),n.flags|=1,yt(e,n,l,s),n.child;case 14:return cm(e,n,n.type,n.pendingProps,s);case 15:return um(e,n,n.type,n.pendingProps,s);case 19:return vm(e,n,s);case 22:return hm(e,n,s);case 24:return fs(n),l=Tt(at),e===null?(c=eu(),c===null&&(c=je,h=$c(),c.pooledCache=h,h.refCount++,h!==null&&(c.pooledCacheLanes|=s),c=h),n.memoizedState={parent:l,cache:c},Mu(n),vi(n,at,c)):((e.lanes&s)!==0&&(Iu(e,n),da(n,null,null,s),fa()),c=e.memoizedState,h=n.memoizedState,c.parent!==l?(c={parent:l,cache:l},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),vi(n,at,l)):(l=h.cache,vi(n,at,l),l!==c.cache&&Du(n,[at],s,!0))),yt(e,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}var Ou=re(null),hs=null,Gn=null;function vi(e,n,s){Ne(Ou,n._currentValue),n._currentValue=s}function Vn(e){e._currentValue=Ou.current,xe(Ou)}function xu(e,n,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===s)break;e=e.return}}function Du(e,n,s,l){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var h=c.dependencies;if(h!==null){var d=c.child;h=h.firstContext;e:for(;h!==null;){var _=h;h=c;for(var y=0;y<n.length;y++)if(_.context===n[y]){h.lanes|=s,_=h.alternate,_!==null&&(_.lanes|=s),xu(h.return,s,e),l||(d=null);break e}h=_.next}}else if(c.tag===18){if(d=c.return,d===null)throw Error(a(341));d.lanes|=s,h=d.alternate,h!==null&&(h.lanes|=s),xu(d,s,e),d=null}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===e){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}}function ua(e,n,s,l){e=null;for(var c=n,h=!1;c!==null;){if(!h){if((c.flags&524288)!==0)h=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var d=c.alternate;if(d===null)throw Error(a(387));if(d=d.memoizedProps,d!==null){var _=c.type;Vt(c.pendingProps.value,d.value)||(e!==null?e.push(_):e=[_])}}else if(c===$e.current){if(d=c.alternate,d===null)throw Error(a(387));d.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Ra):e=[Ra])}c=c.return}e!==null&&Du(n,e,s,l),n.flags|=262144}function Jl(e){for(e=e.firstContext;e!==null;){if(!Vt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function fs(e){hs=e,Gn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Tt(e){return Em(hs,e)}function eo(e,n){return hs===null&&fs(e),Em(e,n)}function Em(e,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},Gn===null){if(e===null)throw Error(a(308));Gn=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Gn=Gn.next=n;return s}var yi=!1;function Mu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Iu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ei(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Si(e,n,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ye&2)!==0){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,n=kl(e),tp(e,null,s),n}return Il(e,l,n,s),kl(e)}function ha(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194176)!==0)){var l=n.lanes;l&=e.pendingLanes,s|=l,n.lanes=s,kn(e,s)}}function ku(e,n){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var c=null,h=null;if(s=s.firstBaseUpdate,s!==null){do{var d={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};h===null?c=h=d:h=h.next=d,s=s.next}while(s!==null);h===null?c=h=n:h=h.next=n}else c=h=n;s={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}var Uu=!1;function fa(){if(Uu){var e=er;if(e!==null)throw e}}function da(e,n,s,l){Uu=!1;var c=e.updateQueue;yi=!1;var h=c.firstBaseUpdate,d=c.lastBaseUpdate,_=c.shared.pending;if(_!==null){c.shared.pending=null;var y=_,C=y.next;y.next=null,d===null?h=C:d.next=C,d=y;var x=e.alternate;x!==null&&(x=x.updateQueue,_=x.lastBaseUpdate,_!==d&&(_===null?x.firstBaseUpdate=C:_.next=C,x.lastBaseUpdate=y))}if(h!==null){var I=c.baseState;d=0,x=C=y=null,_=h;do{var R=_.lane&-536870913,O=R!==_.lane;if(O?(Se&R)===R:(l&R)===R){R!==0&&R===Js&&(Uu=!0),x!==null&&(x=x.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var V=e,ae=_;R=n;var Ke=s;switch(ae.tag){case 1:if(V=ae.payload,typeof V=="function"){I=V.call(Ke,I,R);break e}I=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=ae.payload,R=typeof V=="function"?V.call(Ke,I,R):V,R==null)break e;I=ie({},I,R);break e;case 2:yi=!0}}R=_.callback,R!==null&&(e.flags|=64,O&&(e.flags|=8192),O=c.callbacks,O===null?c.callbacks=[R]:O.push(R))}else O={lane:R,tag:_.tag,payload:_.payload,callback:_.callback,next:null},x===null?(C=x=O,y=I):x=x.next=O,d|=R;if(_=_.next,_===null){if(_=c.shared.pending,_===null)break;O=_,_=O.next,O.next=null,c.lastBaseUpdate=O,c.shared.pending=null}}while(!0);x===null&&(y=I),c.baseState=y,c.firstBaseUpdate=C,c.lastBaseUpdate=x,h===null&&(c.shared.lanes=0),Ni|=d,e.lanes=d,e.memoizedState=I}}function Sm(e,n){if(typeof e!="function")throw Error(a(191,e));e.call(n)}function bm(e,n){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Sm(s[e],n)}function pa(e,n){try{var s=n.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var c=l.next;s=c;do{if((s.tag&e)===e){l=void 0;var h=s.create,d=s.inst;l=h(),d.destroy=l}s=s.next}while(s!==c)}}catch(_){Ue(n,n.return,_)}}function bi(e,n,s){try{var l=n.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var h=c.next;l=h;do{if((l.tag&e)===e){var d=l.inst,_=d.destroy;if(_!==void 0){d.destroy=void 0,c=n;var y=s;try{_()}catch(C){Ue(c,y,C)}}}l=l.next}while(l!==h)}}catch(C){Ue(n,n.return,C)}}function Tm(e){var n=e.updateQueue;if(n!==null){var s=e.stateNode;try{bm(n,s)}catch(l){Ue(e,e.return,l)}}}function Cm(e,n,s){s.props=us(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(l){Ue(e,n,l)}}function ds(e,n){try{var s=e.ref;if(s!==null){var l=e.stateNode;switch(e.tag){case 26:case 27:case 5:var c=l;break;default:c=l}typeof s=="function"?e.refCleanup=s(c):s.current=c}}catch(h){Ue(e,n,h)}}function Yt(e,n){var s=e.ref,l=e.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(c){Ue(e,n,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(c){Ue(e,n,c)}else s.current=null}function wm(e){var n=e.type,s=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(c){Ue(e,e.return,c)}}function Nm(e,n,s){try{var l=e.stateNode;$E(l,e.type,s,n),l[_t]=n}catch(c){Ue(e,e.return,c)}}function Am(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function Lu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Am(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ju(e,n,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=mo));else if(l!==4&&l!==27&&(e=e.child,e!==null))for(ju(e,n,s),e=e.sibling;e!==null;)ju(e,n,s),e=e.sibling}function to(e,n,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(l!==4&&l!==27&&(e=e.child,e!==null))for(to(e,n,s),e=e.sibling;e!==null;)to(e,n,s),e=e.sibling}var Yn=!1,Fe=!1,zu=!1,Rm=typeof WeakSet=="function"?WeakSet:Set,ht=null,Om=!1;function RE(e,n){if(e=e.containerInfo,fh=bo,e=Fd(e),Pc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var c=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{s.nodeType,h.nodeType}catch{s=null;break e}var d=0,_=-1,y=-1,C=0,x=0,I=e,R=null;t:for(;;){for(var O;I!==s||c!==0&&I.nodeType!==3||(_=d+c),I!==h||l!==0&&I.nodeType!==3||(y=d+l),I.nodeType===3&&(d+=I.nodeValue.length),(O=I.firstChild)!==null;)R=I,I=O;for(;;){if(I===e)break t;if(R===s&&++C===c&&(_=d),R===h&&++x===l&&(y=d),(O=I.nextSibling)!==null)break;I=R,R=I.parentNode}I=O}s=_===-1||y===-1?null:{start:_,end:y}}else s=null}s=s||{start:0,end:0}}else s=null;for(dh={focusedElem:e,selectionRange:s},bo=!1,ht=n;ht!==null;)if(n=ht,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ht=e;else for(;ht!==null;){switch(n=ht,h=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,s=n,c=h.memoizedProps,h=h.memoizedState,l=s.stateNode;try{var V=us(s.type,c,s.elementType===s.type);e=l.getSnapshotBeforeUpdate(V,h),l.__reactInternalSnapshotBeforeUpdate=e}catch(ae){Ue(s,s.return,ae)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,s=e.nodeType,s===9)_h(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":_h(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=n.sibling,e!==null){e.return=n.return,ht=e;break}ht=n.return}return V=Om,Om=!1,V}function xm(e,n,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:Qn(e,s),l&4&&pa(5,s);break;case 1:if(Qn(e,s),l&4)if(e=s.stateNode,n===null)try{e.componentDidMount()}catch(_){Ue(s,s.return,_)}else{var c=us(s.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(c,n,e.__reactInternalSnapshotBeforeUpdate)}catch(_){Ue(s,s.return,_)}}l&64&&Tm(s),l&512&&ds(s,s.return);break;case 3:if(Qn(e,s),l&64&&(l=s.updateQueue,l!==null)){if(e=null,s.child!==null)switch(s.child.tag){case 27:case 5:e=s.child.stateNode;break;case 1:e=s.child.stateNode}try{bm(l,e)}catch(_){Ue(s,s.return,_)}}break;case 26:Qn(e,s),l&512&&ds(s,s.return);break;case 27:case 5:Qn(e,s),n===null&&l&4&&wm(s),l&512&&ds(s,s.return);break;case 12:Qn(e,s);break;case 13:Qn(e,s),l&4&&Im(e,s);break;case 22:if(c=s.memoizedState!==null||Yn,!c){n=n!==null&&n.memoizedState!==null||Fe;var h=Yn,d=Fe;Yn=c,(Fe=n)&&!d?Ti(e,s,(s.subtreeFlags&8772)!==0):Qn(e,s),Yn=h,Fe=d}l&512&&(s.memoizedProps.mode==="manual"?ds(s,s.return):Yt(s,s.return));break;default:Qn(e,s)}}function Dm(e){var n=e.alternate;n!==null&&(e.alternate=null,Dm(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Cc(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var nt=null,Ft=!1;function Fn(e,n,s){for(s=s.child;s!==null;)Mm(e,n,s),s=s.sibling}function Mm(e,n,s){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(Wi,s)}catch{}switch(s.tag){case 26:Fe||Yt(s,n),Fn(e,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Fe||Yt(s,n);var l=nt,c=Ft;for(nt=s.stateNode,Fn(e,n,s),s=s.stateNode,n=s.attributes;n.length;)s.removeAttributeNode(n[0]);Cc(s),nt=l,Ft=c;break;case 5:Fe||Yt(s,n);case 6:c=nt;var h=Ft;if(nt=null,Fn(e,n,s),nt=c,Ft=h,nt!==null)if(Ft)try{e=nt,l=s.stateNode,e.nodeType===8?e.parentNode.removeChild(l):e.removeChild(l)}catch(d){Ue(s,n,d)}else try{nt.removeChild(s.stateNode)}catch(d){Ue(s,n,d)}break;case 18:nt!==null&&(Ft?(n=nt,s=s.stateNode,n.nodeType===8?gh(n.parentNode,s):n.nodeType===1&&gh(n,s),Ma(n)):gh(nt,s.stateNode));break;case 4:l=nt,c=Ft,nt=s.stateNode.containerInfo,Ft=!0,Fn(e,n,s),nt=l,Ft=c;break;case 0:case 11:case 14:case 15:Fe||bi(2,s,n),Fe||bi(4,s,n),Fn(e,n,s);break;case 1:Fe||(Yt(s,n),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Cm(s,n,l)),Fn(e,n,s);break;case 21:Fn(e,n,s);break;case 22:Fe||Yt(s,n),Fe=(l=Fe)||s.memoizedState!==null,Fn(e,n,s),Fe=l;break;default:Fn(e,n,s)}}function Im(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ma(e)}catch(s){Ue(n,n.return,s)}}function OE(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Rm),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Rm),n;default:throw Error(a(435,e.tag))}}function Hu(e,n){var s=OE(e);n.forEach(function(l){var c=qE.bind(null,e,l);s.has(l)||(s.add(l),l.then(c,c))})}function sn(e,n){var s=n.deletions;if(s!==null)for(var l=0;l<s.length;l++){var c=s[l],h=e,d=n,_=d;e:for(;_!==null;){switch(_.tag){case 27:case 5:nt=_.stateNode,Ft=!1;break e;case 3:nt=_.stateNode.containerInfo,Ft=!0;break e;case 4:nt=_.stateNode.containerInfo,Ft=!0;break e}_=_.return}if(nt===null)throw Error(a(160));Mm(h,d,c),nt=null,Ft=!1,h=c.alternate,h!==null&&(h.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)km(n,e),n=n.sibling}var pn=null;function km(e,n){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:sn(n,e),rn(e),l&4&&(bi(3,e,e.return),pa(3,e),bi(5,e,e.return));break;case 1:sn(n,e),rn(e),l&512&&(Fe||s===null||Yt(s,s.return)),l&64&&Yn&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var c=pn;if(sn(n,e),rn(e),l&512&&(Fe||s===null||Yt(s,s.return)),l&4){var h=s!==null?s.memoizedState:null;if(l=e.memoizedState,s===null)if(l===null)if(e.stateNode===null){e:{l=e.type,s=e.memoizedProps,c=c.ownerDocument||c;t:switch(l){case"title":h=c.getElementsByTagName("title")[0],(!h||h[Pr]||h[Ge]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=c.createElement(l),c.head.insertBefore(h,c.querySelector("head > title"))),Et(h,l,s),h[Ge]=e,ct(h),l=h;break e;case"link":var d=wg("link","href",c).get(l+(s.href||""));if(d){for(var _=0;_<d.length;_++)if(h=d[_],h.getAttribute("href")===(s.href==null?null:s.href)&&h.getAttribute("rel")===(s.rel==null?null:s.rel)&&h.getAttribute("title")===(s.title==null?null:s.title)&&h.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){d.splice(_,1);break t}}h=c.createElement(l),Et(h,l,s),c.head.appendChild(h);break;case"meta":if(d=wg("meta","content",c).get(l+(s.content||""))){for(_=0;_<d.length;_++)if(h=d[_],h.getAttribute("content")===(s.content==null?null:""+s.content)&&h.getAttribute("name")===(s.name==null?null:s.name)&&h.getAttribute("property")===(s.property==null?null:s.property)&&h.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&h.getAttribute("charset")===(s.charSet==null?null:s.charSet)){d.splice(_,1);break t}}h=c.createElement(l),Et(h,l,s),c.head.appendChild(h);break;default:throw Error(a(468,l))}h[Ge]=e,ct(h),l=h}e.stateNode=l}else Ng(c,e.type,e.stateNode);else e.stateNode=Cg(c,l,e.memoizedProps);else h!==l?(h===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):h.count--,l===null?Ng(c,e.type,e.stateNode):Cg(c,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Nm(e,e.memoizedProps,s.memoizedProps)}break;case 27:if(l&4&&e.alternate===null){c=e.stateNode,h=e.memoizedProps;try{for(var y=c.firstChild;y;){var C=y.nextSibling,x=y.nodeName;y[Pr]||x==="HEAD"||x==="BODY"||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=C}for(var I=e.type,R=c.attributes;R.length;)c.removeAttributeNode(R[0]);Et(c,I,h),c[Ge]=e,c[_t]=h}catch(V){Ue(e,e.return,V)}}case 5:if(sn(n,e),rn(e),l&512&&(Fe||s===null||Yt(s,s.return)),e.flags&32){c=e.stateNode;try{Bs(c,"")}catch(V){Ue(e,e.return,V)}}l&4&&e.stateNode!=null&&(c=e.memoizedProps,Nm(e,c,s!==null?s.memoizedProps:c)),l&1024&&(zu=!0);break;case 6:if(sn(n,e),rn(e),l&4){if(e.stateNode===null)throw Error(a(162));l=e.memoizedProps,s=e.stateNode;try{s.nodeValue=l}catch(V){Ue(e,e.return,V)}}break;case 3:if(yo=null,c=pn,pn=_o(n.containerInfo),sn(n,e),pn=c,rn(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{Ma(n.containerInfo)}catch(V){Ue(e,e.return,V)}zu&&(zu=!1,Um(e));break;case 4:l=pn,pn=_o(e.stateNode.containerInfo),sn(n,e),rn(e),pn=l;break;case 12:sn(n,e),rn(e);break;case 13:sn(n,e),rn(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Ku=Wt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Hu(e,l)));break;case 22:if(l&512&&(Fe||s===null||Yt(s,s.return)),y=e.memoizedState!==null,C=s!==null&&s.memoizedState!==null,x=Yn,I=Fe,Yn=x||y,Fe=I||C,sn(n,e),Fe=I,Yn=x,rn(e),n=e.stateNode,n._current=e,n._visibility&=-3,n._visibility|=n._pendingVisibility&2,l&8192&&(n._visibility=y?n._visibility&-2:n._visibility|1,y&&(n=Yn||Fe,s===null||C||n||sr(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))e:for(s=null,n=e;;){if(n.tag===5||n.tag===26||n.tag===27){if(s===null){C=s=n;try{if(c=C.stateNode,y)h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{d=C.stateNode,_=C.memoizedProps.style;var O=_!=null&&_.hasOwnProperty("display")?_.display:null;d.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(V){Ue(C,C.return,V)}}}else if(n.tag===6){if(s===null){C=n;try{C.stateNode.nodeValue=y?"":C.memoizedProps}catch(V){Ue(C,C.return,V)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Hu(e,s))));break;case 19:sn(n,e),rn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Hu(e,l)));break;case 21:break;default:sn(n,e),rn(e)}}function rn(e){var n=e.flags;if(n&2){try{if(e.tag!==27){e:{for(var s=e.return;s!==null;){if(Am(s)){var l=s;break e}s=s.return}throw Error(a(160))}switch(l.tag){case 27:var c=l.stateNode,h=Lu(e);to(e,h,c);break;case 5:var d=l.stateNode;l.flags&32&&(Bs(d,""),l.flags&=-33);var _=Lu(e);to(e,_,d);break;case 3:case 4:var y=l.stateNode.containerInfo,C=Lu(e);ju(e,C,y);break;default:throw Error(a(161))}}}catch(x){Ue(e,e.return,x)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Um(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Um(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Qn(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)xm(e,n.alternate,n),n=n.sibling}function sr(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:bi(4,n,n.return),sr(n);break;case 1:Yt(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&Cm(n,n.return,s),sr(n);break;case 26:case 27:case 5:Yt(n,n.return),sr(n);break;case 22:Yt(n,n.return),n.memoizedState===null&&sr(n);break;default:sr(n)}e=e.sibling}}function Ti(e,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,c=e,h=n,d=h.flags;switch(h.tag){case 0:case 11:case 15:Ti(c,h,s),pa(4,h);break;case 1:if(Ti(c,h,s),l=h,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(C){Ue(l,l.return,C)}if(l=h,c=l.updateQueue,c!==null){var _=l.stateNode;try{var y=c.shared.hiddenCallbacks;if(y!==null)for(c.shared.hiddenCallbacks=null,c=0;c<y.length;c++)Sm(y[c],_)}catch(C){Ue(l,l.return,C)}}s&&d&64&&Tm(h),ds(h,h.return);break;case 26:case 27:case 5:Ti(c,h,s),s&&l===null&&d&4&&wm(h),ds(h,h.return);break;case 12:Ti(c,h,s);break;case 13:Ti(c,h,s),s&&d&4&&Im(c,h);break;case 22:h.memoizedState===null&&Ti(c,h,s),ds(h,h.return);break;default:Ti(c,h,s)}n=n.sibling}}function Pu(e,n){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&sa(s))}function Bu(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&sa(e))}function Ci(e,n,s,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Lm(e,n,s,l),n=n.sibling}function Lm(e,n,s,l){var c=n.flags;switch(n.tag){case 0:case 11:case 15:Ci(e,n,s,l),c&2048&&pa(9,n);break;case 3:Ci(e,n,s,l),c&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&sa(e)));break;case 12:if(c&2048){Ci(e,n,s,l),e=n.stateNode;try{var h=n.memoizedProps,d=h.id,_=h.onPostCommit;typeof _=="function"&&_(d,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(y){Ue(n,n.return,y)}}else Ci(e,n,s,l);break;case 23:break;case 22:h=n.stateNode,n.memoizedState!==null?h._visibility&4?Ci(e,n,s,l):ma(e,n):h._visibility&4?Ci(e,n,s,l):(h._visibility|=4,rr(e,n,s,l,(n.subtreeFlags&10256)!==0)),c&2048&&Pu(n.alternate,n);break;case 24:Ci(e,n,s,l),c&2048&&Bu(n.alternate,n);break;default:Ci(e,n,s,l)}}function rr(e,n,s,l,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var h=e,d=n,_=s,y=l,C=d.flags;switch(d.tag){case 0:case 11:case 15:rr(h,d,_,y,c),pa(8,d);break;case 23:break;case 22:var x=d.stateNode;d.memoizedState!==null?x._visibility&4?rr(h,d,_,y,c):ma(h,d):(x._visibility|=4,rr(h,d,_,y,c)),c&&C&2048&&Pu(d.alternate,d);break;case 24:rr(h,d,_,y,c),c&&C&2048&&Bu(d.alternate,d);break;default:rr(h,d,_,y,c)}n=n.sibling}}function ma(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=e,l=n,c=l.flags;switch(l.tag){case 22:ma(s,l),c&2048&&Pu(l.alternate,l);break;case 24:ma(s,l),c&2048&&Bu(l.alternate,l);break;default:ma(s,l)}n=n.sibling}}var ga=8192;function ar(e){if(e.subtreeFlags&ga)for(e=e.child;e!==null;)jm(e),e=e.sibling}function jm(e){switch(e.tag){case 26:ar(e),e.flags&ga&&e.memoizedState!==null&&_S(pn,e.memoizedState,e.memoizedProps);break;case 5:ar(e);break;case 3:case 4:var n=pn;pn=_o(e.stateNode.containerInfo),ar(e),pn=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=ga,ga=16777216,ar(e),ga=n):ar(e));break;default:ar(e)}}function zm(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function _a(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];ht=l,Pm(l,e)}zm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Hm(e),e=e.sibling}function Hm(e){switch(e.tag){case 0:case 11:case 15:_a(e),e.flags&2048&&bi(9,e,e.return);break;case 3:_a(e);break;case 12:_a(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&4&&(e.return===null||e.return.tag!==13)?(n._visibility&=-5,no(e)):_a(e);break;default:_a(e)}}function no(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];ht=l,Pm(l,e)}zm(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:bi(8,n,n.return),no(n);break;case 22:s=n.stateNode,s._visibility&4&&(s._visibility&=-5,no(n));break;default:no(n)}e=e.sibling}}function Pm(e,n){for(;ht!==null;){var s=ht;switch(s.tag){case 0:case 11:case 15:bi(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:sa(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,ht=l;else e:for(s=e;ht!==null;){l=ht;var c=l.sibling,h=l.return;if(Dm(l),l===s){ht=null;break e}if(c!==null){c.return=h,ht=c;break e}ht=h}}}function xE(e,n,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(e,n,s,l){return new xE(e,n,s,l)}function qu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wi(e,n){var s=e.alternate;return s===null?(s=an(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&31457280,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Bm(e,n){e.flags&=31457282;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,n=s.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function io(e,n,s,l,c,h){var d=0;if(l=e,typeof e=="function")qu(e)&&(d=1);else if(typeof e=="string")d=mS(e,s,At.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case m:return ps(s.children,c,h,n);case g:d=8,c|=24;break;case E:return e=an(12,s,n,c|2),e.elementType=E,e.lanes=h,e;case $:return e=an(13,s,n,c),e.elementType=$,e.lanes=h,e;case ue:return e=an(19,s,n,c),e.elementType=ue,e.lanes=h,e;case Ee:return qm(s,c,h,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case b:case U:d=10;break e;case N:d=9;break e;case H:d=11;break e;case Ae:d=14;break e;case Re:d=16,l=null;break e}d=29,s=Error(a(130,e===null?"null":typeof e,"")),l=null}return n=an(d,s,n,c),n.elementType=e,n.type=l,n.lanes=h,n}function ps(e,n,s,l){return e=an(7,e,l,n),e.lanes=s,e}function qm(e,n,s,l){e=an(22,e,l,n),e.elementType=Ee,e.lanes=s;var c={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var h=c._current;if(h===null)throw Error(a(456));if((c._pendingVisibility&2)===0){var d=di(h,2);d!==null&&(c._pendingVisibility|=2,Mt(d,h,2))}},attach:function(){var h=c._current;if(h===null)throw Error(a(456));if((c._pendingVisibility&2)!==0){var d=di(h,2);d!==null&&(c._pendingVisibility&=-3,Mt(d,h,2))}}};return e.stateNode=c,e}function Gu(e,n,s){return e=an(6,e,null,n),e.lanes=s,e}function Vu(e,n,s){return n=an(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Kn(e){e.flags|=4}function Gm(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ag(n)){if(n=nn.current,n!==null&&((Se&4194176)===Se?wn!==null:(Se&62914560)!==Se&&(Se&536870912)===0||n!==wn))throw ta=Wc,ap;e.flags|=8192}}function so(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Ut():536870912,e.lanes|=n,or|=n)}function va(e,n){if(!Te)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ve(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(n)for(var c=e.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags&31457280,l|=c.flags&31457280,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=l,e.childLanes=s,n}function DE(e,n,s){var l=n.pendingProps;switch(Qc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(n),null;case 1:return Ve(n),null;case 3:return s=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Vn(at),Bt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Zr(n)?Kn(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,dn!==null&&($u(dn),dn=null))),Ve(n),null;case 26:return s=n.memoizedState,e===null?(Kn(n),s!==null?(Ve(n),Gm(n,s)):(Ve(n),n.flags&=-16777217)):s?s!==e.memoizedState?(Kn(n),Ve(n),Gm(n,s)):(Ve(n),n.flags&=-16777217):(e.memoizedProps!==l&&Kn(n),Ve(n),n.flags&=-16777217),null;case 27:Ms(n),s=Y.current;var c=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Kn(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return Ve(n),null}e=At.current,Zr(n)?sp(n):(e=yg(c,l,s),n.stateNode=e,Kn(n))}return Ve(n),null;case 5:if(Ms(n),s=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Kn(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return Ve(n),null}if(e=At.current,Zr(n))sp(n);else{switch(c=go(Y.current),e){case 1:e=c.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:e=c.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":e=c.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":e=c.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?c.createElement("select",{is:l.is}):c.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?c.createElement(s,{is:l.is}):c.createElement(s)}}e[Ge]=n,e[_t]=l;e:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break e;for(;c.sibling===null;){if(c.return===null||c.return===n)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=e;e:switch(Et(e,s,l),s){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Kn(n)}}return Ve(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&Kn(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(a(166));if(e=Y.current,Zr(n)){if(e=n.stateNode,s=n.memoizedProps,l=null,c=Dt,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}e[Ge]=n,e=!!(e.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||dg(e.nodeValue,s)),e||ss(n)}else e=go(e).createTextNode(l),e[Ge]=n,n.stateNode=e}return Ve(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Zr(n),l!==null&&l.dehydrated!==null){if(e===null){if(!c)throw Error(a(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));c[Ge]=n}else $r(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ve(n),c=!1}else dn!==null&&($u(dn),dn=null),c=!0;if(!c)return n.flags&256?(Pn(n),n):(Pn(n),null)}if(Pn(n),(n.flags&128)!==0)return n.lanes=s,n;if(s=l!==null,e=e!==null&&e.memoizedState!==null,s){l=n.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool);var h=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==c&&(l.flags|=2048)}return s!==e&&s&&(n.child.flags|=8192),so(n,n.updateQueue),Ve(n),null;case 4:return Bt(),e===null&&ch(n.stateNode.containerInfo),Ve(n),null;case 10:return Vn(n.type),Ve(n),null;case 19:if(xe(rt),c=n.memoizedState,c===null)return Ve(n),null;if(l=(n.flags&128)!==0,h=c.rendering,h===null)if(l)va(c,!1);else{if(Qe!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(h=Bl(e),h!==null){for(n.flags|=128,va(c,!1),e=h.updateQueue,n.updateQueue=e,so(n,e),n.subtreeFlags=0,e=s,s=n.child;s!==null;)Bm(s,e),s=s.sibling;return Ne(rt,rt.current&1|2),n.child}e=e.sibling}c.tail!==null&&Wt()>ro&&(n.flags|=128,l=!0,va(c,!1),n.lanes=4194304)}else{if(!l)if(e=Bl(h),e!==null){if(n.flags|=128,l=!0,e=e.updateQueue,n.updateQueue=e,so(n,e),va(c,!0),c.tail===null&&c.tailMode==="hidden"&&!h.alternate&&!Te)return Ve(n),null}else 2*Wt()-c.renderingStartTime>ro&&s!==536870912&&(n.flags|=128,l=!0,va(c,!1),n.lanes=4194304);c.isBackwards?(h.sibling=n.child,n.child=h):(e=c.last,e!==null?e.sibling=h:n.child=h,c.last=h)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Wt(),n.sibling=null,e=rt.current,Ne(rt,l?e&1|2:e&1),n):(Ve(n),null);case 22:case 23:return Pn(n),Zc(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(s&536870912)!==0&&(n.flags&128)===0&&(Ve(n),n.subtreeFlags&6&&(n.flags|=8192)):Ve(n),s=n.updateQueue,s!==null&&so(n,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==s&&(n.flags|=2048),e!==null&&xe(as),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Vn(at),Ve(n),null;case 25:return null}throw Error(a(156,n.tag))}function ME(e,n){switch(Qc(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Vn(at),Bt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Ms(n),null;case 13:if(Pn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(a(340));$r()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return xe(rt),null;case 4:return Bt(),null;case 10:return Vn(n.type),null;case 22:case 23:return Pn(n),Zc(),e!==null&&xe(as),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Vn(at),null;case 25:return null;default:return null}}function Vm(e,n){switch(Qc(n),n.tag){case 3:Vn(at),Bt();break;case 26:case 27:case 5:Ms(n);break;case 4:Bt();break;case 13:Pn(n);break;case 19:xe(rt);break;case 10:Vn(n.type);break;case 22:case 23:Pn(n),Zc(),e!==null&&xe(as);break;case 24:Vn(at)}}var IE={getCacheForType:function(e){var n=Tt(at),s=n.data.get(e);return s===void 0&&(s=e(),n.data.set(e,s)),s}},kE=typeof WeakMap=="function"?WeakMap:Map,Ye=0,je=null,me=null,Se=0,ze=0,Qt=null,Wn=!1,lr=!1,Yu=!1,Xn=0,Qe=0,Ni=0,ms=0,Fu=0,ln=0,or=0,ya=null,An=null,Qu=!1,Ku=0,ro=1/0,ao=null,Ai=null,lo=!1,gs=null,Ea=0,Wu=0,Xu=null,Sa=0,Zu=null;function Kt(){if((Ye&2)!==0&&Se!==0)return Se&-Se;if(B.T!==null){var e=Js;return e!==0?e:rh()}return Gt()}function Ym(){ln===0&&(ln=(Se&536870912)===0||Te?qt():536870912);var e=nn.current;return e!==null&&(e.flags|=32),ln}function Mt(e,n,s){(e===je&&ze===2||e.cancelPendingCommit!==null)&&(cr(e,0),Zn(e,Se,ln,!1)),Ls(e,s),((Ye&2)===0||e!==je)&&(e===je&&((Ye&2)===0&&(ms|=s),Qe===4&&Zn(e,Se,ln,!1)),Rn(e))}function Fm(e,n,s){if((Ye&6)!==0)throw Error(a(327));var l=!s&&(n&60)===0&&(n&e.expiredLanes)===0||X(e,n),c=l?jE(e,n):th(e,n,!0),h=l;do{if(c===0){lr&&!l&&Zn(e,n,0,!1);break}else if(c===6)Zn(e,n,0,!Wn);else{if(s=e.current.alternate,h&&!UE(s)){c=th(e,n,!1),h=!1;continue}if(c===2){if(h=n,e.errorRecoveryDisabledLanes&h)var d=0;else d=e.pendingLanes&-536870913,d=d!==0?d:d&536870912?536870912:0;if(d!==0){n=d;e:{var _=e;c=ya;var y=_.current.memoizedState.isDehydrated;if(y&&(cr(_,d).flags|=256),d=th(_,d,!1),d!==2){if(Yu&&!y){_.errorRecoveryDisabledLanes|=h,ms|=h,c=4;break e}h=An,An=c,h!==null&&$u(h)}c=d}if(h=!1,c!==2)continue}}if(c===1){cr(e,0),Zn(e,n,0,!0);break}e:{switch(l=e,c){case 0:case 1:throw Error(a(345));case 4:if((n&4194176)===n){Zn(l,n,ln,!Wn);break e}break;case 2:An=null;break;case 3:case 5:break;default:throw Error(a(329))}if(l.finishedWork=s,l.finishedLanes=n,(n&62914560)===n&&(h=Ku+300-Wt(),10<h)){if(Zn(l,n,ln,!Wn),G(l,0)!==0)break e;l.timeoutHandle=gg(Qm.bind(null,l,s,An,ao,Qu,n,ln,ms,or,Wn,2,-0,0),h);break e}Qm(l,s,An,ao,Qu,n,ln,ms,or,Wn,0,-0,0)}}break}while(!0);Rn(e)}function $u(e){An===null?An=e:An.push.apply(An,e)}function Qm(e,n,s,l,c,h,d,_,y,C,x,I,R){var O=n.subtreeFlags;if((O&8192||(O&16785408)===16785408)&&(Aa={stylesheets:null,count:0,unsuspend:gS},jm(n),n=vS(),n!==null)){e.cancelPendingCommit=n(eg.bind(null,e,s,l,c,d,_,y,1,I,R)),Zn(e,h,d,!C);return}eg(e,s,l,c,d,_,y,x,I,R)}function UE(e){for(var n=e;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var c=s[l],h=c.getSnapshot;c=c.value;try{if(!Vt(h(),c))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Zn(e,n,s,l){n&=~Fu,n&=~ms,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var c=n;0<c;){var h=31-Ot(c),d=1<<h;l[h]=-1,c&=~d}s!==0&&Je(e,s,n)}function oo(){return(Ye&6)===0?(ba(0),!1):!0}function Ju(){if(me!==null){if(ze===0)var e=me.return;else e=me,Gn=hs=null,ru(e),Zs=null,na=0,e=me;for(;e!==null;)Vm(e.alternate,e),e=e.return;me=null}}function cr(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,eS(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Ju(),je=e,me=s=wi(e.current,null),Se=n,ze=0,Qt=null,Wn=!1,lr=X(e,n),Yu=!1,or=ln=Fu=ms=Ni=Qe=0,An=ya=null,Qu=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var c=31-Ot(l),h=1<<c;n|=e[c],l&=~h}return Xn=n,Ml(),s}function Km(e,n){ce=null,B.H=Nn,n===ea?(n=cp(),ze=3):n===ap?(n=cp(),ze=4):ze=n===lm?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Qt=n,me===null&&(Qe=1,$l(e,Jt(n,e.current)))}function Wm(){var e=B.H;return B.H=Nn,e===null?Nn:e}function Xm(){var e=B.A;return B.A=IE,e}function eh(){Qe=4,Wn||(Se&4194176)!==Se&&nn.current!==null||(lr=!0),(Ni&134217727)===0&&(ms&134217727)===0||je===null||Zn(je,Se,ln,!1)}function th(e,n,s){var l=Ye;Ye|=2;var c=Wm(),h=Xm();(je!==e||Se!==n)&&(ao=null,cr(e,n)),n=!1;var d=Qe;e:do try{if(ze!==0&&me!==null){var _=me,y=Qt;switch(ze){case 8:Ju(),d=6;break e;case 3:case 2:case 6:nn.current===null&&(n=!0);var C=ze;if(ze=0,Qt=null,ur(e,_,y,C),s&&lr){d=0;break e}break;default:C=ze,ze=0,Qt=null,ur(e,_,y,C)}}LE(),d=Qe;break}catch(x){Km(e,x)}while(!0);return n&&e.shellSuspendCounter++,Gn=hs=null,Ye=l,B.H=c,B.A=h,me===null&&(je=null,Se=0,Ml()),d}function LE(){for(;me!==null;)Zm(me)}function jE(e,n){var s=Ye;Ye|=2;var l=Wm(),c=Xm();je!==e||Se!==n?(ao=null,ro=Wt()+500,cr(e,n)):lr=X(e,n);e:do try{if(ze!==0&&me!==null){n=me;var h=Qt;t:switch(ze){case 1:ze=0,Qt=null,ur(e,n,h,1);break;case 2:if(lp(h)){ze=0,Qt=null,$m(n);break}n=function(){ze===2&&je===e&&(ze=7),Rn(e)},h.then(n,n);break e;case 3:ze=7;break e;case 4:ze=5;break e;case 7:lp(h)?(ze=0,Qt=null,$m(n)):(ze=0,Qt=null,ur(e,n,h,7));break;case 5:var d=null;switch(me.tag){case 26:d=me.memoizedState;case 5:case 27:var _=me;if(!d||Ag(d)){ze=0,Qt=null;var y=_.sibling;if(y!==null)me=y;else{var C=_.return;C!==null?(me=C,co(C)):me=null}break t}}ze=0,Qt=null,ur(e,n,h,5);break;case 6:ze=0,Qt=null,ur(e,n,h,6);break;case 8:Ju(),Qe=6;break e;default:throw Error(a(462))}}zE();break}catch(x){Km(e,x)}while(!0);return Gn=hs=null,B.H=l,B.A=c,Ye=s,me!==null?0:(je=null,Se=0,Ml(),Qe)}function zE(){for(;me!==null&&!vc();)Zm(me)}function Zm(e){var n=ym(e.alternate,e,Xn);e.memoizedProps=e.pendingProps,n===null?co(e):me=n}function $m(e){var n=e,s=n.alternate;switch(n.tag){case 15:case 0:n=dm(s,n,n.pendingProps,n.type,void 0,Se);break;case 11:n=dm(s,n,n.pendingProps,n.type.render,n.ref,Se);break;case 5:ru(n);default:Vm(s,n),n=me=Bm(n,Xn),n=ym(s,n,Xn)}e.memoizedProps=e.pendingProps,n===null?co(e):me=n}function ur(e,n,s,l){Gn=hs=null,ru(n),Zs=null,na=0;var c=n.return;try{if(NE(e,c,n,s,Se)){Qe=1,$l(e,Jt(s,e.current)),me=null;return}}catch(h){if(c!==null)throw me=c,h;Qe=1,$l(e,Jt(s,e.current)),me=null;return}n.flags&32768?(Te||l===1?e=!0:lr||(Se&536870912)!==0?e=!1:(Wn=e=!0,(l===2||l===3||l===6)&&(l=nn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Jm(n,e)):co(n)}function co(e){var n=e;do{if((n.flags&32768)!==0){Jm(n,Wn);return}e=n.return;var s=DE(n.alternate,n,Xn);if(s!==null){me=s;return}if(n=n.sibling,n!==null){me=n;return}me=n=e}while(n!==null);Qe===0&&(Qe=5)}function Jm(e,n){do{var s=ME(e.alternate,e);if(s!==null){s.flags&=32767,me=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(e=e.sibling,e!==null)){me=e;return}me=e=s}while(e!==null);Qe=6,me=null}function eg(e,n,s,l,c,h,d,_,y,C){var x=B.T,I=P.p;try{P.p=2,B.T=null,HE(e,n,s,l,I,c,h,d,_,y,C)}finally{B.T=x,P.p=I}}function HE(e,n,s,l,c,h,d,_){do hr();while(gs!==null);if((Ye&6)!==0)throw Error(a(327));var y=e.finishedWork;if(l=e.finishedLanes,y===null)return null;if(e.finishedWork=null,e.finishedLanes=0,y===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var C=y.lanes|y.childLanes;if(C|=Vc,ke(e,l,C,h,d,_),e===je&&(me=je=null,Se=0),(y.subtreeFlags&10256)===0&&(y.flags&10256)===0||lo||(lo=!0,Wu=C,Xu=s,GE(ks,function(){return hr(),null})),s=(y.flags&15990)!==0,(y.subtreeFlags&15990)!==0||s?(s=B.T,B.T=null,h=P.p,P.p=2,d=Ye,Ye|=4,RE(e,y),km(y,e),cE(dh,e.containerInfo),bo=!!fh,dh=fh=null,e.current=y,xm(e,y.alternate,y),yc(),Ye=d,P.p=h,B.T=s):e.current=y,lo?(lo=!1,gs=e,Ea=l):tg(e,C),C=e.pendingLanes,C===0&&(Ai=null),Sc(y.stateNode),Rn(e),n!==null)for(c=e.onRecoverableError,y=0;y<n.length;y++)C=n[y],c(C.value,{componentStack:C.stack});return(Ea&3)!==0&&hr(),C=e.pendingLanes,(l&4194218)!==0&&(C&42)!==0?e===Zu?Sa++:(Sa=0,Zu=e):Sa=0,ba(0),null}function tg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,sa(n)))}function hr(){if(gs!==null){var e=gs,n=Wu;Wu=0;var s=hi(Ea),l=B.T,c=P.p;try{if(P.p=32>s?32:s,B.T=null,gs===null)var h=!1;else{s=Xu,Xu=null;var d=gs,_=Ea;if(gs=null,Ea=0,(Ye&6)!==0)throw Error(a(331));var y=Ye;if(Ye|=4,Hm(d.current),Lm(d,d.current,_,s),Ye=y,ba(0,!1),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(Wi,d)}catch{}h=!0}return h}finally{P.p=c,B.T=l,tg(e,n)}}return!1}function ng(e,n,s){n=Jt(s,n),n=yu(e.stateNode,n,2),e=Si(e,n,2),e!==null&&(Ls(e,2),Rn(e))}function Ue(e,n,s){if(e.tag===3)ng(e,e,s);else for(;n!==null;){if(n.tag===3){ng(n,e,s);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ai===null||!Ai.has(l))){e=Jt(s,e),s=rm(2),l=Si(n,s,2),l!==null&&(am(s,l,n,e),Ls(l,2),Rn(l));break}}n=n.return}}function nh(e,n,s){var l=e.pingCache;if(l===null){l=e.pingCache=new kE;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(s)||(Yu=!0,c.add(s),e=PE.bind(null,e,n,s),n.then(e,e))}function PE(e,n,s){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,je===e&&(Se&s)===s&&(Qe===4||Qe===3&&(Se&62914560)===Se&&300>Wt()-Ku?(Ye&2)===0&&cr(e,0):Fu|=s,or===Se&&(or=0)),Rn(e)}function ig(e,n){n===0&&(n=Ut()),e=di(e,n),e!==null&&(Ls(e,n),Rn(e))}function BE(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),ig(e,s)}function qE(e,n){var s=0;switch(e.tag){case 13:var l=e.stateNode,c=e.memoizedState;c!==null&&(s=c.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(n),ig(e,s)}function GE(e,n){return un(e,n)}var uo=null,fr=null,ih=!1,ho=!1,sh=!1,_s=0;function Rn(e){e!==fr&&e.next===null&&(fr===null?uo=fr=e:fr=fr.next=e),ho=!0,ih||(ih=!0,YE(VE))}function ba(e,n){if(!sh&&ho){sh=!0;do for(var s=!1,l=uo;l!==null;){if(e!==0){var c=l.pendingLanes;if(c===0)var h=0;else{var d=l.suspendedLanes,_=l.pingedLanes;h=(1<<31-Ot(42|e)+1)-1,h&=c&~(d&~_),h=h&201326677?h&201326677|1:h?h|2:0}h!==0&&(s=!0,ag(l,h))}else h=Se,h=G(l,l===je?h:0),(h&3)===0||X(l,h)||(s=!0,ag(l,h));l=l.next}while(s);sh=!1}}function VE(){ho=ih=!1;var e=0;_s!==0&&(JE()&&(e=_s),_s=0);for(var n=Wt(),s=null,l=uo;l!==null;){var c=l.next,h=sg(l,n);h===0?(l.next=null,s===null?uo=c:s.next=c,c===null&&(fr=s)):(s=l,(e!==0||(h&3)!==0)&&(ho=!0)),l=c}ba(e)}function sg(e,n){for(var s=e.suspendedLanes,l=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var d=31-Ot(h),_=1<<d,y=c[d];y===-1?((_&s)===0||(_&l)!==0)&&(c[d]=pe(_,n)):y<=n&&(e.expiredLanes|=_),h&=~_}if(n=je,s=Se,s=G(e,e===n?s:0),l=e.callbackNode,s===0||e===n&&ze===2||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Mn(l),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||X(e,s)){if(n=s&-s,n===e.callbackPriority)return n;switch(l!==null&&Mn(l),hi(s)){case 2:case 8:s=gl;break;case 32:s=ks;break;case 268435456:s=vl;break;default:s=ks}return l=rg.bind(null,e),s=un(s,l),e.callbackPriority=n,e.callbackNode=s,n}return l!==null&&l!==null&&Mn(l),e.callbackPriority=2,e.callbackNode=null,2}function rg(e,n){var s=e.callbackNode;if(hr()&&e.callbackNode!==s)return null;var l=Se;return l=G(e,e===je?l:0),l===0?null:(Fm(e,l,n),sg(e,Wt()),e.callbackNode!=null&&e.callbackNode===s?rg.bind(null,e):null)}function ag(e,n){if(hr())return null;Fm(e,n,!0)}function YE(e){tS(function(){(Ye&6)!==0?un(In,e):e()})}function rh(){return _s===0&&(_s=qt()),_s}function lg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:wl(""+e)}function og(e,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,e.id&&s.setAttribute("form",e.id),n.parentNode.insertBefore(s,n),e=new FormData(e),s.parentNode.removeChild(s),e}function FE(e,n,s,l,c){if(n==="submit"&&s&&s.stateNode===c){var h=lg((c[_t]||null).action),d=l.submitter;d&&(n=(n=d[_t]||null)?lg(n.formAction):d.getAttribute("formAction"),n!==null&&(h=n,d=null));var _=new Ol("action","action",null,l,c);e.push({event:_,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(_s!==0){var y=d?og(c,d):new FormData(c);pu(s,{pending:!0,data:y,method:c.method,action:h},null,y)}}else typeof h=="function"&&(_.preventDefault(),y=d?og(c,d):new FormData(c),pu(s,{pending:!0,data:y,method:c.method,action:h},h,y))},currentTarget:c}]})}}for(var ah=0;ah<ep.length;ah++){var lh=ep[ah],QE=lh.toLowerCase(),KE=lh[0].toUpperCase()+lh.slice(1);fn(QE,"on"+KE)}fn(Wd,"onAnimationEnd"),fn(Xd,"onAnimationIteration"),fn(Zd,"onAnimationStart"),fn("dblclick","onDoubleClick"),fn("focusin","onFocus"),fn("focusout","onBlur"),fn(hE,"onTransitionRun"),fn(fE,"onTransitionStart"),fn(dE,"onTransitionCancel"),fn($d,"onTransitionEnd"),Hs("onMouseEnter",["mouseout","mouseover"]),Hs("onMouseLeave",["mouseout","mouseover"]),Hs("onPointerEnter",["pointerout","pointerover"]),Hs("onPointerLeave",["pointerout","pointerover"]),$i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$i("onBeforeInput",["compositionend","keypress","textInput","paste"]),$i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ta));function cg(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],c=l.event;l=l.listeners;e:{var h=void 0;if(n)for(var d=l.length-1;0<=d;d--){var _=l[d],y=_.instance,C=_.currentTarget;if(_=_.listener,y!==h&&c.isPropagationStopped())break e;h=_,c.currentTarget=C;try{h(c)}catch(x){Zl(x)}c.currentTarget=null,h=y}else for(d=0;d<l.length;d++){if(_=l[d],y=_.instance,C=_.currentTarget,_=_.listener,y!==h&&c.isPropagationStopped())break e;h=_,c.currentTarget=C;try{h(c)}catch(x){Zl(x)}c.currentTarget=null,h=y}}}}function ye(e,n){var s=n[Tc];s===void 0&&(s=n[Tc]=new Set);var l=e+"__bubble";s.has(l)||(ug(n,e,2,!1),s.add(l))}function oh(e,n,s){var l=0;n&&(l|=4),ug(s,e,l,n)}var fo="_reactListening"+Math.random().toString(36).slice(2);function ch(e){if(!e[fo]){e[fo]=!0,dd.forEach(function(s){s!=="selectionchange"&&(WE.has(s)||oh(s,!1,e),oh(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[fo]||(n[fo]=!0,oh("selectionchange",!1,n))}}function ug(e,n,s,l){switch(Ig(n)){case 2:var c=SS;break;case 8:c=bS;break;default:c=bh}s=c.bind(null,n,s,e),c=void 0,!Dc||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?e.addEventListener(n,s,{capture:!0,passive:c}):e.addEventListener(n,s,!0):c!==void 0?e.addEventListener(n,s,{passive:c}):e.addEventListener(n,s,!1)}function uh(e,n,s,l,c){var h=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var d=l.tag;if(d===3||d===4){var _=l.stateNode.containerInfo;if(_===c||_.nodeType===8&&_.parentNode===c)break;if(d===4)for(d=l.return;d!==null;){var y=d.tag;if((y===3||y===4)&&(y=d.stateNode.containerInfo,y===c||y.nodeType===8&&y.parentNode===c))return;d=d.return}for(;_!==null;){if(d=Zi(_),d===null)return;if(y=d.tag,y===5||y===6||y===26||y===27){l=h=d;continue e}_=_.parentNode}}l=l.return}wd(function(){var C=h,x=Oc(s),I=[];e:{var R=Jd.get(e);if(R!==void 0){var O=Ol,V=e;switch(e){case"keypress":if(Al(s)===0)break e;case"keydown":case"keyup":O=q0;break;case"focusin":V="focus",O=Uc;break;case"focusout":V="blur",O=Uc;break;case"beforeblur":case"afterblur":O=Uc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=Rd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=x0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=Y0;break;case Wd:case Xd:case Zd:O=I0;break;case $d:O=Q0;break;case"scroll":case"scrollend":O=R0;break;case"wheel":O=W0;break;case"copy":case"cut":case"paste":O=U0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=xd;break;case"toggle":case"beforetoggle":O=Z0}var ae=(n&4)!==0,Ke=!ae&&(e==="scroll"||e==="scrollend"),w=ae?R!==null?R+"Capture":null:R;ae=[];for(var T=C,A;T!==null;){var D=T;if(A=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||A===null||w===null||(D=qr(T,w),D!=null&&ae.push(Ca(T,D,A))),Ke)break;T=T.return}0<ae.length&&(R=new O(R,V,null,s,x),I.push({event:R,listeners:ae}))}}if((n&7)===0){e:{if(R=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",R&&s!==Rc&&(V=s.relatedTarget||s.fromElement)&&(Zi(V)||V[Un]))break e;if((O||R)&&(R=x.window===x?x:(R=x.ownerDocument)?R.defaultView||R.parentWindow:window,O?(V=s.relatedTarget||s.toElement,O=C,V=V?Zi(V):null,V!==null&&(Ke=Q(V),ae=V.tag,V!==Ke||ae!==5&&ae!==27&&ae!==6)&&(V=null)):(O=null,V=C),O!==V)){if(ae=Rd,D="onMouseLeave",w="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(ae=xd,D="onPointerLeave",w="onPointerEnter",T="pointer"),Ke=O==null?R:Br(O),A=V==null?R:Br(V),R=new ae(D,T+"leave",O,s,x),R.target=Ke,R.relatedTarget=A,D=null,Zi(x)===C&&(ae=new ae(w,T+"enter",V,s,x),ae.target=A,ae.relatedTarget=Ke,D=ae),Ke=D,O&&V)t:{for(ae=O,w=V,T=0,A=ae;A;A=dr(A))T++;for(A=0,D=w;D;D=dr(D))A++;for(;0<T-A;)ae=dr(ae),T--;for(;0<A-T;)w=dr(w),A--;for(;T--;){if(ae===w||w!==null&&ae===w.alternate)break t;ae=dr(ae),w=dr(w)}ae=null}else ae=null;O!==null&&hg(I,R,O,ae,!1),V!==null&&Ke!==null&&hg(I,Ke,V,ae,!0)}}e:{if(R=C?Br(C):window,O=R.nodeName&&R.nodeName.toLowerCase(),O==="select"||O==="input"&&R.type==="file")var q=zd;else if(Ld(R))if(Hd)q=lE;else{q=rE;var fe=sE}else O=R.nodeName,!O||O.toLowerCase()!=="input"||R.type!=="checkbox"&&R.type!=="radio"?C&&Ac(C.elementType)&&(q=zd):q=aE;if(q&&(q=q(e,C))){jd(I,q,s,x);break e}fe&&fe(e,R,C),e==="focusout"&&C&&R.type==="number"&&C.memoizedProps.value!=null&&Nc(R,"number",R.value)}switch(fe=C?Br(C):window,e){case"focusin":(Ld(fe)||fe.contentEditable==="true")&&(Ys=fe,Bc=C,Xr=null);break;case"focusout":Xr=Bc=Ys=null;break;case"mousedown":qc=!0;break;case"contextmenu":case"mouseup":case"dragend":qc=!1,Qd(I,s,x);break;case"selectionchange":if(uE)break;case"keydown":case"keyup":Qd(I,s,x)}var K;if(jc)e:{switch(e){case"compositionstart":var ee="onCompositionStart";break e;case"compositionend":ee="onCompositionEnd";break e;case"compositionupdate":ee="onCompositionUpdate";break e}ee=void 0}else Vs?kd(e,s)&&(ee="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(ee="onCompositionStart");ee&&(Dd&&s.locale!=="ko"&&(Vs||ee!=="onCompositionStart"?ee==="onCompositionEnd"&&Vs&&(K=Nd()):(fi=x,Mc="value"in fi?fi.value:fi.textContent,Vs=!0)),fe=po(C,ee),0<fe.length&&(ee=new Od(ee,e,null,s,x),I.push({event:ee,listeners:fe}),K?ee.data=K:(K=Ud(s),K!==null&&(ee.data=K)))),(K=J0?eE(e,s):tE(e,s))&&(ee=po(C,"onBeforeInput"),0<ee.length&&(fe=new Od("onBeforeInput","beforeinput",null,s,x),I.push({event:fe,listeners:ee}),fe.data=K)),FE(I,e,C,s,x)}cg(I,n)})}function Ca(e,n,s){return{instance:e,listener:n,currentTarget:s}}function po(e,n){for(var s=n+"Capture",l=[];e!==null;){var c=e,h=c.stateNode;c=c.tag,c!==5&&c!==26&&c!==27||h===null||(c=qr(e,s),c!=null&&l.unshift(Ca(e,c,h)),c=qr(e,n),c!=null&&l.push(Ca(e,c,h))),e=e.return}return l}function dr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function hg(e,n,s,l,c){for(var h=n._reactName,d=[];s!==null&&s!==l;){var _=s,y=_.alternate,C=_.stateNode;if(_=_.tag,y!==null&&y===l)break;_!==5&&_!==26&&_!==27||C===null||(y=C,c?(C=qr(s,h),C!=null&&d.unshift(Ca(s,C,y))):c||(C=qr(s,h),C!=null&&d.push(Ca(s,C,y)))),s=s.return}d.length!==0&&e.push({event:n,listeners:d})}var XE=/\r\n?/g,ZE=/\u0000|\uFFFD/g;function fg(e){return(typeof e=="string"?e:""+e).replace(XE,`
`).replace(ZE,"")}function dg(e,n){return n=fg(n),fg(e)===n}function mo(){}function Me(e,n,s,l,c,h){switch(s){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Bs(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Bs(e,""+l);break;case"className":bl(e,"class",l);break;case"tabIndex":bl(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":bl(e,s,l);break;case"style":Td(e,l,h);break;case"data":if(n!=="object"){bl(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||s!=="href")){e.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=wl(""+l),e.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(s==="formAction"?(n!=="input"&&Me(e,n,"name",c.name,c,null),Me(e,n,"formEncType",c.formEncType,c,null),Me(e,n,"formMethod",c.formMethod,c,null),Me(e,n,"formTarget",c.formTarget,c,null)):(Me(e,n,"encType",c.encType,c,null),Me(e,n,"method",c.method,c,null),Me(e,n,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=wl(""+l),e.setAttribute(s,l);break;case"onClick":l!=null&&(e.onclick=mo);break;case"onScroll":l!=null&&ye("scroll",e);break;case"onScrollEnd":l!=null&&ye("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(c.children!=null)throw Error(a(60));e.innerHTML=s}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}s=wl(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""+l):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":l===!0?e.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,l):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(s,l):e.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(s):e.setAttribute(s,l);break;case"popover":ye("beforetoggle",e),ye("toggle",e),Sl(e,"popover",l);break;case"xlinkActuate":jn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":jn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":jn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":jn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":jn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":jn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":jn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":jn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":jn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Sl(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=N0.get(s)||s,Sl(e,s,l))}}function hh(e,n,s,l,c,h){switch(s){case"style":Td(e,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(c.children!=null)throw Error(a(60));e.innerHTML=s}}break;case"children":typeof l=="string"?Bs(e,l):(typeof l=="number"||typeof l=="bigint")&&Bs(e,""+l);break;case"onScroll":l!=null&&ye("scroll",e);break;case"onScrollEnd":l!=null&&ye("scrollend",e);break;case"onClick":l!=null&&(e.onclick=mo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pd.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(c=s.endsWith("Capture"),n=s.slice(2,c?s.length-7:void 0),h=e[_t]||null,h=h!=null?h[s]:null,typeof h=="function"&&e.removeEventListener(n,h,c),typeof l=="function")){typeof h!="function"&&h!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(n,l,c);break e}s in e?e[s]=l:l===!0?e.setAttribute(s,""):Sl(e,s,l)}}}function Et(e,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ye("error",e),ye("load",e);var l=!1,c=!1,h;for(h in s)if(s.hasOwnProperty(h)){var d=s[h];if(d!=null)switch(h){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Me(e,n,h,d,s,null)}}c&&Me(e,n,"srcSet",s.srcSet,s,null),l&&Me(e,n,"src",s.src,s,null);return;case"input":ye("invalid",e);var _=h=d=c=null,y=null,C=null;for(l in s)if(s.hasOwnProperty(l)){var x=s[l];if(x!=null)switch(l){case"name":c=x;break;case"type":d=x;break;case"checked":y=x;break;case"defaultChecked":C=x;break;case"value":h=x;break;case"defaultValue":_=x;break;case"children":case"dangerouslySetInnerHTML":if(x!=null)throw Error(a(137,n));break;default:Me(e,n,l,x,s,null)}}yd(e,h,_,y,C,d,c,!1),Tl(e);return;case"select":ye("invalid",e),l=d=h=null;for(c in s)if(s.hasOwnProperty(c)&&(_=s[c],_!=null))switch(c){case"value":h=_;break;case"defaultValue":d=_;break;case"multiple":l=_;default:Me(e,n,c,_,s,null)}n=h,s=d,e.multiple=!!l,n!=null?Ps(e,!!l,n,!1):s!=null&&Ps(e,!!l,s,!0);return;case"textarea":ye("invalid",e),h=c=l=null;for(d in s)if(s.hasOwnProperty(d)&&(_=s[d],_!=null))switch(d){case"value":l=_;break;case"defaultValue":c=_;break;case"children":h=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(a(91));break;default:Me(e,n,d,_,s,null)}Sd(e,l,c,h),Tl(e);return;case"option":for(y in s)if(s.hasOwnProperty(y)&&(l=s[y],l!=null))switch(y){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Me(e,n,y,l,s,null)}return;case"dialog":ye("cancel",e),ye("close",e);break;case"iframe":case"object":ye("load",e);break;case"video":case"audio":for(l=0;l<Ta.length;l++)ye(Ta[l],e);break;case"image":ye("error",e),ye("load",e);break;case"details":ye("toggle",e);break;case"embed":case"source":case"link":ye("error",e),ye("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(C in s)if(s.hasOwnProperty(C)&&(l=s[C],l!=null))switch(C){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Me(e,n,C,l,s,null)}return;default:if(Ac(n)){for(x in s)s.hasOwnProperty(x)&&(l=s[x],l!==void 0&&hh(e,n,x,l,s,void 0));return}}for(_ in s)s.hasOwnProperty(_)&&(l=s[_],l!=null&&Me(e,n,_,l,s,null))}function $E(e,n,s,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,h=null,d=null,_=null,y=null,C=null,x=null;for(O in s){var I=s[O];if(s.hasOwnProperty(O)&&I!=null)switch(O){case"checked":break;case"value":break;case"defaultValue":y=I;default:l.hasOwnProperty(O)||Me(e,n,O,null,l,I)}}for(var R in l){var O=l[R];if(I=s[R],l.hasOwnProperty(R)&&(O!=null||I!=null))switch(R){case"type":h=O;break;case"name":c=O;break;case"checked":C=O;break;case"defaultChecked":x=O;break;case"value":d=O;break;case"defaultValue":_=O;break;case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(a(137,n));break;default:O!==I&&Me(e,n,R,O,l,I)}}wc(e,d,_,y,C,x,h,c);return;case"select":O=d=_=R=null;for(h in s)if(y=s[h],s.hasOwnProperty(h)&&y!=null)switch(h){case"value":break;case"multiple":O=y;default:l.hasOwnProperty(h)||Me(e,n,h,null,l,y)}for(c in l)if(h=l[c],y=s[c],l.hasOwnProperty(c)&&(h!=null||y!=null))switch(c){case"value":R=h;break;case"defaultValue":_=h;break;case"multiple":d=h;default:h!==y&&Me(e,n,c,h,l,y)}n=_,s=d,l=O,R!=null?Ps(e,!!s,R,!1):!!l!=!!s&&(n!=null?Ps(e,!!s,n,!0):Ps(e,!!s,s?[]:"",!1));return;case"textarea":O=R=null;for(_ in s)if(c=s[_],s.hasOwnProperty(_)&&c!=null&&!l.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Me(e,n,_,null,l,c)}for(d in l)if(c=l[d],h=s[d],l.hasOwnProperty(d)&&(c!=null||h!=null))switch(d){case"value":R=c;break;case"defaultValue":O=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(a(91));break;default:c!==h&&Me(e,n,d,c,l,h)}Ed(e,R,O);return;case"option":for(var V in s)if(R=s[V],s.hasOwnProperty(V)&&R!=null&&!l.hasOwnProperty(V))switch(V){case"selected":e.selected=!1;break;default:Me(e,n,V,null,l,R)}for(y in l)if(R=l[y],O=s[y],l.hasOwnProperty(y)&&R!==O&&(R!=null||O!=null))switch(y){case"selected":e.selected=R&&typeof R!="function"&&typeof R!="symbol";break;default:Me(e,n,y,R,l,O)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ae in s)R=s[ae],s.hasOwnProperty(ae)&&R!=null&&!l.hasOwnProperty(ae)&&Me(e,n,ae,null,l,R);for(C in l)if(R=l[C],O=s[C],l.hasOwnProperty(C)&&R!==O&&(R!=null||O!=null))switch(C){case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(a(137,n));break;default:Me(e,n,C,R,l,O)}return;default:if(Ac(n)){for(var Ke in s)R=s[Ke],s.hasOwnProperty(Ke)&&R!==void 0&&!l.hasOwnProperty(Ke)&&hh(e,n,Ke,void 0,l,R);for(x in l)R=l[x],O=s[x],!l.hasOwnProperty(x)||R===O||R===void 0&&O===void 0||hh(e,n,x,R,l,O);return}}for(var w in s)R=s[w],s.hasOwnProperty(w)&&R!=null&&!l.hasOwnProperty(w)&&Me(e,n,w,null,l,R);for(I in l)R=l[I],O=s[I],!l.hasOwnProperty(I)||R===O||R==null&&O==null||Me(e,n,I,R,l,O)}var fh=null,dh=null;function go(e){return e.nodeType===9?e:e.ownerDocument}function pg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mg(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function ph(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var mh=null;function JE(){var e=window.event;return e&&e.type==="popstate"?e===mh?!1:(mh=e,!0):(mh=null,!1)}var gg=typeof setTimeout=="function"?setTimeout:void 0,eS=typeof clearTimeout=="function"?clearTimeout:void 0,_g=typeof Promise=="function"?Promise:void 0,tS=typeof queueMicrotask=="function"?queueMicrotask:typeof _g<"u"?function(e){return _g.resolve(null).then(e).catch(nS)}:gg;function nS(e){setTimeout(function(){throw e})}function gh(e,n){var s=n,l=0;do{var c=s.nextSibling;if(e.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(l===0){e.removeChild(c),Ma(n);return}l--}else s!=="$"&&s!=="$?"&&s!=="$!"||l++;s=c}while(s);Ma(n)}function _h(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":_h(s),Cc(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function iS(e,n,s,l){for(;e.nodeType===1;){var c=s;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Pr])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==c.rel||e.getAttribute("href")!==(c.href==null?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var h=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=mn(e.nextSibling),e===null)break}return null}function sS(e,n,s){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=mn(e.nextSibling),e===null))return null;return e}function mn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}function vg(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}function yg(e,n,s){switch(n=go(s),e){case"html":if(e=n.documentElement,!e)throw Error(a(452));return e;case"head":if(e=n.head,!e)throw Error(a(453));return e;case"body":if(e=n.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}var on=new Map,Eg=new Set;function _o(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var $n=P.d;P.d={f:rS,r:aS,D:lS,C:oS,L:cS,m:uS,X:fS,S:hS,M:dS};function rS(){var e=$n.f(),n=oo();return e||n}function aS(e){var n=js(e);n!==null&&n.tag===5&&n.type==="form"?Qp(n):$n.r(e)}var pr=typeof document>"u"?null:document;function Sg(e,n,s){var l=pr;if(l&&typeof n=="string"&&n){var c=Zt(n);c='link[rel="'+e+'"][href="'+c+'"]',typeof s=="string"&&(c+='[crossorigin="'+s+'"]'),Eg.has(c)||(Eg.add(c),e={rel:e,crossOrigin:s,href:n},l.querySelector(c)===null&&(n=l.createElement("link"),Et(n,"link",e),ct(n),l.head.appendChild(n)))}}function lS(e){$n.D(e),Sg("dns-prefetch",e,null)}function oS(e,n){$n.C(e,n),Sg("preconnect",e,n)}function cS(e,n,s){$n.L(e,n,s);var l=pr;if(l&&e&&n){var c='link[rel="preload"][as="'+Zt(n)+'"]';n==="image"&&s&&s.imageSrcSet?(c+='[imagesrcset="'+Zt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(c+='[imagesizes="'+Zt(s.imageSizes)+'"]')):c+='[href="'+Zt(e)+'"]';var h=c;switch(n){case"style":h=mr(e);break;case"script":h=gr(e)}on.has(h)||(e=ie({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:e,as:n},s),on.set(h,e),l.querySelector(c)!==null||n==="style"&&l.querySelector(wa(h))||n==="script"&&l.querySelector(Na(h))||(n=l.createElement("link"),Et(n,"link",e),ct(n),l.head.appendChild(n)))}}function uS(e,n){$n.m(e,n);var s=pr;if(s&&e){var l=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+Zt(l)+'"][href="'+Zt(e)+'"]',h=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=gr(e)}if(!on.has(h)&&(e=ie({rel:"modulepreload",href:e},n),on.set(h,e),s.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Na(h)))return}l=s.createElement("link"),Et(l,"link",e),ct(l),s.head.appendChild(l)}}}function hS(e,n,s){$n.S(e,n,s);var l=pr;if(l&&e){var c=zs(l).hoistableStyles,h=mr(e);n=n||"default";var d=c.get(h);if(!d){var _={loading:0,preload:null};if(d=l.querySelector(wa(h)))_.loading=5;else{e=ie({rel:"stylesheet",href:e,"data-precedence":n},s),(s=on.get(h))&&vh(e,s);var y=d=l.createElement("link");ct(y),Et(y,"link",e),y._p=new Promise(function(C,x){y.onload=C,y.onerror=x}),y.addEventListener("load",function(){_.loading|=1}),y.addEventListener("error",function(){_.loading|=2}),_.loading|=4,vo(d,n,l)}d={type:"stylesheet",instance:d,count:1,state:_},c.set(h,d)}}}function fS(e,n){$n.X(e,n);var s=pr;if(s&&e){var l=zs(s).hoistableScripts,c=gr(e),h=l.get(c);h||(h=s.querySelector(Na(c)),h||(e=ie({src:e,async:!0},n),(n=on.get(c))&&yh(e,n),h=s.createElement("script"),ct(h),Et(h,"link",e),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(c,h))}}function dS(e,n){$n.M(e,n);var s=pr;if(s&&e){var l=zs(s).hoistableScripts,c=gr(e),h=l.get(c);h||(h=s.querySelector(Na(c)),h||(e=ie({src:e,async:!0,type:"module"},n),(n=on.get(c))&&yh(e,n),h=s.createElement("script"),ct(h),Et(h,"link",e),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(c,h))}}function bg(e,n,s,l){var c=(c=Y.current)?_o(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=mr(s.href),s=zs(c).hoistableStyles,l=s.get(n),l||(l={type:"style",instance:null,count:0,state:null},s.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=mr(s.href);var h=zs(c).hoistableStyles,d=h.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,d),(h=c.querySelector(wa(e)))&&!h._p&&(d.instance=h,d.state.loading=5),on.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},on.set(e,s),h||pS(c,e,s,d.state))),n&&l===null)throw Error(a(528,""));return d}if(n&&l!==null)throw Error(a(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=gr(s),s=zs(c).hoistableScripts,l=s.get(n),l||(l={type:"script",instance:null,count:0,state:null},s.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function mr(e){return'href="'+Zt(e)+'"'}function wa(e){return'link[rel="stylesheet"]['+e+"]"}function Tg(e){return ie({},e,{"data-precedence":e.precedence,precedence:null})}function pS(e,n,s,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),Et(n,"link",s),ct(n),e.head.appendChild(n))}function gr(e){return'[src="'+Zt(e)+'"]'}function Na(e){return"script[async]"+e}function Cg(e,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+Zt(s.href)+'"]');if(l)return n.instance=l,ct(l),l;var c=ie({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ct(l),Et(l,"style",c),vo(l,s.precedence,e),n.instance=l;case"stylesheet":c=mr(s.href);var h=e.querySelector(wa(c));if(h)return n.state.loading|=4,n.instance=h,ct(h),h;l=Tg(s),(c=on.get(c))&&vh(l,c),h=(e.ownerDocument||e).createElement("link"),ct(h);var d=h;return d._p=new Promise(function(_,y){d.onload=_,d.onerror=y}),Et(h,"link",l),n.state.loading|=4,vo(h,s.precedence,e),n.instance=h;case"script":return h=gr(s.src),(c=e.querySelector(Na(h)))?(n.instance=c,ct(c),c):(l=s,(c=on.get(h))&&(l=ie({},s),yh(l,c)),e=e.ownerDocument||e,c=e.createElement("script"),ct(c),Et(c,"link",l),e.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,vo(l,s.precedence,e));return n.instance}function vo(e,n,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,h=c,d=0;d<l.length;d++){var _=l[d];if(_.dataset.precedence===n)h=_;else if(h!==c)break}h?h.parentNode.insertBefore(e,h.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(e,n.firstChild))}function vh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function yh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var yo=null;function wg(e,n,s){if(yo===null){var l=new Map,c=yo=new Map;c.set(s,l)}else c=yo,l=c.get(s),l||(l=new Map,c.set(s,l));if(l.has(e))return l;for(l.set(e,null),s=s.getElementsByTagName(e),c=0;c<s.length;c++){var h=s[c];if(!(h[Pr]||h[Ge]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var d=h.getAttribute(n)||"";d=e+d;var _=l.get(d);_?_.push(h):l.set(d,[h])}}return l}function Ng(e,n,s){e=e.ownerDocument||e,e.head.insertBefore(s,n==="title"?e.querySelector("head > title"):null)}function mS(e,n,s){if(s===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Ag(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Aa=null;function gS(){}function _S(e,n,s){if(Aa===null)throw Error(a(475));var l=Aa;if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=mr(s.href),h=e.querySelector(wa(c));if(h){e=h._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=Eo.bind(l),e.then(l,l)),n.state.loading|=4,n.instance=h,ct(h);return}h=e.ownerDocument||e,s=Tg(s),(c=on.get(c))&&vh(s,c),h=h.createElement("link"),ct(h);var d=h;d._p=new Promise(function(_,y){d.onload=_,d.onerror=y}),Et(h,"link",s),n.instance=h}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(l.count++,n=Eo.bind(l),e.addEventListener("load",n),e.addEventListener("error",n))}}function vS(){if(Aa===null)throw Error(a(475));var e=Aa;return e.stylesheets&&e.count===0&&Eh(e,e.stylesheets),0<e.count?function(n){var s=setTimeout(function(){if(e.stylesheets&&Eh(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(s)}}:null}function Eo(){if(this.count--,this.count===0){if(this.stylesheets)Eh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var So=null;function Eh(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,So=new Map,n.forEach(yS,e),So=null,Eo.call(e))}function yS(e,n){if(!(n.state.loading&4)){var s=So.get(e);if(s)var l=s.get(null);else{s=new Map,So.set(e,s);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<c.length;h++){var d=c[h];(d.nodeName==="LINK"||d.getAttribute("media")!=="not all")&&(s.set(d.dataset.precedence,d),l=d)}l&&s.set(null,l)}c=n.instance,d=c.getAttribute("data-precedence"),h=s.get(d)||l,h===l&&s.set(null,c),s.set(d,c),this.count++,l=Eo.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),h?h.parentNode.insertBefore(c,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),n.state.loading|=4}}var Ra={$$typeof:U,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function ES(e,n,s,l,c,h,d,_){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hr(0),this.hiddenUpdates=Hr(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=h,this.onRecoverableError=d,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function Rg(e,n,s,l,c,h,d,_,y,C,x,I){return e=new ES(e,n,s,d,_,y,C,I),n=1,h===!0&&(n|=24),h=an(3,null,null,n),e.current=h,h.stateNode=e,n=$c(),n.refCount++,e.pooledCache=n,n.refCount++,h.memoizedState={element:l,isDehydrated:s,cache:n},Mu(h),e}function Og(e){return e?(e=Ks,e):Ks}function xg(e,n,s,l,c,h){c=Og(c),l.context===null?l.context=c:l.pendingContext=c,l=Ei(n),l.payload={element:s},h=h===void 0?null:h,h!==null&&(l.callback=h),s=Si(e,l,n),s!==null&&(Mt(s,e,n),ha(s,e,n))}function Dg(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Sh(e,n){Dg(e,n),(e=e.alternate)&&Dg(e,n)}function Mg(e){if(e.tag===13){var n=di(e,67108864);n!==null&&Mt(n,e,67108864),Sh(e,67108864)}}var bo=!0;function SS(e,n,s,l){var c=B.T;B.T=null;var h=P.p;try{P.p=2,bh(e,n,s,l)}finally{P.p=h,B.T=c}}function bS(e,n,s,l){var c=B.T;B.T=null;var h=P.p;try{P.p=8,bh(e,n,s,l)}finally{P.p=h,B.T=c}}function bh(e,n,s,l){if(bo){var c=Th(l);if(c===null)uh(e,n,l,To,s),kg(e,l);else if(CS(c,e,n,s,l))l.stopPropagation();else if(kg(e,l),n&4&&-1<TS.indexOf(e)){for(;c!==null;){var h=js(c);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var d=L(h.pendingLanes);if(d!==0){var _=h;for(_.pendingLanes|=2,_.entangledLanes|=2;d;){var y=1<<31-Ot(d);_.entanglements[1]|=y,d&=~y}Rn(h),(Ye&6)===0&&(ro=Wt()+500,ba(0))}}break;case 13:_=di(h,2),_!==null&&Mt(_,h,2),oo(),Sh(h,2)}if(h=Th(l),h===null&&uh(e,n,l,To,s),h===c)break;c=h}c!==null&&l.stopPropagation()}else uh(e,n,l,null,s)}}function Th(e){return e=Oc(e),Ch(e)}var To=null;function Ch(e){if(To=null,e=Zi(e),e!==null){var n=Q(e);if(n===null)e=null;else{var s=n.tag;if(s===13){if(e=ve(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return To=e,null}function Ig(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ml()){case In:return 2;case gl:return 8;case ks:case _l:return 32;case vl:return 268435456;default:return 32}default:return 32}}var wh=!1,Ri=null,Oi=null,xi=null,Oa=new Map,xa=new Map,Di=[],TS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kg(e,n){switch(e){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Oi=null;break;case"mouseover":case"mouseout":xi=null;break;case"pointerover":case"pointerout":Oa.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":xa.delete(n.pointerId)}}function Da(e,n,s,l,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:n,domEventName:s,eventSystemFlags:l,nativeEvent:h,targetContainers:[c]},n!==null&&(n=js(n),n!==null&&Mg(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),e)}function CS(e,n,s,l,c){switch(n){case"focusin":return Ri=Da(Ri,e,n,s,l,c),!0;case"dragenter":return Oi=Da(Oi,e,n,s,l,c),!0;case"mouseover":return xi=Da(xi,e,n,s,l,c),!0;case"pointerover":var h=c.pointerId;return Oa.set(h,Da(Oa.get(h)||null,e,n,s,l,c)),!0;case"gotpointercapture":return h=c.pointerId,xa.set(h,Da(xa.get(h)||null,e,n,s,l,c)),!0}return!1}function Ug(e){var n=Zi(e.target);if(n!==null){var s=Q(n);if(s!==null){if(n=s.tag,n===13){if(n=ve(s),n!==null){e.blockedOn=n,hn(e.priority,function(){if(s.tag===13){var l=Kt(),c=di(s,l);c!==null&&Mt(c,s,l),Sh(s,l)}});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Co(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=Th(e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);Rc=l,s.target.dispatchEvent(l),Rc=null}else return n=js(s),n!==null&&Mg(n),e.blockedOn=s,!1;n.shift()}return!0}function Lg(e,n,s){Co(e)&&s.delete(n)}function wS(){wh=!1,Ri!==null&&Co(Ri)&&(Ri=null),Oi!==null&&Co(Oi)&&(Oi=null),xi!==null&&Co(xi)&&(xi=null),Oa.forEach(Lg),xa.forEach(Lg)}function wo(e,n){e.blockedOn===n&&(e.blockedOn=null,wh||(wh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,wS)))}var No=null;function jg(e){No!==e&&(No=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){No===e&&(No=null);for(var n=0;n<e.length;n+=3){var s=e[n],l=e[n+1],c=e[n+2];if(typeof l!="function"){if(Ch(l||s)===null)continue;break}var h=js(s);h!==null&&(e.splice(n,3),n-=3,pu(h,{pending:!0,data:c,method:s.method,action:l},l,c))}}))}function Ma(e){function n(y){return wo(y,e)}Ri!==null&&wo(Ri,e),Oi!==null&&wo(Oi,e),xi!==null&&wo(xi,e),Oa.forEach(n),xa.forEach(n);for(var s=0;s<Di.length;s++){var l=Di[s];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Di.length&&(s=Di[0],s.blockedOn===null);)Ug(s),s.blockedOn===null&&Di.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var c=s[l],h=s[l+1],d=c[_t]||null;if(typeof h=="function")d||jg(s);else if(d){var _=null;if(h&&h.hasAttribute("formAction")){if(c=h,d=h[_t]||null)_=d.formAction;else if(Ch(c)!==null)continue}else _=d.action;typeof _=="function"?s[l+1]=_:(s.splice(l,3),l-=3),jg(s)}}}function Nh(e){this._internalRoot=e}Ao.prototype.render=Nh.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(a(409));var s=n.current,l=Kt();xg(s,l,e,n,null,null)},Ao.prototype.unmount=Nh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;e.tag===0&&hr(),xg(e.current,2,null,e,null,null),oo(),n[Un]=null}};function Ao(e){this._internalRoot=e}Ao.prototype.unstable_scheduleHydration=function(e){if(e){var n=Gt();e={blockedOn:null,target:e,priority:n};for(var s=0;s<Di.length&&n!==0&&n<Di[s].priority;s++);Di.splice(s,0,e),s===0&&Ug(e)}};var zg=t.version;if(zg!=="19.0.0")throw Error(a(527,zg,"19.0.0"));P.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=k(n),e=e!==null?F(e):null,e=e===null?null:e.stateNode,e};var NS={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:B,findFiberByHostInstance:Zi,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ro=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ro.isDisabled&&Ro.supportsFiber)try{Wi=Ro.inject(NS),Rt=Ro}catch{}}return ka.createRoot=function(e,n){if(!o(e))throw Error(a(299));var s=!1,l="",c=tm,h=nm,d=im,_=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(d=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(_=n.unstable_transitionCallbacks)),n=Rg(e,1,!1,null,null,s,l,c,h,d,_,null),e[Un]=n.current,ch(e.nodeType===8?e.parentNode:e),new Nh(n)},ka.hydrateRoot=function(e,n,s){if(!o(e))throw Error(a(299));var l=!1,c="",h=tm,d=nm,_=im,y=null,C=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(d=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(y=s.unstable_transitionCallbacks),s.formState!==void 0&&(C=s.formState)),n=Rg(e,1,!0,n,s??null,l,c,h,d,_,y,C),n.context=Og(null),s=n.current,l=Kt(),c=Ei(l),c.callback=null,Si(s,c,l),n.current.lanes=l,Ls(n,l),Rn(n),e[Un]=n.current,ch(e),new Ao(n)},ka.version="19.0.0",ka}var Kg;function LS(){if(Kg)return Oh.exports;Kg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Oh.exports=US(),Oh.exports}var jS=LS();const _r="https://knowwheretopee.com/",Wg=[{percentile:99,name:"Urinal Whisperer"},{percentile:95,name:"Personal Space Savant"},{percentile:90,name:"Bathroom Etiquette Professor"},{percentile:85,name:"Social Distance Champion"},{percentile:80,name:"Urinal Chess Grandmaster"},{percentile:75,name:"Peeing Professional"},{percentile:70,name:"Men's Room Mastermind"},{percentile:65,name:"Comfort Zone Connoisseur"},{percentile:60,name:"Privacy Protocol Officer"},{percentile:55,name:"Stall Selection Strategist"},{percentile:50,name:"Middle Urinal Avoider"},{percentile:45,name:"Restroom Rules Follower"},{percentile:40,name:"Respectable Restroom User"},{percentile:35,name:"Public Bathroom Survivor"},{percentile:30,name:"Awkward Bathroom Navigator"},{percentile:25,name:"Urinal Placement Padawan"},{percentile:20,name:"Personal Space Trainee"},{percentile:15,name:"Bathroom Code Learner"},{percentile:10,name:"Eye Contact Maker"},{percentile:5,name:"Urinal Small Talker"},{percentile:0,name:"Small Bladder Energy"}],zS=[{condition:"score === 0",description:"Score is exactly 0",name:"Bathroom Anxiety Master"},{condition:"score >= 60",description:"Score is 60 or higher",name:"Urinal Etiquette Legend"}],HS=({isOpen:r,onClose:t,currentScore:i,userName:a="Guest",isGuest:o=!1})=>{const[u,f]=Z.useState([]),[p,m]=Z.useState(!0),[g,E]=Z.useState(null),[b,N]=Z.useState(null),[U,H]=Z.useState(null),[$,ue]=Z.useState(""),[Ae,Re]=Z.useState(!1),[Ee,it]=Z.useState(null),[he,Oe]=Z.useState(!1),[gt,St]=Z.useState("unknown"),[B,ie]=Z.useState(null),[qe,st]=Z.useState(!1),[bt,Pe]=Z.useState(!1),[be,z]=Z.useState(null),[J,Q]=Z.useState(null);Z.useEffect(()=>{r&&(ve(),S())},[r,i]);const ve=async()=>{try{const M=await fetch(`${_r}/api/ping`);if(M.ok){const Y=await M.json();console.log("Server status:",Y),St("online")}else console.error("Server ping failed:",M.status),St("error")}catch(M){console.error("Server ping error:",M),St("offline")}},S=async()=>{m(!0),E(null),Oe(!1),Re(!1),st(!1),Pe(!1),z(null),Q(null);try{if(i>0&&await k(),!o&&i>0){console.log("Updating user score for:",a,"Score:",i);const $e=await W();console.log("Update response:",$e),$e&&$e.isNewHighScore&&(Re(!0),Oe(!0))}console.log("Fetching leaderboard...");const M=await fetch(`${_r}/api/leaderboard`);if(!M.ok){console.error("Leaderboard fetch failed:",M.status,M.statusText);const $e=await M.text();throw console.error("Error response:",$e),new Error(`Failed to fetch leaderboard: ${M.status} ${M.statusText}`)}const Y=await M.json();if(console.log("Leaderboard data:",Y),f(Y.leaderboard||[]),!o&&Y.leaderboard&&Y.leaderboard.length>0){const $e=Y.leaderboard.find(Bt=>Bt.userName===a),Sn=Y.leaderboard.findIndex(Bt=>Bt.userName===a);$e&&(z($e),Q(Sn+1))}o||await F()}catch(M){console.error("Error fetching leaderboard:",M),E(`Could not load leaderboard. ${M.message}. Server status: ${gt}`)}finally{m(!1)}},k=async()=>{try{console.log("Fetching current rank for score:",i);const M=await fetch(`${_r}/api/current-rank/${i}`);if(!M.ok){console.error("Current rank fetch failed:",M.status,M.statusText);const $e=await M.text();throw console.error("Error response:",$e),new Error("Failed to fetch current rank")}const Y=await M.json();console.log("Current rank data:",Y),ie(Y),N(Y.rank),H(Y.percentile),ue(P(Y.percentile,i))}catch(M){console.error("Error fetching current rank:",M)}},F=async()=>{try{console.log("Fetching user stats for:",a);const M=await fetch(`${_r}/api/user-stats/${encodeURIComponent(a)}`);if(!M.ok){console.error("User stats fetch failed:",M.status,M.statusText);const $e=await M.text();throw console.error("Error response:",$e),new Error("Failed to fetch user stats")}const Y=await M.json();console.log("User stats:",Y),it(Y)}catch(M){console.error("Error fetching user stats:",M)}},W=async()=>{try{console.log("POST request to:",`${_r}/api/leaderboard`),console.log("Request body:",JSON.stringify({userName:a,score:i}));const M=await fetch(`${_r}/api/leaderboard`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:a,score:i})});if(!M.ok){console.error("Score update failed:",M.status,M.statusText);const Y=await M.text();throw console.error("Error response:",Y),new Error("Failed to update score")}return await M.json()}catch(M){return console.error("Error updating score:",M),null}},P=(M,Y)=>Y===0?"Bathroom Anxiety Master":Y>=60?"Urinal Etiquette Legend":M>=99?"Urinal Whisperer":M>=95?"Personal Space Savant":M>=90?"Bathroom Etiquette Professor":M>=85?"Social Distance Champion":M>=80?"Urinal Chess Grandmaster":M>=75?"Peeing Professional":M>=70?"Men's Room Mastermind":M>=65?"Comfort Zone Connoisseur":M>=60?"Privacy Protocol Officer":M>=55?"Stall Selection Strategist":M>=50?"Middle Urinal Avoider":M>=45?"Restroom Rules Follower":M>=40?"Respectable Restroom User":M>=35?"Public Bathroom Survivor":M>=30?"Awkward Bathroom Navigator":M>=25?"Urinal Placement Padawan":M>=20?"Personal Space Trainee":M>=15?"Bathroom Code Learner":M>=10?"Eye Contact Maker":M>=5?"Urinal Small Talker":"Small Bladder Energy",le=M=>{navigator.clipboard.writeText(M).then(()=>{alert("Results copied to clipboard!")}).catch(Y=>{console.error("Failed to copy:",Y),alert("Failed to copy results. Please try again.")})},se=M=>{M.preventDefault(),M.stopPropagation(),st(!qe),bt&&Pe(!1)},Xe=M=>{M.preventDefault(),M.stopPropagation(),Pe(!bt),qe&&st(!1)},re=()=>{st(!1),Pe(!1)},xe=()=>{Re(!1),re(),t()},Ne=M=>M===$,At=()=>o||!J?!1:J<=3;return r?v.jsx("div",{className:"leaderboard-overlay",children:v.jsxs("div",{className:"leaderboard-modal",children:[v.jsx("button",{className:"close-button",onClick:xe,children:"×"}),v.jsx("h2",{className:"leaderboard-title",children:"Did You Cook?"}),p?v.jsx("div",{className:"loading",children:"Loading leaderboard..."}):g?v.jsx("div",{className:"error",children:g}):v.jsxs(v.Fragment,{children:[o&&v.jsxs("div",{className:"guest-alert",children:[v.jsx("span",{className:"guest-icon",children:"👋"}),"Playing as guest - score not saved to leaderboard"]}),Ae&&!o&&v.jsxs("div",{className:"high-score-alert",children:[v.jsx("span",{className:"high-score-icon",children:"🏆"}),"New personal best!"]}),v.jsxs("div",{className:"user-stats",children:[v.jsxs("h3",{className:"your-score",children:["Your Score: ",v.jsx("span",{className:"score-value",children:i})]}),B&&v.jsxs("div",{className:"current-score-stats",children:[v.jsx("h4",{children:"Current Attempt"}),v.jsxs("p",{className:"rank",children:["Rank: ",v.jsxs("strong",{children:["#",B.rank," of ",B.totalPlayers+1," players"]})," (including guest)"]}),v.jsxs("p",{className:"percentile",children:["Top ",B.percentile,"% of all scores"]}),v.jsxs("div",{className:"rank-name-container",children:[v.jsx("p",{className:"rank-name",children:$}),v.jsx("button",{className:"rank-info-button",onClick:se,"aria-label":"Show rank information",children:"?"}),qe&&v.jsxs("div",{className:"rank-info-popup",children:[v.jsxs("div",{className:"popup-header",children:[v.jsx("h4",{children:"Bathroom Ranks"}),v.jsx("button",{className:"popup-close",onClick:re,children:"×"})]}),v.jsxs("div",{className:"rank-info-section",children:[v.jsx("h5",{children:"Special Ranks"}),v.jsx("ul",{className:"rank-list",children:zS.map((M,Y)=>v.jsxs("li",{className:Ne(M.name)?"current-rank":"",children:[v.jsx("span",{className:"rank-name-info",children:M.name}),v.jsx("span",{className:"rank-criteria",children:M.description})]},`special-${Y}`))})]}),v.jsxs("div",{className:"rank-info-section",children:[v.jsx("h5",{children:"Percentile Ranks"}),v.jsx("ul",{className:"rank-list",children:Wg.map((M,Y)=>v.jsxs("li",{className:Ne(M.name)?"current-rank":"",children:[v.jsx("span",{className:"rank-name-info",children:M.name}),v.jsx("span",{className:"rank-criteria",children:Y===Wg.length-1?"Below 5th percentile":`${M.percentile}${PS(M.percentile)} percentile and above`})]},`percentile-${Y}`))})]})]})]})]}),!o&&Ee&&v.jsxs("div",{className:"personal-stats",children:[v.jsx("h4",{children:"Personal Stats"}),v.jsxs("div",{className:"stats-grid",children:[v.jsxs("div",{className:"stats-item",children:[v.jsx("span",{className:"stats-label",children:"Personal Best:"}),v.jsx("span",{className:"stats-value highlight",children:Ee.highScore})]}),v.jsxs("div",{className:"stats-item",children:[v.jsx("span",{className:"stats-label",children:"Total Games:"}),v.jsx("span",{className:"stats-value highlight",children:Ee.totalGames})]}),v.jsxs("div",{className:"stats-item",children:[v.jsx("span",{className:"stats-label",children:"Best Rank:"}),v.jsxs("span",{className:"stats-value highlight",children:["#",Ee.rank]})]})]})]})]}),v.jsxs("div",{className:"leaderboard-container",children:[v.jsx("h3",{children:"Global Leaderboard"}),u.length===0?v.jsx("p",{className:"no-scores",children:"No scores yet. You could be the first!"}):v.jsxs("div",{className:"leaderboard-wrapper",children:[v.jsxs("table",{className:"leaderboard-table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Rank"}),v.jsx("th",{children:"Player"}),v.jsx("th",{children:"Score"}),v.jsx("th",{children:"Games"})]})}),v.jsxs("tbody",{children:[u.slice(0,3).map((M,Y)=>v.jsxs("tr",{className:M.userName===a?"current-user":"",children:[v.jsxs("td",{className:`rank-cell rank-${Y+1}`,children:[Y===0&&v.jsx("span",{className:"rank-medal gold",children:"🥇"}),Y===1&&v.jsx("span",{className:"rank-medal silver",children:"🥈"}),Y===2&&v.jsx("span",{className:"rank-medal bronze",children:"🥉"}),"#",Y+1]}),v.jsx("td",{children:M.userName}),v.jsx("td",{children:M.score}),M.userName===a?v.jsxs("td",{className:"games-cell",children:[(be==null?void 0:be.gamesPlayed)||M.gamesPlayed||1,v.jsx("button",{className:"leaderboard-info-button",onClick:Xe,"aria-label":"Show full leaderboard",children:"?"})]}):v.jsx("td",{children:M.gamesPlayed||1})]},`top-${Y}`)),!o&&be&&!At()&&v.jsxs("tr",{className:"current-user user-position-row",children:[v.jsxs("td",{className:"rank-cell",children:[v.jsx("span",{className:"you-badge",children:"YOU"}),"#",J]}),v.jsx("td",{children:be.userName}),v.jsx("td",{children:be.score}),v.jsxs("td",{className:"games-cell",children:[be.gamesPlayed||1,v.jsx("button",{className:"leaderboard-info-button",onClick:Xe,"aria-label":"Show full leaderboard",children:"?"})]})]})]})]}),bt&&v.jsxs("div",{className:"full-leaderboard-popup",children:[v.jsxs("div",{className:"popup-header",children:[v.jsx("h4",{children:"Complete Leaderboard"}),v.jsx("button",{className:"popup-close",onClick:re,children:"×"})]}),v.jsx("div",{className:"full-leaderboard-content",children:v.jsxs("table",{className:"full-leaderboard-table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Rank"}),v.jsx("th",{children:"Player"}),v.jsx("th",{children:"Score"}),v.jsx("th",{children:"Games"})]})}),v.jsx("tbody",{children:u.map((M,Y)=>v.jsxs("tr",{className:M.userName===a?"current-user":"",children:[v.jsxs("td",{className:`rank-cell ${Y<3?`rank-${Y+1}`:""}`,children:[Y===0&&v.jsx("span",{className:"rank-medal gold",children:"🥇"}),Y===1&&v.jsx("span",{className:"rank-medal silver",children:"🥈"}),Y===2&&v.jsx("span",{className:"rank-medal bronze",children:"🥉"}),"#",Y+1]}),v.jsx("td",{children:M.userName}),v.jsx("td",{children:M.score}),v.jsx("td",{children:M.gamesPlayed||1})]},`full-${Y}`))})]})})]})]})]}),gt==="offline"&&v.jsx("div",{className:"server-error",children:v.jsx("p",{children:"Server connection issue. Scores can't be saved at this time."})}),o&&v.jsx("div",{className:"guest-message",children:v.jsxs("p",{children:["Want to save your scores? ",v.jsx("a",{href:"#",onClick:()=>xe(),children:"Log in or create an account"})," to join the global leaderboard!"]})}),!o&&!Ae&&i>0&&v.jsx("div",{className:"score-status",children:v.jsxs("p",{children:["Your personal best is ",(Ee==null?void 0:Ee.highScore)||0,". Keep playing to improve your rank!"]})}),v.jsxs("div",{className:"leaderboard-buttons",children:[v.jsx("button",{className:"share-leaderboard-button",onClick:()=>{let M=`I scored ${i} points in "Only Real Men Know Where to Pee"`;$?M+=` and earned the rank "${$}"!`:M+="!",B&&B.percentile&&(M+=` Top ${B.percentile}% of all players.`),!o&&Ee&&(Ae?M+=" 🏆 That's my new personal best!":i>Ee.highScore*.8&&(M+=` Getting closer to my personal best of ${Ee.highScore}!`),Ee.totalGames>10&&(M+=` I've played ${Ee.totalGames} games so far.`)),M+=" Think you know urinal etiquette? Try to beat my score!",navigator.share?navigator.share({title:"My Urinal Game Stats",text:M,url:window.location.href}).then(()=>{console.log("Successfully shared results")}).catch(Y=>{console.error("Error sharing:",Y),le(M)}):le(M)},children:"Share Results"}),v.jsx("button",{className:"close-leaderboard-button",onClick:xe,children:"Close"})]})]})]})}):null};function PS(r){const t=r%10,i=r%100;return t===1&&i!==11?"st":t===2&&i!==12?"nd":t===3&&i!==13?"rd":"th"}const BS=()=>{};var Xg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j=function(r,t){if(!r)throw Mr(t)},Mr=function(r){return new Error("Firebase Database ("+rv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=function(r){const t=[];let i=0;for(let a=0;a<r.length;a++){let o=r.charCodeAt(a);o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):(o&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++a)&1023),t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},qS=function(r){const t=[];let i=0,a=0;for(;i<r.length;){const o=r[i++];if(o<128)t[a++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[i++];t[a++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[i++],f=r[i++],p=r[i++],m=((o&7)<<18|(u&63)<<12|(f&63)<<6|p&63)-65536;t[a++]=String.fromCharCode(55296+(m>>10)),t[a++]=String.fromCharCode(56320+(m&1023))}else{const u=r[i++],f=r[i++];t[a++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return t.join("")},Sf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,p=f?r[o+1]:0,m=o+2<r.length,g=m?r[o+2]:0,E=u>>2,b=(u&3)<<4|p>>4;let N=(p&15)<<2|g>>6,U=g&63;m||(U=64,f||(N=64)),a.push(i[E],i[b],i[N],i[U])}return a.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(av(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):qS(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<r.length;){const u=i[r.charAt(o++)],p=o<r.length?i[r.charAt(o)]:0;++o;const g=o<r.length?i[r.charAt(o)]:64;++o;const b=o<r.length?i[r.charAt(o)]:64;if(++o,u==null||p==null||g==null||b==null)throw new GS;const N=u<<2|p>>4;if(a.push(N),g!==64){const U=p<<4&240|g>>2;if(a.push(U),b!==64){const H=g<<6&192|b;a.push(H)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class GS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lv=function(r){const t=av(r);return Sf.encodeByteArray(t,!0)},jo=function(r){return lv(r).replace(/\./g,"")},zo=function(r){try{return Sf.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(r){return ov(void 0,r)}function ov(r,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const i=t;return new Date(i.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return t}for(const i in t)!t.hasOwnProperty(i)||!YS(i)||(r[i]=ov(r[i],t[i]));return r}function YS(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=()=>FS().__FIREBASE_DEFAULTS__,KS=()=>{if(typeof process>"u"||typeof Xg>"u")return;const r=Xg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},WS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&zo(r[1]);return t&&JSON.parse(t)},bf=()=>{try{return BS()||QS()||KS()||WS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},cv=r=>{var t,i;return(i=(t=bf())===null||t===void 0?void 0:t.emulatorHosts)===null||i===void 0?void 0:i[r]},XS=r=>{const t=cv(r);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),a]:[t.substring(0,i),a]},uv=()=>{var r;return(r=bf())===null||r===void 0?void 0:r.config},hv=r=>{var t;return(t=bf())===null||t===void 0?void 0:t[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=t||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[jo(JSON.stringify(i)),jo(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Tf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function $S(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function fv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eb(){const r=kt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function tb(){return rv.NODE_ADMIN===!0}function nb(){try{return typeof indexedDB=="object"}catch{return!1}}function ib(){return new Promise((r,t)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(a),r(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var u;t(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="FirebaseError";class Qi extends Error{constructor(t,i,a){super(i),this.code=t,this.customData=a,this.name=sb,Object.setPrototypeOf(this,Qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sl.prototype.create)}}class sl{constructor(t,i,a){this.service=t,this.serviceName=i,this.errors=a}create(t,...i){const a=i[0]||{},o=`${this.service}/${t}`,u=this.errors[t],f=u?rb(u,a):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new Qi(o,p,a)}}function rb(r,t){return r.replace(ab,(i,a)=>{const o=t[a];return o!=null?String(o):`<${a}?>`})}const ab=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(r){return JSON.parse(r)}function lt(r){return JSON.stringify(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=function(r){let t={},i={},a={},o="";try{const u=r.split(".");t=Qa(zo(u[0])||""),i=Qa(zo(u[1])||""),o=u[2],a=i.d||{},delete i.d}catch{}return{header:t,claims:i,data:a,signature:o}},lb=function(r){const t=dv(r),i=t.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},ob=function(r){const t=dv(r).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(r,t){return Object.prototype.hasOwnProperty.call(r,t)}function Nr(r,t){if(Object.prototype.hasOwnProperty.call(r,t))return r[t]}function Zh(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Ho(r,t,i){const a={};for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&(a[o]=t.call(i,r[o],o,r));return a}function bs(r,t){if(r===t)return!0;const i=Object.keys(r),a=Object.keys(t);for(const o of i){if(!a.includes(o))return!1;const u=r[o],f=t[o];if(Zg(u)&&Zg(f)){if(!bs(u,f))return!1}else if(u!==f)return!1}for(const o of a)if(!i.includes(o))return!1;return!0}function Zg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(r){const t=[];for(const[i,a]of Object.entries(r))Array.isArray(a)?a.forEach(o=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}function Ha(r){const t={};return r.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,u]=a.split("=");t[decodeURIComponent(o)]=decodeURIComponent(u)}}),t}function Pa(r){const t=r.indexOf("?");if(!t)return"";const i=r.indexOf("#",t);return r.substring(t,i>0?i:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,i){i||(i=0);const a=this.W_;if(typeof t=="string")for(let b=0;b<16;b++)a[b]=t.charCodeAt(i)<<24|t.charCodeAt(i+1)<<16|t.charCodeAt(i+2)<<8|t.charCodeAt(i+3),i+=4;else for(let b=0;b<16;b++)a[b]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i+=4;for(let b=16;b<80;b++){const N=a[b-3]^a[b-8]^a[b-14]^a[b-16];a[b]=(N<<1|N>>>31)&4294967295}let o=this.chain_[0],u=this.chain_[1],f=this.chain_[2],p=this.chain_[3],m=this.chain_[4],g,E;for(let b=0;b<80;b++){b<40?b<20?(g=p^u&(f^p),E=1518500249):(g=u^f^p,E=1859775393):b<60?(g=u&f|p&(u|f),E=2400959708):(g=u^f^p,E=3395469782);const N=(o<<5|o>>>27)+g+m+E+a[b]&4294967295;m=p,p=f,f=(u<<30|u>>>2)&4294967295,u=o,o=N}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(t,i){if(t==null)return;i===void 0&&(i=t.length);const a=i-this.blockSize;let o=0;const u=this.buf_;let f=this.inbuf_;for(;o<i;){if(f===0)for(;o<=a;)this.compress_(t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<i;)if(u[f]=t.charCodeAt(o),++f,++o,f===this.blockSize){this.compress_(u),f=0;break}}else for(;o<i;)if(u[f]=t[o],++f,++o,f===this.blockSize){this.compress_(u),f=0;break}}this.inbuf_=f,this.total_+=i}digest(){const t=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=i&255,i/=256;this.compress_(this.buf_);let a=0;for(let o=0;o<5;o++)for(let u=24;u>=0;u-=8)t[a]=this.chain_[o]>>u&255,++a;return t}}function ub(r,t){const i=new hb(r,t);return i.subscribe.bind(i)}class hb{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,a){let o;if(t===void 0&&i===void 0&&a===void 0)throw new Error("Missing Observer.");fb(t,["next","error","complete"])?o=t:o={next:t,error:i,complete:a},o.next===void 0&&(o.next=Ih),o.error===void 0&&(o.error=Ih),o.complete===void 0&&(o.complete=Ih);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fb(r,t){if(typeof r!="object"||r===null)return!1;for(const i of t)if(i in r&&typeof r[i]=="function")return!0;return!1}function Ih(){}function Cf(r,t){return`${r} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=function(r){const t=[];let i=0;for(let a=0;a<r.length;a++){let o=r.charCodeAt(a);if(o>=55296&&o<=56319){const u=o-55296;a++,j(a<r.length,"Surrogate pair missing trail surrogate.");const f=r.charCodeAt(a)-56320;o=65536+(u<<10)+f}o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):o<65536?(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},rc=function(r){let t=0;for(let i=0;i<r.length;i++){const a=r.charCodeAt(i);a<128?t++:a<2048?t+=2:a>=55296&&a<=56319?(t+=4,i++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(r){return r&&r._delegate?r._delegate:r}class Ts{constructor(t,i,a){this.name=t,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const a=new sc;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){var i;const a=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(i=t==null?void 0:t.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(gb(t))try{this.getOrInitializeService({instanceIdentifier:vs})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch{}}}}clearInstance(t=vs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=vs){return this.instances.has(t)}getOptions(t=vs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[u,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);a===p&&f.resolve(o)}return o}onInit(t,i){var a;const o=this.normalizeInstanceIdentifier(i),u=(a=this.onInitCallbacks.get(o))!==null&&a!==void 0?a:new Set;u.add(t),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&t(f,o),()=>{u.delete(t)}}invokeOnInitCallbacks(t,i){const a=this.onInitCallbacks.get(i);if(a)for(const o of a)try{o(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:mb(t),options:i}),this.instances.set(t,a),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=vs){return this.component?this.component.multipleInstances?t:vs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mb(r){return r===vs?void 0:r}function gb(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new pb(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ie||(Ie={}));const vb={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},yb=Ie.INFO,Eb={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},Sb=(r,t,...i)=>{if(t<r.logLevel)return;const a=new Date().toISOString(),o=Eb[t];if(o)console[o](`[${a}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class wf{constructor(t){this.name=t,this._logLevel=yb,this._logHandler=Sb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ie))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?vb[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...t),this._logHandler(this,Ie.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...t),this._logHandler(this,Ie.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...t),this._logHandler(this,Ie.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...t),this._logHandler(this,Ie.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...t),this._logHandler(this,Ie.ERROR,...t)}}const bb=(r,t)=>t.some(i=>r instanceof i);let $g,Jg;function Tb(){return $g||($g=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Cb(){return Jg||(Jg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pv=new WeakMap,$h=new WeakMap,mv=new WeakMap,kh=new WeakMap,Nf=new WeakMap;function wb(r){const t=new Promise((i,a)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{i(Hi(r.result)),o()},f=()=>{a(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return t.then(i=>{i instanceof IDBCursor&&pv.set(i,r)}).catch(()=>{}),Nf.set(t,r),t}function Nb(r){if($h.has(r))return;const t=new Promise((i,a)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{i(),o()},f=()=>{a(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});$h.set(r,t)}let Jh={get(r,t,i){if(r instanceof IDBTransaction){if(t==="done")return $h.get(r);if(t==="objectStoreNames")return r.objectStoreNames||mv.get(r);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Hi(r[t])},set(r,t,i){return r[t]=i,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function Ab(r){Jh=r(Jh)}function Rb(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const a=r.call(Uh(this),t,...i);return mv.set(a,t.sort?t.sort():[t]),Hi(a)}:Cb().includes(r)?function(...t){return r.apply(Uh(this),t),Hi(pv.get(this))}:function(...t){return Hi(r.apply(Uh(this),t))}}function Ob(r){return typeof r=="function"?Rb(r):(r instanceof IDBTransaction&&Nb(r),bb(r,Tb())?new Proxy(r,Jh):r)}function Hi(r){if(r instanceof IDBRequest)return wb(r);if(kh.has(r))return kh.get(r);const t=Ob(r);return t!==r&&(kh.set(r,t),Nf.set(t,r)),t}const Uh=r=>Nf.get(r);function xb(r,t,{blocked:i,upgrade:a,blocking:o,terminated:u}={}){const f=indexedDB.open(r,t),p=Hi(f);return a&&f.addEventListener("upgradeneeded",m=>{a(Hi(f.result),m.oldVersion,m.newVersion,Hi(f.transaction),m)}),i&&f.addEventListener("blocked",m=>i(m.oldVersion,m.newVersion,m)),p.then(m=>{u&&m.addEventListener("close",()=>u()),o&&m.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const Db=["get","getKey","getAll","getAllKeys","count"],Mb=["put","add","delete","clear"],Lh=new Map;function e_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Lh.get(t))return Lh.get(t);const i=t.replace(/FromIndex$/,""),a=t!==i,o=Mb.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(o||Db.includes(i)))return;const u=async function(f,...p){const m=this.transaction(f,o?"readwrite":"readonly");let g=m.store;return a&&(g=g.index(p.shift())),(await Promise.all([g[i](...p),o&&m.done]))[0]};return Lh.set(t,u),u}Ab(r=>({...r,get:(t,i,a)=>e_(t,i)||r.get(t,i,a),has:(t,i)=>!!e_(t,i)||r.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(kb(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function kb(r){const t=r.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ef="@firebase/app",t_="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=new wf("@firebase/app"),Ub="@firebase/app-compat",Lb="@firebase/analytics-compat",jb="@firebase/analytics",zb="@firebase/app-check-compat",Hb="@firebase/app-check",Pb="@firebase/auth",Bb="@firebase/auth-compat",qb="@firebase/database",Gb="@firebase/data-connect",Vb="@firebase/database-compat",Yb="@firebase/functions",Fb="@firebase/functions-compat",Qb="@firebase/installations",Kb="@firebase/installations-compat",Wb="@firebase/messaging",Xb="@firebase/messaging-compat",Zb="@firebase/performance",$b="@firebase/performance-compat",Jb="@firebase/remote-config",eT="@firebase/remote-config-compat",tT="@firebase/storage",nT="@firebase/storage-compat",iT="@firebase/firestore",sT="@firebase/vertexai",rT="@firebase/firestore-compat",aT="firebase",lT="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf="[DEFAULT]",oT={[ef]:"fire-core",[Ub]:"fire-core-compat",[jb]:"fire-analytics",[Lb]:"fire-analytics-compat",[Hb]:"fire-app-check",[zb]:"fire-app-check-compat",[Pb]:"fire-auth",[Bb]:"fire-auth-compat",[qb]:"fire-rtdb",[Gb]:"fire-data-connect",[Vb]:"fire-rtdb-compat",[Yb]:"fire-fn",[Fb]:"fire-fn-compat",[Qb]:"fire-iid",[Kb]:"fire-iid-compat",[Wb]:"fire-fcm",[Xb]:"fire-fcm-compat",[Zb]:"fire-perf",[$b]:"fire-perf-compat",[Jb]:"fire-rc",[eT]:"fire-rc-compat",[tT]:"fire-gcs",[nT]:"fire-gcs-compat",[iT]:"fire-fst",[rT]:"fire-fst-compat",[sT]:"fire-vertex","fire-js":"fire-js",[aT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=new Map,cT=new Map,nf=new Map;function n_(r,t){try{r.container.addComponent(t)}catch(i){ri.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,i)}}function Ar(r){const t=r.name;if(nf.has(t))return ri.debug(`There were multiple attempts to register component ${t}.`),!1;nf.set(t,r);for(const i of Po.values())n_(i,r);for(const i of cT.values())n_(i,r);return!0}function Af(r,t){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(t)}function cn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pi=new sl("app","Firebase",uT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(t,i,a){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Pi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=lT;function gv(r,t={}){let i=r;typeof t!="object"&&(t={name:t});const a=Object.assign({name:tf,automaticDataCollectionEnabled:!1},t),o=a.name;if(typeof o!="string"||!o)throw Pi.create("bad-app-name",{appName:String(o)});if(i||(i=uv()),!i)throw Pi.create("no-options");const u=Po.get(o);if(u){if(bs(i,u.options)&&bs(a,u.config))return u;throw Pi.create("duplicate-app",{appName:o})}const f=new _b(o);for(const m of nf.values())f.addComponent(m);const p=new hT(i,a,f);return Po.set(o,p),p}function _v(r=tf){const t=Po.get(r);if(!t&&r===tf&&uv())return gv();if(!t)throw Pi.create("no-app",{appName:r});return t}function Bi(r,t,i){var a;let o=(a=oT[r])!==null&&a!==void 0?a:r;i&&(o+=`-${i}`);const u=o.match(/\s|\//),f=t.match(/\s|\//);if(u||f){const p=[`Unable to register library "${o}" with version "${t}":`];u&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&p.push("and"),f&&p.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ri.warn(p.join(" "));return}Ar(new Ts(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="firebase-heartbeat-database",dT=1,Ka="firebase-heartbeat-store";let jh=null;function vv(){return jh||(jh=xb(fT,dT,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Ka)}catch(i){console.warn(i)}}}}).catch(r=>{throw Pi.create("idb-open",{originalErrorMessage:r.message})})),jh}async function pT(r){try{const i=(await vv()).transaction(Ka),a=await i.objectStore(Ka).get(yv(r));return await i.done,a}catch(t){if(t instanceof Qi)ri.warn(t.message);else{const i=Pi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ri.warn(i.message)}}}async function i_(r,t){try{const a=(await vv()).transaction(Ka,"readwrite");await a.objectStore(Ka).put(t,yv(r)),await a.done}catch(i){if(i instanceof Qi)ri.warn(i.message);else{const a=Pi.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});ri.warn(a.message)}}}function yv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=1024,gT=30;class _T{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new yT(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,i;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=s_();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>gT){const f=ET(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){ri.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=s_(),{heartbeatsToSend:a,unsentEntries:o}=vT(this._heartbeatsCache.heartbeats),u=jo(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=i,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(i){return ri.warn(i),""}}}function s_(){return new Date().toISOString().substring(0,10)}function vT(r,t=mT){const i=[];let a=r.slice();for(const o of r){const u=i.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),r_(i)>t){u.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),r_(i)>t){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class yT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nb()?ib().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await pT(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return i_(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return i_(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function r_(r){return jo(JSON.stringify({version:2,heartbeats:r})).length}function ET(r){if(r.length===0)return-1;let t=0,i=r[0].date;for(let a=1;a<r.length;a++)r[a].date<i&&(i=r[a].date,t=a);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(r){Ar(new Ts("platform-logger",t=>new Ib(t),"PRIVATE")),Ar(new Ts("heartbeat",t=>new _T(t),"PRIVATE")),Bi(ef,t_,r),Bi(ef,t_,"esm2017"),Bi("fire-js","")}ST("");var bT="firebase",TT="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bi(bT,TT,"app");const CT={apiKey:"AIzaSyATnw6uHbIvqMp8h6qmnONzs1CFYeUICdQ",authDomain:"urinals-4ee75.firebaseapp.com",databaseURL:"https://urinals-4ee75-default-rtdb.firebaseio.com",projectId:"urinals-4ee75",storageBucket:"urinals-4ee75.firebasestorage.app",messagingSenderId:"1038743764050",appId:"1:1038743764050:web:57702fdc7a6214b2f0738b",measurementId:"G-2TQQSCJZB5"};let sf;try{console.log("Client: Initializing Firebase..."),sf||(sf=gv(CT),console.log("Client: Firebase initialized successfully"))}catch(r){console.error("Client: Error initializing Firebase:",r)}const Ev=sf;function Rf(r,t){var i={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&t.indexOf(a)<0&&(i[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(r);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(r,a[o])&&(i[a[o]]=r[a[o]]);return i}function Sv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wT=Sv,bv=new sl("auth","Firebase",Sv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=new wf("@firebase/auth");function NT(r,...t){Bo.logLevel<=Ie.WARN&&Bo.warn(`Auth (${kr}): ${r}`,...t)}function Mo(r,...t){Bo.logLevel<=Ie.ERROR&&Bo.error(`Auth (${kr}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(r,...t){throw Of(r,...t)}function On(r,...t){return Of(r,...t)}function Tv(r,t,i){const a=Object.assign(Object.assign({},wT()),{[t]:i});return new sl("auth","Firebase",a).create(t,{appName:r.name})}function ii(r){return Tv(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Of(r,...t){if(typeof r!="string"){const i=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=r.name),r._errorFactory.create(i,...a)}return bv.create(r,...t)}function te(r,t,...i){if(!r)throw Of(t,...i)}function Jn(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Mo(t),new Error(t)}function ai(r,t){r||Jn(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function AT(){return a_()==="http:"||a_()==="https:"}function a_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AT()||JS()||"connection"in navigator)?navigator.onLine:!0}function OT(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(t,i){this.shortDelay=t,this.longDelay=i,ai(i>t,"Short delay should be less than long delay!"),this.isMobile=Tf()||fv()}get(){return RT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(r,t){ai(r.emulator,"Emulator should always be set here");const{url:i}=r.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{static initialize(t,i,a){this.fetchImpl=t,i&&(this.headersImpl=i),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=new rl(3e4,6e4);function Ki(r,t){return r.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:r.tenantId}):t}async function ci(r,t,i,a,o={}){return wv(r,o,async()=>{let u={},f={};a&&(t==="GET"?f=a:u={body:JSON.stringify(a)});const p=Ir(Object.assign({key:r.config.apiKey},f)).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const g=Object.assign({method:t,headers:m},u);return $S()||(g.referrerPolicy="no-referrer"),Cv.fetch()(Nv(r,r.config.apiHost,i,p),g)})}async function wv(r,t,i){r._canInitEmulator=!1;const a=Object.assign(Object.assign({},xT),t);try{const o=new IT(r),u=await Promise.race([i(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Oo(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const p=u.ok?f.errorMessage:f.error.message,[m,g]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oo(r,"credential-already-in-use",f);if(m==="EMAIL_EXISTS")throw Oo(r,"email-already-in-use",f);if(m==="USER_DISABLED")throw Oo(r,"user-disabled",f);const E=a[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Tv(r,E,g);En(r,E)}}catch(o){if(o instanceof Qi)throw o;En(r,"network-request-failed",{message:String(o)})}}async function al(r,t,i,a,o={}){const u=await ci(r,t,i,a,o);return"mfaPendingCredential"in u&&En(r,"multi-factor-auth-required",{_serverResponse:u}),u}function Nv(r,t,i,a){const o=`${t}${i}?${a}`;return r.config.emulator?xf(r.config,o):`${r.config.apiScheme}://${o}`}function MT(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,a)=>{this.timer=setTimeout(()=>a(On(this.auth,"network-request-failed")),DT.get())})}}function Oo(r,t,i){const a={appName:r.name};i.email&&(a.email=i.email),i.phoneNumber&&(a.phoneNumber=i.phoneNumber);const o=On(r,t,a);return o.customData._tokenResponse=i,o}function l_(r){return r!==void 0&&r.enterprise!==void 0}class kT{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===t)return MT(i.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function UT(r,t){return ci(r,"GET","/v2/recaptchaConfig",Ki(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LT(r,t){return ci(r,"POST","/v1/accounts:delete",t)}async function Av(r,t){return ci(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function jT(r,t=!1){const i=Nt(r),a=await i.getIdToken(t),o=Df(a);te(o&&o.exp&&o.auth_time&&o.iat,i.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:a,authTime:Ba(zh(o.auth_time)),issuedAtTime:Ba(zh(o.iat)),expirationTime:Ba(zh(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function zh(r){return Number(r)*1e3}function Df(r){const[t,i,a]=r.split(".");if(t===void 0||i===void 0||a===void 0)return Mo("JWT malformed, contained fewer than 3 sections"),null;try{const o=zo(i);return o?JSON.parse(o):(Mo("Failed to decode base64 JWT payload"),null)}catch(o){return Mo("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function o_(r){const t=Df(r);return te(t,"internal-error"),te(typeof t.exp<"u","internal-error"),te(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rr(r,t,i=!1){if(i)return t;try{return await t}catch(a){throw a instanceof Qi&&zT(a)&&r.auth.currentUser===r&&await r.auth.signOut(),a}}function zT({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var i;if(t){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const o=((i=this.user.stsTokenManager.expirationTime)!==null&&i!==void 0?i:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ba(this.lastLoginAt),this.creationTime=Ba(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(r){var t;const i=r.auth,a=await r.getIdToken(),o=await Rr(r,Av(i,{idToken:a}));te(o==null?void 0:o.users.length,i,"internal-error");const u=o.users[0];r._notifyReloadListener(u);const f=!((t=u.providerUserInfo)===null||t===void 0)&&t.length?Rv(u.providerUserInfo):[],p=BT(r.providerData,f),m=r.isAnonymous,g=!(r.email&&u.passwordHash)&&!(p!=null&&p.length),E=m?g:!1,b={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:p,metadata:new af(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(r,b)}async function PT(r){const t=Nt(r);await qo(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function BT(r,t){return[...r.filter(a=>!t.some(o=>o.providerId===a.providerId)),...t]}function Rv(r){return r.map(t=>{var{providerId:i}=t,a=Rf(t,["providerId"]);return{providerId:i,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qT(r,t){const i=await wv(r,{},async()=>{const a=Ir({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=Nv(r,o,"/v1/token",`key=${u}`),p=await r._getAdditionalHeaders();return p["Content-Type"]="application/x-www-form-urlencoded",Cv.fetch()(f,{method:"POST",headers:p,body:a})});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function GT(r,t){return ci(r,"POST","/v2/accounts:revokeToken",Ki(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){te(t.idToken,"internal-error"),te(typeof t.idToken<"u","internal-error"),te(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):o_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){te(t.length!==0,"internal-error");const i=o_(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:a,refreshToken:o,expiresIn:u}=await qT(t,i);this.updateTokensAndExpiration(a,o,Number(u))}updateTokensAndExpiration(t,i,a){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,i){const{refreshToken:a,accessToken:o,expirationTime:u}=i,f=new Sr;return a&&(te(typeof a=="string","internal-error",{appName:t}),f.refreshToken=a),o&&(te(typeof o=="string","internal-error",{appName:t}),f.accessToken=o),u&&(te(typeof u=="number","internal-error",{appName:t}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Sr,this.toJSON())}_performRefresh(){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(r,t){te(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class ei{constructor(t){var{uid:i,auth:a,stsTokenManager:o}=t,u=Rf(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=i,this.auth=a,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new af(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(t){const i=await Rr(this,this.stsTokenManager.getToken(this.auth,t));return te(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return jT(this,t)}reload(){return PT(this)}_assign(t){this!==t&&(te(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>Object.assign({},i)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new ei(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return i.metadata._copy(this.metadata),i}_onReload(t){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),i&&await qo(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cn(this.auth.app))return Promise.reject(ii(this.auth));const t=await this.getIdToken();return await Rr(this,LT(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){var a,o,u,f,p,m,g,E;const b=(a=i.displayName)!==null&&a!==void 0?a:void 0,N=(o=i.email)!==null&&o!==void 0?o:void 0,U=(u=i.phoneNumber)!==null&&u!==void 0?u:void 0,H=(f=i.photoURL)!==null&&f!==void 0?f:void 0,$=(p=i.tenantId)!==null&&p!==void 0?p:void 0,ue=(m=i._redirectEventId)!==null&&m!==void 0?m:void 0,Ae=(g=i.createdAt)!==null&&g!==void 0?g:void 0,Re=(E=i.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:Ee,emailVerified:it,isAnonymous:he,providerData:Oe,stsTokenManager:gt}=i;te(Ee&&gt,t,"internal-error");const St=Sr.fromJSON(this.name,gt);te(typeof Ee=="string",t,"internal-error"),Ii(b,t.name),Ii(N,t.name),te(typeof it=="boolean",t,"internal-error"),te(typeof he=="boolean",t,"internal-error"),Ii(U,t.name),Ii(H,t.name),Ii($,t.name),Ii(ue,t.name),Ii(Ae,t.name),Ii(Re,t.name);const B=new ei({uid:Ee,auth:t,email:N,emailVerified:it,displayName:b,isAnonymous:he,photoURL:H,phoneNumber:U,tenantId:$,stsTokenManager:St,createdAt:Ae,lastLoginAt:Re});return Oe&&Array.isArray(Oe)&&(B.providerData=Oe.map(ie=>Object.assign({},ie))),ue&&(B._redirectEventId=ue),B}static async _fromIdTokenResponse(t,i,a=!1){const o=new Sr;o.updateFromServerResponse(i);const u=new ei({uid:i.localId,auth:t,stsTokenManager:o,isAnonymous:a});return await qo(u),u}static async _fromGetAccountInfoResponse(t,i,a){const o=i.users[0];te(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Rv(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),p=new Sr;p.updateFromIdToken(a);const m=new ei({uid:o.localId,auth:t,stsTokenManager:p,isAnonymous:f}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new af(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=new Map;function ti(r){ai(r instanceof Function,"Expected a class definition");let t=c_.get(r);return t?(ai(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,c_.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}Ov.type="NONE";const u_=Ov;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(r,t,i){return`firebase:${r}:${t}:${i}`}class br{constructor(t,i,a){this.persistence=t,this.auth=i,this.userKey=a;const{config:o,name:u}=this.auth;this.fullUserKey=Io(this.userKey,o.apiKey,u),this.fullPersistenceKey=Io("persistence",o.apiKey,u),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?ei._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,a="authUser"){if(!i.length)return new br(ti(u_),t,a);const o=(await Promise.all(i.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||ti(u_);const f=Io(a,t.config.apiKey,t.name);let p=null;for(const g of i)try{const E=await g._get(f);if(E){const b=ei._fromJSON(t,E);g!==u&&(p=b),u=g;break}}catch{}const m=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!m.length?new br(u,t,a):(u=m[0],p&&await u._set(f,p.toJSON()),await Promise.all(i.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new br(u,t,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Iv(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(xv(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Uv(t))return"Blackberry";if(Lv(t))return"Webos";if(Dv(t))return"Safari";if((t.includes("chrome/")||Mv(t))&&!t.includes("edge/"))return"Chrome";if(kv(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=r.match(i);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function xv(r=kt()){return/firefox\//i.test(r)}function Dv(r=kt()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Mv(r=kt()){return/crios\//i.test(r)}function Iv(r=kt()){return/iemobile/i.test(r)}function kv(r=kt()){return/android/i.test(r)}function Uv(r=kt()){return/blackberry/i.test(r)}function Lv(r=kt()){return/webos/i.test(r)}function Mf(r=kt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function VT(r=kt()){var t;return Mf(r)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function YT(){return eb()&&document.documentMode===10}function jv(r=kt()){return Mf(r)||kv(r)||Lv(r)||Uv(r)||/windows phone/i.test(r)||Iv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(r,t=[]){let i;switch(r){case"Browser":i=h_(kt());break;case"Worker":i=`${h_(kt())}-${r}`;break;default:i=r}const a=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${kr}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const a=u=>new Promise((f,p)=>{try{const m=t(u);f(m)}catch(m){p(m)}});a.onAbort=i,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const a of this.queue)await a(t),a.onAbort&&i.push(a.onAbort)}catch(a){i.reverse();for(const o of i)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QT(r,t={}){return ci(r,"GET","/v2/passwordPolicy",Ki(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=6;class WT{constructor(t){var i,a,o,u;const f=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(i=f.minPasswordLength)!==null&&i!==void 0?i:KT,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(a=t.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=t.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var i,a,o,u,f,p;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,m),this.validatePasswordCharacterOptions(t,m),m.isValid&&(m.isValid=(i=m.meetsMinPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(a=m.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(u=m.containsUppercaseLetter)!==null&&u!==void 0?u:!0),m.isValid&&(m.isValid=(f=m.containsNumericCharacter)!==null&&f!==void 0?f:!0),m.isValid&&(m.isValid=(p=m.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),m}validatePasswordLengthOptions(t,i){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(i.meetsMinPasswordLength=t.length>=a),o&&(i.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let a;for(let o=0;o<t.length;o++)a=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(i,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,i,a,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(t,i,a,o){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f_(this),this.idTokenSubscription=new f_(this),this.beforeStateQueue=new FT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=ti(i)),this._initializationPromise=this.queue(async()=>{var a,o;if(!this._deleted&&(this.persistenceManager=await br.create(this,t),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await Av(this,{idToken:t}),a=await ei._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(a)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var i;if(cn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(p,p))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let o=a,u=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId,p=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(t);(!f||f===p)&&(m!=null&&m.user)&&(o=m.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await qo(t)}catch(i){if((i==null?void 0:i.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=OT()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(cn(this.app))return Promise.reject(ii(this));const i=t?Nt(t):null;return i&&te(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&te(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return cn(this.app)?Promise.reject(ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return cn(this.app)?Promise.reject(ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ti(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await QT(this),i=new WT(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new sl("auth","Firebase",t())}onAuthStateChanged(t,i,a){return this.registerStateListener(this.authStateSubscription,t,i,a)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,a){return this.registerStateListener(this.idTokenSubscription,t,i,a)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(a.tenantId=this.tenantId),await GT(this,a)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,i){const a=await this.getOrInitRedirectPersistenceManager(i);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&ti(t)||this._popupRedirectResolver;te(i,this,"argument-error"),this.redirectPersistenceManager=await br.create(this,[ti(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var i,a;return this._isInitialized&&await this.queue(async()=>{}),((i=this._currentUser)===null||i===void 0?void 0:i._redirectEventId)===t?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,i;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(i=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&i!==void 0?i:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,a,o){if(this._deleted)return()=>{};const u=typeof i=="function"?i:i.next.bind(i);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(p,this,"internal-error"),p.then(()=>{f||u(this.currentUser)}),typeof i=="function"){const m=t.addObserver(i,a,o);return()=>{f=!0,m()}}else{const m=t.addObserver(i);return()=>{f=!0,m()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=zv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const i={"X-Client-Version":this.clientVersion};this.app.options.appId&&(i["X-Firebase-gmpid"]=this.app.options.appId);const a=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());a&&(i["X-Firebase-Client"]=a);const o=await this._getAppCheckToken();return o&&(i["X-Firebase-AppCheck"]=o),i}async _getAppCheckToken(){var t;if(cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const i=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return i!=null&&i.error&&NT(`Error while retrieving App Check token: ${i.error}`),i==null?void 0:i.token}}function Os(r){return Nt(r)}class f_{constructor(t){this.auth=t,this.observer=null,this.addObserver=ub(i=>this.observer=i)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ac={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZT(r){ac=r}function Hv(r){return ac.loadJS(r)}function $T(){return ac.recaptchaEnterpriseScript}function JT(){return ac.gapiScript}function eC(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class tC{constructor(){this.enterprise=new nC}ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}class nC{ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}const iC="recaptcha-enterprise",Pv="NO_RECAPTCHA";class sC{constructor(t){this.type=iC,this.auth=Os(t)}async verify(t="verify",i=!1){async function a(u){if(!i){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,p)=>{UT(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const g=new kT(m);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,f(g.siteKey)}}).catch(m=>{p(m)})})}function o(u,f,p){const m=window.grecaptcha;l_(m)?m.enterprise.ready(()=>{m.enterprise.execute(u,{action:t}).then(g=>{f(g)}).catch(()=>{f(Pv)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tC().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{a(this.auth).then(p=>{if(!i&&l_(window.grecaptcha))o(p,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let m=$T();m.length!==0&&(m+=p),Hv(m).then(()=>{o(p,u,f)}).catch(g=>{f(g)})}}).catch(p=>{f(p)})})}}async function d_(r,t,i,a=!1,o=!1){const u=new sC(r);let f;if(o)f=Pv;else try{f=await u.verify(i)}catch{f=await u.verify(i,!0)}const p=Object.assign({},t);if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const m=p.phoneEnrollmentInfo.phoneNumber,g=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const m=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return a?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function lf(r,t,i,a,o){var u;if(!((u=r._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await d_(r,t,i,i==="getOobCode");return a(r,f)}else return a(r,t).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await d_(r,t,i,i==="getOobCode");return a(r,p)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(r,t){const i=Af(r,"auth");if(i.isInitialized()){const o=i.getImmediate(),u=i.getOptions();if(bs(u,t??{}))return o;En(o,"already-initialized")}return i.initialize({options:t})}function aC(r,t){const i=(t==null?void 0:t.persistence)||[],a=(Array.isArray(i)?i:[i]).map(ti);t!=null&&t.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(a,t==null?void 0:t.popupRedirectResolver)}function lC(r,t,i){const a=Os(r);te(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const o=!1,u=Bv(t),{host:f,port:p}=oC(t),m=p===null?"":`:${p}`,g={url:`${u}//${f}${m}/`},E=Object.freeze({host:f,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){te(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),te(bs(g,a.config.emulator)&&bs(E,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=g,a.emulatorConfig=E,a.settings.appVerificationDisabledForTesting=!0,cC()}function Bv(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function oC(r){const t=Bv(r),i=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!i)return{host:"",port:null};const a=i[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const u=o[1];return{host:u,port:p_(a.substr(u.length+1))}}else{const[u,f]=a.split(":");return{host:u,port:p_(f)}}}function p_(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function cC(){function r(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return Jn("not implemented")}_getIdTokenResponse(t){return Jn("not implemented")}_linkToIdToken(t,i){return Jn("not implemented")}_getReauthenticationResolver(t){return Jn("not implemented")}}async function uC(r,t){return ci(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hC(r,t){return al(r,"POST","/v1/accounts:signInWithPassword",Ki(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fC(r,t){return al(r,"POST","/v1/accounts:signInWithEmailLink",Ki(r,t))}async function dC(r,t){return al(r,"POST","/v1/accounts:signInWithEmailLink",Ki(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa extends If{constructor(t,i,a,o=null){super("password",a),this._email=t,this._password=i,this._tenantId=o}static _fromEmailAndPassword(t,i){return new Wa(t,i,"password")}static _fromEmailAndCode(t,i,a=null){return new Wa(t,i,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;if(i!=null&&i.email&&(i!=null&&i.password)){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lf(t,i,"signInWithPassword",hC);case"emailLink":return fC(t,{email:this._email,oobCode:this._password});default:En(t,"internal-error")}}async _linkToIdToken(t,i){switch(this.signInMethod){case"password":const a={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lf(t,a,"signUpPassword",uC);case"emailLink":return dC(t,{idToken:i,email:this._email,oobCode:this._password});default:En(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tr(r,t){return al(r,"POST","/v1/accounts:signInWithIdp",Ki(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="http://localhost";class Cs extends If{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new Cs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):En("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:o}=i,u=Rf(i,["providerId","signInMethod"]);if(!a||!o)return null;const f=new Cs(a,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(t){const i=this.buildRequest();return Tr(t,i)}_linkToIdToken(t,i){const a=this.buildRequest();return a.idToken=i,Tr(t,a)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,Tr(t,i)}buildRequest(){const t={requestUri:pC,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=Ir(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gC(r){const t=Ha(Pa(r)).link,i=t?Ha(Pa(t)).deep_link_id:null,a=Ha(Pa(r)).deep_link_id;return(a?Ha(Pa(a)).link:null)||a||i||t||r}class kf{constructor(t){var i,a,o,u,f,p;const m=Ha(Pa(t)),g=(i=m.apiKey)!==null&&i!==void 0?i:null,E=(a=m.oobCode)!==null&&a!==void 0?a:null,b=mC((o=m.mode)!==null&&o!==void 0?o:null);te(g&&E&&b,"argument-error"),this.apiKey=g,this.operation=b,this.code=E,this.continueUrl=(u=m.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(f=m.languageCode)!==null&&f!==void 0?f:null,this.tenantId=(p=m.tenantId)!==null&&p!==void 0?p:null}static parseLink(t){const i=gC(t);try{return new kf(i)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(){this.providerId=Ur.PROVIDER_ID}static credential(t,i){return Wa._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const a=kf.parseLink(i);return te(a,"argument-error"),Wa._fromEmailAndCode(t,a.code,a.tenantId)}}Ur.PROVIDER_ID="password";Ur.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ur.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll extends qv{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends ll{constructor(){super("facebook.com")}static credential(t){return Cs._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ui.credentialFromTaggedObject(t)}static credentialFromError(t){return Ui.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ui.credential(t.oauthAccessToken)}catch{return null}}}Ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends ll{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return Cs._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return Li.credentialFromTaggedObject(t)}static credentialFromError(t){return Li.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:a}=t;if(!i&&!a)return null;try{return Li.credential(i,a)}catch{return null}}}Li.GOOGLE_SIGN_IN_METHOD="google.com";Li.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends ll{constructor(){super("github.com")}static credential(t){return Cs._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ji.credentialFromTaggedObject(t)}static credentialFromError(t){return ji.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ji.credential(t.oauthAccessToken)}catch{return null}}}ji.GITHUB_SIGN_IN_METHOD="github.com";ji.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends ll{constructor(){super("twitter.com")}static credential(t,i){return Cs._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return zi.credentialFromTaggedObject(t)}static credentialFromError(t){return zi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:a}=t;if(!i||!a)return null;try{return zi.credential(i,a)}catch{return null}}}zi.TWITTER_SIGN_IN_METHOD="twitter.com";zi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _C(r,t){return al(r,"POST","/v1/accounts:signUp",Ki(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,a,o=!1){const u=await ei._fromIdTokenResponse(t,a,o),f=m_(a);return new ws({user:u,providerId:f,_tokenResponse:a,operationType:i})}static async _forOperation(t,i,a){await t._updateTokensIfNecessary(a,!0);const o=m_(a);return new ws({user:t,providerId:o,_tokenResponse:a,operationType:i})}}function m_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go extends Qi{constructor(t,i,a,o){var u;super(i.code,i.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,Go.prototype),this.customData={appName:t.name,tenantId:(u=t.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:i.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,i,a,o){return new Go(t,i,a,o)}}function Gv(r,t,i,a){return(t==="reauthenticate"?i._getReauthenticationResolver(r):i._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Go._fromErrorAndOperation(r,u,t,a):u})}async function vC(r,t,i=!1){const a=await Rr(r,t._linkToIdToken(r.auth,await r.getIdToken()),i);return ws._forOperation(r,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yC(r,t,i=!1){const{auth:a}=r;if(cn(a.app))return Promise.reject(ii(a));const o="reauthenticate";try{const u=await Rr(r,Gv(a,o,t,r),i);te(u.idToken,a,"internal-error");const f=Df(u.idToken);te(f,a,"internal-error");const{sub:p}=f;return te(r.uid===p,a,"user-mismatch"),ws._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&En(a,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vv(r,t,i=!1){if(cn(r.app))return Promise.reject(ii(r));const a="signIn",o=await Gv(r,a,t),u=await ws._fromIdTokenResponse(r,a,o);return i||await r._updateCurrentUser(u.user),u}async function EC(r,t){return Vv(Os(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yv(r){const t=Os(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function SC(r,t,i){if(cn(r.app))return Promise.reject(ii(r));const a=Os(r),f=await lf(a,{returnSecureToken:!0,email:t,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_C).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&Yv(r),m}),p=await ws._fromIdTokenResponse(a,"signIn",f);return await a._updateCurrentUser(p.user),p}function bC(r,t,i){return cn(r.app)?Promise.reject(ii(r)):EC(Nt(r),Ur.credential(t,i)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Yv(r),a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(r,t){return ci(r,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CC(r,{displayName:t,photoURL:i}){if(t===void 0&&i===void 0)return;const a=Nt(r),u={idToken:await a.getIdToken(),displayName:t,photoUrl:i,returnSecureToken:!0},f=await Rr(a,TC(a.auth,u));a.displayName=f.displayName||null,a.photoURL=f.photoUrl||null;const p=a.providerData.find(({providerId:m})=>m==="password");p&&(p.displayName=a.displayName,p.photoURL=a.photoURL),await a._updateTokensIfNecessary(f)}function wC(r,t,i,a){return Nt(r).onIdTokenChanged(t,i,a)}function NC(r,t,i){return Nt(r).beforeAuthStateChanged(t,i)}function AC(r,t,i,a){return Nt(r).onAuthStateChanged(t,i,a)}function RC(r){return Nt(r).signOut()}const Vo="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(Vo,"1"),this.storage.removeItem(Vo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=1e3,xC=10;class Qv extends Fv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jv(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const a=this.storage.getItem(i),o=this.localCache[i];a!==o&&t(i,o,a)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((f,p,m)=>{this.notifyListeners(f,m)});return}const a=t.key;i?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(a);!i&&this.localCache[a]===f||this.notifyListeners(a,f)},u=this.storage.getItem(a);YT()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,xC):o()}notifyListeners(t,i){this.localCache[t]=i;const a=this.listeners[t];if(a)for(const o of Array.from(a))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:a}),!0)})},OC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}Qv.type="LOCAL";const DC=Qv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv extends Fv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}Kv.type="SESSION";const Wv=Kv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(o=>o.isListeningto(t));if(i)return i;const a=new lc(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:a,eventType:o,data:u}=i.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;i.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const p=Array.from(f).map(async g=>g(i.origin,u)),m=await MC(p);i.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:m})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(r="",t=10){let i="";for(let a=0;a<t;a++)i+=Math.floor(Math.random()*10);return r+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((p,m)=>{const g=Uf("",20);o.port1.start();const E=setTimeout(()=>{m(new Error("unsupported_event"))},a);f={messageChannel:o,onMessage(b){const N=b;if(N.data.eventId===g)switch(N.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(N.data.response);break;default:clearTimeout(E),clearTimeout(u),m(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:g,data:i},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return window}function kC(r){xn().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(){return typeof xn().WorkerGlobalScope<"u"&&typeof xn().importScripts=="function"}async function UC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LC(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function jC(){return Xv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="firebaseLocalStorageDb",zC=1,Yo="firebaseLocalStorage",$v="fbase_key";class ol{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function oc(r,t){return r.transaction([Yo],t?"readwrite":"readonly").objectStore(Yo)}function HC(){const r=indexedDB.deleteDatabase(Zv);return new ol(r).toPromise()}function of(){const r=indexedDB.open(Zv,zC);return new Promise((t,i)=>{r.addEventListener("error",()=>{i(r.error)}),r.addEventListener("upgradeneeded",()=>{const a=r.result;try{a.createObjectStore(Yo,{keyPath:$v})}catch(o){i(o)}}),r.addEventListener("success",async()=>{const a=r.result;a.objectStoreNames.contains(Yo)?t(a):(a.close(),await HC(),t(await of()))})})}async function g_(r,t,i){const a=oc(r,!0).put({[$v]:t,value:i});return new ol(a).toPromise()}async function PC(r,t){const i=oc(r,!1).get(t),a=await new ol(i).toPromise();return a===void 0?null:a.value}function __(r,t){const i=oc(r,!0).delete(t);return new ol(i).toPromise()}const BC=800,qC=3;class Jv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await of(),this.db)}async _withRetries(t){let i=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(i++>qC)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lc._getInstance(jC()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await UC(),!this.activeServiceWorker)return;this.sender=new IC(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((t=a[0])===null||t===void 0)&&t.fulfilled&&!((i=a[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||LC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await of();return await g_(t,Vo,"1"),await __(t,Vo),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(a=>g_(a,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(a=>PC(a,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>__(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=oc(o,!1).getAll();return new ol(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],a=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),i.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),i.push(o));return i}notifyListeners(t,i){this.localCache[t]=i;const a=this.listeners[t];if(a)for(const o of Array.from(a))o(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Jv.type="LOCAL";const GC=Jv;new rl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(r,t){return t?ti(t):(te(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf extends If{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Tr(t,this._buildIdpRequest())}_linkToIdToken(t,i){return Tr(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return Tr(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function YC(r){return Vv(r.auth,new Lf(r),r.bypassAuthState)}function FC(r){const{auth:t,user:i}=r;return te(i,t,"internal-error"),yC(i,new Lf(r),r.bypassAuthState)}async function QC(r){const{auth:t,user:i}=r;return te(i,t,"internal-error"),vC(i,new Lf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(t,i,a,o,u=!1){this.auth=t,this.resolver=a,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:a,postBody:o,tenantId:u,error:f,type:p}=t;if(f){this.reject(f);return}const m={auth:this.auth,requestUri:i,sessionId:a,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return YC;case"linkViaPopup":case"linkViaRedirect":return QC;case"reauthViaPopup":case"reauthViaRedirect":return FC;default:En(this.auth,"internal-error")}}resolve(t){ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=new rl(2e3,1e4);class yr extends ey{constructor(t,i,a,o,u){super(t,i,o,u),this.provider=a,this.authWindow=null,this.pollId=null,yr.currentPopupAction&&yr.currentPopupAction.cancel(),yr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return te(t,this.auth,"internal-error"),t}async onExecution(){ai(this.filter.length===1,"Popup operations only handle one event");const t=Uf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(On(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(On(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yr.currentPopupAction=null}pollUserCancellation(){const t=()=>{var i,a;if(!((a=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(On(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,KC.get())};t()}}yr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="pendingRedirect",ko=new Map;class XC extends ey{constructor(t,i,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,a),this.eventId=null}async execute(){let t=ko.get(this.auth._key());if(!t){try{const a=await ZC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(i){t=()=>Promise.reject(i)}ko.set(this.auth._key(),t)}return this.bypassAuthState||ko.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZC(r,t){const i=ew(t),a=JC(r);if(!await a._isAvailable())return!1;const o=await a._get(i)==="true";return await a._remove(i),o}function $C(r,t){ko.set(r._key(),t)}function JC(r){return ti(r._redirectPersistence)}function ew(r){return Io(WC,r.config.apiKey,r.name)}async function tw(r,t,i=!1){if(cn(r.app))return Promise.reject(ii(r));const a=Os(r),o=VC(a,t),f=await new XC(a,o,i).execute();return f&&!i&&(delete f.user._redirectEventId,await a._persistUserIfCurrent(f.user),await a._setRedirectUser(null,t)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=10*60*1e3;class iw{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(i=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!sw(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){var a;if(t.error&&!ty(t)){const o=((a=t.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";i.onError(On(this.auth,o))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const a=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=nw&&this.cachedEventUids.clear(),this.cachedEventUids.has(v_(t))}saveEventToCache(t){this.cachedEventUids.add(v_(t)),this.lastProcessedEventTime=Date.now()}}function v_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function ty({type:r,error:t}){return r==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function sw(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ty(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rw(r,t={}){return ci(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lw=/^https?/;async function ow(r){if(r.config.emulator)return;const{authorizedDomains:t}=await rw(r);for(const i of t)try{if(cw(i))return}catch{}En(r,"unauthorized-domain")}function cw(r){const t=rf(),{protocol:i,hostname:a}=new URL(t);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&a===""?i==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&f.hostname===a}if(!lw.test(i))return!1;if(aw.test(r))return a===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=new rl(3e4,6e4);function y_(){const r=xn().___jsl;if(r!=null&&r.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let i=0;i<r.CP.length;i++)r.CP[i]=null}}function hw(r){return new Promise((t,i)=>{var a,o,u;function f(){y_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{y_(),i(On(r,"network-request-failed"))},timeout:uw.get()})}if(!((o=(a=xn().gapi)===null||a===void 0?void 0:a.iframes)===null||o===void 0)&&o.Iframe)t(gapi.iframes.getContext());else if(!((u=xn().gapi)===null||u===void 0)&&u.load)f();else{const p=eC("iframefcb");return xn()[p]=()=>{gapi.load?f():i(On(r,"network-request-failed"))},Hv(`${JT()}?onload=${p}`).catch(m=>i(m))}}).catch(t=>{throw Uo=null,t})}let Uo=null;function fw(r){return Uo=Uo||hw(r),Uo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw=new rl(5e3,15e3),pw="__/auth/iframe",mw="emulator/auth/iframe",gw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_w=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vw(r){const t=r.config;te(t.authDomain,r,"auth-domain-config-required");const i=t.emulator?xf(t,mw):`https://${r.config.authDomain}/${pw}`,a={apiKey:t.apiKey,appName:r.name,v:kr},o=_w.get(r.config.apiHost);o&&(a.eid=o);const u=r._getFrameworks();return u.length&&(a.fw=u.join(",")),`${i}?${Ir(a).slice(1)}`}async function yw(r){const t=await fw(r),i=xn().gapi;return te(i,r,"internal-error"),t.open({where:document.body,url:vw(r),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gw,dontclear:!0},a=>new Promise(async(o,u)=>{await a.restyle({setHideOnLeave:!1});const f=On(r,"network-request-failed"),p=xn().setTimeout(()=>{u(f)},dw.get());function m(){xn().clearTimeout(p),o(a)}a.ping(m).then(m,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Sw=500,bw=600,Tw="_blank",Cw="http://localhost";class E_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ww(r,t,i,a=Sw,o=bw){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-a)/2,0).toString();let p="";const m=Object.assign(Object.assign({},Ew),{width:a.toString(),height:o.toString(),top:u,left:f}),g=kt().toLowerCase();i&&(p=Mv(g)?Tw:i),xv(g)&&(t=t||Cw,m.scrollbars="yes");const E=Object.entries(m).reduce((N,[U,H])=>`${N}${U}=${H},`,"");if(VT(g)&&p!=="_self")return Nw(t||"",p),new E_(null);const b=window.open(t||"",p,E);te(b,r,"popup-blocked");try{b.focus()}catch{}return new E_(b)}function Nw(r,t){const i=document.createElement("a");i.href=r,i.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="__/auth/handler",Rw="emulator/auth/handler",Ow=encodeURIComponent("fac");async function S_(r,t,i,a,o,u){te(r.config.authDomain,r,"auth-domain-config-required"),te(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:i,redirectUrl:a,v:kr,eventId:o};if(t instanceof qv){t.setDefaultLanguage(r.languageCode),f.providerId=t.providerId||"",Zh(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[E,b]of Object.entries({}))f[E]=b}if(t instanceof ll){const E=t.getScopes().filter(b=>b!=="");E.length>0&&(f.scopes=E.join(","))}r.tenantId&&(f.tid=r.tenantId);const p=f;for(const E of Object.keys(p))p[E]===void 0&&delete p[E];const m=await r._getAppCheckToken(),g=m?`#${Ow}=${encodeURIComponent(m)}`:"";return`${xw(r)}?${Ir(p).slice(1)}${g}`}function xw({config:r}){return r.emulator?xf(r,Rw):`https://${r.authDomain}/${Aw}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="webStorageSupport";class Dw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wv,this._completeRedirectFn=tw,this._overrideRedirectResult=$C}async _openPopup(t,i,a,o){var u;ai((u=this.eventManagers[t._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await S_(t,i,a,rf(),o);return ww(t,f,Uf())}async _openRedirect(t,i,a,o){await this._originValidation(t);const u=await S_(t,i,a,rf(),o);return kC(u),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:o,promise:u}=this.eventManagers[i];return o?Promise.resolve(o):(ai(u,"If manager is not set, promise should be"),u)}const a=this.initAndGetManager(t);return this.eventManagers[i]={promise:a},a.catch(()=>{delete this.eventManagers[i]}),a}async initAndGetManager(t){const i=await yw(t),a=new iw(t);return i.register("authEvent",o=>(te(o==null?void 0:o.authEvent,t,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=i,a}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(Hh,{type:Hh},o=>{var u;const f=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Hh];f!==void 0&&i(!!f),En(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=ow(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return jv()||Dv()||Mf()}}const Mw=Dw;var b_="@firebase/auth",T_="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(a=>{t((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Uw(r){Ar(new Ts("auth",(t,{options:i})=>{const a=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=a.options;te(f&&!f.includes(":"),"invalid-api-key",{appName:a.name});const m={apiKey:f,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zv(r)},g=new XT(a,o,u,m);return aC(g,i),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,a)=>{t.getProvider("auth-internal").initialize()})),Ar(new Ts("auth-internal",t=>{const i=Os(t.getProvider("auth").getImmediate());return(a=>new Iw(a))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bi(b_,T_,kw(r)),Bi(b_,T_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=5*60,jw=hv("authIdTokenMaxAge")||Lw;let C_=null;const zw=r=>async t=>{const i=t&&await t.getIdTokenResult(),a=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(a&&a>jw)return;const o=i==null?void 0:i.token;C_!==o&&(C_=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Hw(r=_v()){const t=Af(r,"auth");if(t.isInitialized())return t.getImmediate();const i=rC(r,{popupRedirectResolver:Mw,persistence:[GC,DC,Wv]}),a=hv("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(a,location.origin);if(location.origin===u.origin){const f=zw(u.toString());NC(i,f,()=>f(i.currentUser)),wC(i,p=>f(p))}}const o=cv("auth");return o&&lC(i,`http://${o}`),i}function Pw(){var r,t;return(t=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&t!==void 0?t:document}ZT({loadJS(r){return new Promise((t,i)=>{const a=document.createElement("script");a.setAttribute("src",r),a.onload=t,a.onerror=o=>{const u=On("internal-error");u.customData=o,i(u)},a.type="text/javascript",a.charset="UTF-8",Pw().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Uw("Browser");var w_={};const N_="@firebase/database",A_="1.0.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ny="";function Bw(r){ny=r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,i){i==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),lt(i))}get(t){const i=this.domStorage_.getItem(this.prefixedName_(t));return i==null?null:Qa(i)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,i){i==null?delete this.cache_[t]:this.cache_[t]=i}get(t){return oi(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const t=window[r];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new qw(t)}}catch{}return new Gw},Es=iy("localStorage"),Vw=iy("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr=new wf("@firebase/database"),Yw=function(){let r=1;return function(){return r++}}(),sy=function(r){const t=db(r),i=new cb;i.update(t);const a=i.digest();return Sf.encodeByteArray(a)},cl=function(...r){let t="";for(let i=0;i<r.length;i++){const a=r[i];Array.isArray(a)||a&&typeof a=="object"&&typeof a.length=="number"?t+=cl.apply(null,a):typeof a=="object"?t+=lt(a):t+=a,t+=" "}return t};let qa=null,R_=!0;const Fw=function(r,t){j(!0,"Can't turn on custom loggers persistently."),Cr.logLevel=Ie.VERBOSE,qa=Cr.log.bind(Cr)},wt=function(...r){if(R_===!0&&(R_=!1,qa===null&&Vw.get("logging_enabled")===!0&&Fw()),qa){const t=cl.apply(null,r);qa(t)}},ul=function(r){return function(...t){wt(r,...t)}},cf=function(...r){const t="FIREBASE INTERNAL ERROR: "+cl(...r);Cr.error(t)},li=function(...r){const t=`FIREBASE FATAL ERROR: ${cl(...r)}`;throw Cr.error(t),new Error(t)},Ht=function(...r){const t="FIREBASE WARNING: "+cl(...r);Cr.warn(t)},Qw=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ht("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ry=function(r){return typeof r=="number"&&(r!==r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},Kw=function(r){if(document.readyState==="complete")r();else{let t=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}t||(t=!0,r())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},Or="[MIN_NAME]",Ns="[MAX_NAME]",Lr=function(r,t){if(r===t)return 0;if(r===Or||t===Ns)return-1;if(t===Or||r===Ns)return 1;{const i=O_(r),a=O_(t);return i!==null?a!==null?i-a===0?r.length-t.length:i-a:-1:a!==null?1:r<t?-1:1}},Ww=function(r,t){return r===t?0:r<t?-1:1},Ua=function(r,t){if(t&&r in t)return t[r];throw new Error("Missing required key ("+r+") in object: "+lt(t))},jf=function(r){if(typeof r!="object"||r===null)return lt(r);const t=[];for(const a in r)t.push(a);t.sort();let i="{";for(let a=0;a<t.length;a++)a!==0&&(i+=","),i+=lt(t[a]),i+=":",i+=jf(r[t[a]]);return i+="}",i},ay=function(r,t){const i=r.length;if(i<=t)return[r];const a=[];for(let o=0;o<i;o+=t)o+t>i?a.push(r.substring(o,i)):a.push(r.substring(o,o+t));return a};function Pt(r,t){for(const i in r)r.hasOwnProperty(i)&&t(i,r[i])}const ly=function(r){j(!ry(r),"Invalid JSON number");const t=11,i=52,a=(1<<t-1)-1;let o,u,f,p,m;r===0?(u=0,f=0,o=1/r===-1/0?1:0):(o=r<0,r=Math.abs(r),r>=Math.pow(2,1-a)?(p=Math.min(Math.floor(Math.log(r)/Math.LN2),a),u=p+a,f=Math.round(r*Math.pow(2,i-p)-Math.pow(2,i))):(u=0,f=Math.round(r/Math.pow(2,1-a-i))));const g=[];for(m=i;m;m-=1)g.push(f%2?1:0),f=Math.floor(f/2);for(m=t;m;m-=1)g.push(u%2?1:0),u=Math.floor(u/2);g.push(o?1:0),g.reverse();const E=g.join("");let b="";for(m=0;m<64;m+=8){let N=parseInt(E.substr(m,8),2).toString(16);N.length===1&&(N="0"+N),b=b+N}return b.toLowerCase()},Xw=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Zw=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function $w(r,t){let i="Unknown Error";r==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":r==="permission_denied"?i="Client doesn't have permission to access the desired data.":r==="unavailable"&&(i="The service is unavailable");const a=new Error(r+" at "+t._path.toString()+": "+i);return a.code=r.toUpperCase(),a}const Jw=new RegExp("^-?(0*)\\d{1,10}$"),e1=-2147483648,t1=2147483647,O_=function(r){if(Jw.test(r)){const t=Number(r);if(t>=e1&&t<=t1)return t}return null},jr=function(r){try{r()}catch(t){setTimeout(()=>{const i=t.stack||"";throw Ht("Exception was thrown by user callback.",i),t},Math.floor(0))}},n1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ga=function(r,t){const i=setTimeout(r,t);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(t,i){this.appCheckProvider=i,this.appName=t.name,cn(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=i==null?void 0:i.getImmediate({optional:!0}),this.appCheck||i==null||i.get().then(a=>this.appCheck=a)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((i,a)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(i,a):i(null)},0)})}addTokenChangeListener(t){var i;(i=this.appCheckProvider)===null||i===void 0||i.get().then(a=>a.addTokenListener(t))}notifyForInvalidToken(){Ht(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(t,i,a){this.appName_=t,this.firebaseOptions_=i,this.authProvider_=a,this.auth_=null,this.auth_=a.getImmediate({optional:!0}),this.auth_||a.onInit(o=>this.auth_=o)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(i=>i&&i.code==="auth/token-not-initialized"?(wt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,a)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(i,a):i(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(i=>i.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(i=>i.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ht(t)}}class Lo{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Lo.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="5",oy="v",cy="s",uy="r",hy="f",fy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,dy="ls",py="p",uf="ac",my="websocket",gy="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(t,i,a,o,u=!1,f="",p=!1,m=!1,g=null){this.secure=i,this.namespace=a,this.webSocketOnly=o,this.nodeAdmin=u,this.persistenceKey=f,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=m,this.emulatorOptions=g,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Es.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Es.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${i}`}}function r1(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams}function vy(r,t,i){j(typeof t=="string","typeof type must == string"),j(typeof i=="object","typeof params must == object");let a;if(t===my)a=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else if(t===gy)a=(r.secure?"https://":"http://")+r.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);r1(r)&&(i.ns=r.namespace);const o=[];return Pt(i,(u,f)=>{o.push(u+"="+f)}),a+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(){this.counters_={}}incrementCounter(t,i=1){oi(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=i}get(){return VS(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph={},Bh={};function Hf(r){const t=r.toString();return Ph[t]||(Ph[t]=new a1),Ph[t]}function l1(r,t){const i=r.toString();return Bh[i]||(Bh[i]=t()),Bh[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,i){this.closeAfterResponse=t,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,i){for(this.pendingResponses[t]=i;this.pendingResponses[this.currentResponseNum];){const a=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<a.length;++o)a[o]&&jr(()=>{this.onMessage_(a[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="start",c1="close",u1="pLPCommand",h1="pRTLPCB",yy="id",Ey="pw",Sy="ser",f1="cb",d1="seg",p1="ts",m1="d",g1="dframe",by=1870,Ty=30,_1=by-Ty,v1=25e3,y1=3e4;class Er{constructor(t,i,a,o,u,f,p){this.connId=t,this.repoInfo=i,this.applicationId=a,this.appCheckToken=o,this.authToken=u,this.transportSessionId=f,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ul(t),this.stats_=Hf(i),this.urlFn=m=>(this.appCheckToken&&(m[uf]=this.appCheckToken),vy(i,gy,m))}open(t,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new o1(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(y1)),Kw(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Pf((...u)=>{const[f,p,m,g,E]=u;if(this.incrementIncomingBytes_(u),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,f===x_)this.id=p,this.password=m;else if(f===c1)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+f)},(...u)=>{const[f,p]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(f,p)},()=>{this.onClosed_()},this.urlFn);const a={};a[x_]="t",a[Sy]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(a[f1]=this.scriptTagHolder.uniqueCallbackIdentifier),a[oy]=zf,this.transportSessionId&&(a[cy]=this.transportSessionId),this.lastSessionId&&(a[dy]=this.lastSessionId),this.applicationId&&(a[py]=this.applicationId),this.appCheckToken&&(a[uf]=this.appCheckToken),typeof location<"u"&&location.hostname&&fy.test(location.hostname)&&(a[uy]=hy);const o=this.urlFn(a);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Er.forceAllow_=!0}static forceDisallow(){Er.forceDisallow_=!0}static isAvailable(){return Er.forceAllow_?!0:!Er.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Xw()&&!Zw()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const i=lt(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const a=lv(i),o=ay(a,_1);for(let u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}addDisconnectPingFrame(t,i){this.myDisconnFrame=document.createElement("iframe");const a={};a[g1]="t",a[yy]=t,a[Ey]=i,this.myDisconnFrame.src=this.urlFn(a),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const i=lt(t).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class Pf{constructor(t,i,a,o){this.onDisconnect=a,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Yw(),window[u1+this.uniqueCallbackIdentifier]=t,window[h1+this.uniqueCallbackIdentifier]=i,this.myIFrame=Pf.createIFrame_();let u="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(u='<script>document.domain="'+document.domain+'";<\/script>');const f="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(f),this.myIFrame.doc.close()}catch(p){wt("frame writing exception"),p.stack&&wt(p.stack),wt(p)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||wt("No IE domain setting required")}catch{const a=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+a+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,i){for(this.myID=t,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[yy]=this.myID,t[Ey]=this.myPW,t[Sy]=this.currentSerial;let i=this.urlFn(t),a="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Ty+a.length<=by;){const f=this.pendingSegs.shift();a=a+"&"+d1+o+"="+f.seg+"&"+p1+o+"="+f.ts+"&"+m1+o+"="+f.d,o++}return i=i+a,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(t,i,a){this.pendingSegs.push({seg:t,ts:i,d:a}),this.alive&&this.newRequest_()}addLongPollTag_(t,i){this.outstandingRequests.add(i);const a=()=>{this.outstandingRequests.delete(i),this.newRequest_()},o=setTimeout(a,Math.floor(v1)),u=()=>{clearTimeout(o),a()};this.addTag(t,u)}addTag(t,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const a=this.myIFrame.doc.createElement("script");a.type="text/javascript",a.async=!0,a.src=t,a.onload=a.onreadystatechange=function(){const o=a.readyState;(!o||o==="loaded"||o==="complete")&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),i())},a.onerror=()=>{wt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(a)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=16384,S1=45e3;let Fo=null;typeof MozWebSocket<"u"?Fo=MozWebSocket:typeof WebSocket<"u"&&(Fo=WebSocket);class gn{constructor(t,i,a,o,u,f,p){this.connId=t,this.applicationId=a,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ul(this.connId),this.stats_=Hf(i),this.connURL=gn.connectionURL_(i,f,p,o,a),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,a,o,u){const f={};return f[oy]=zf,typeof location<"u"&&location.hostname&&fy.test(location.hostname)&&(f[uy]=hy),i&&(f[cy]=i),a&&(f[dy]=a),o&&(f[uf]=o),u&&(f[py]=u),vy(t,my,f)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Es.set("previous_websocket_failure",!0);try{let a;tb(),this.mySock=new Fo(this.connURL,[],a)}catch(a){this.log_("Error instantiating WebSocket.");const o=a.message||a.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=a=>{this.handleIncomingFrame(a)},this.mySock.onerror=a=>{this.log_("WebSocket error.  Closing connection.");const o=a.message||a.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){gn.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,a=navigator.userAgent.match(i);a&&a.length>1&&parseFloat(a[1])<4.4&&(t=!0)}return!t&&Fo!==null&&!gn.forceDisallow_}static previouslyFailed(){return Es.isInMemoryStorage||Es.get("previous_websocket_failure")===!0}markConnectionHealthy(){Es.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const a=Qa(i);this.onMessage(a)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(j(this.frames===null,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const a=this.extractFrameCount_(i);a!==null&&this.appendFrame_(a)}}send(t){this.resetKeepAlive();const i=lt(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const a=ay(i,E1);a.length>1&&this.sendString_(String(a.length));for(let o=0;o<a.length;o++)this.sendString_(a[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(S1))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}gn.responsesRequiredToBeHealthy=2;gn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{static get ALL_TRANSPORTS(){return[Er,gn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const i=gn&&gn.isAvailable();let a=i&&!gn.previouslyFailed();if(t.webSocketOnly&&(i||Ht("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[gn];else{const o=this.transports_=[];for(const u of Xa.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u);Xa.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Xa.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=6e4,T1=5e3,C1=10*1024,w1=100*1024,qh="t",D_="d",N1="s",M_="r",A1="e",I_="o",k_="a",U_="n",L_="p",R1="h";class O1{constructor(t,i,a,o,u,f,p,m,g,E){this.id=t,this.repoInfo_=i,this.applicationId_=a,this.appCheckToken_=o,this.authToken_=u,this.onMessage_=f,this.onReady_=p,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ul("c:"+this.id+":"),this.transportManager_=new Xa(i),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),a=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,a)},Math.floor(0));const o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=Ga(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>w1?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>C1?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return i=>{t===this.conn_?this.onConnectionLost_(i):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return i=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(i):t===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(t){const i={t:"d",d:t};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(qh in t){const i=t[qh];i===k_?this.upgradeIfSecondaryHealthy_():i===M_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===I_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const i=Ua("t",t),a=Ua("d",t);if(i==="c")this.onSecondaryControl_(a);else if(i==="d")this.pendingDataMessages.push(a);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:L_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:k_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:U_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const i=Ua("t",t),a=Ua("d",t);i==="c"?this.onControl_(a):i==="d"&&this.onDataMessage_(a)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const i=Ua(qh,t);if(D_ in t){const a=t[D_];if(i===R1){const o=Object.assign({},a);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(i===U_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===N1?this.onConnectionShutdown_(a):i===M_?this.onReset_(a):i===A1?cf("Server Error: "+a):i===I_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):cf("Unknown control packet command: "+i)}}onHandshake_(t){const i=t.ts,a=t.v,o=t.h;this.sessionId=t.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),zf!==a&&Ht("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),a=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,a),Ga(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(b1))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,i){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ga(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(T1))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:L_,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Es.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{put(t,i,a,o){}merge(t,i,a,o){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,i,a){}onDisconnectMerge(t,i,a){}onDisconnectCancel(t,i){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(t){this.allowedEvents_=t,this.listeners_={},j(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...i){if(Array.isArray(this.listeners_[t])){const a=[...this.listeners_[t]];for(let o=0;o<a.length;o++)a[o].callback.apply(a[o].context,i)}}on(t,i,a){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:i,context:a});const o=this.getInitialEvent(t);o&&i.apply(a,o)}off(t,i,a){this.validateEventType_(t);const o=this.listeners_[t]||[];for(let u=0;u<o.length;u++)if(o[u].callback===i&&(!a||a===o[u].context)){o.splice(u,1);return}}validateEventType_(t){j(this.allowedEvents_.find(i=>i===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo extends wy{static getInstance(){return new Qo}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Tf()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return j(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=32,z_=768;class Le{constructor(t,i){if(i===void 0){this.pieces_=t.split("/");let a=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[a]=this.pieces_[o],a++);this.pieces_.length=a,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=i}toString(){let t="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(t+="/"+this.pieces_[i]);return t||"/"}}function we(){return new Le("")}function _e(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function Vi(r){return r.pieces_.length-r.pieceNum_}function He(r){let t=r.pieceNum_;return t<r.pieces_.length&&t++,new Le(r.pieces_,t)}function Ny(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function x1(r){let t="";for(let i=r.pieceNum_;i<r.pieces_.length;i++)r.pieces_[i]!==""&&(t+="/"+encodeURIComponent(String(r.pieces_[i])));return t||"/"}function Ay(r,t=0){return r.pieces_.slice(r.pieceNum_+t)}function Ry(r){if(r.pieceNum_>=r.pieces_.length)return null;const t=[];for(let i=r.pieceNum_;i<r.pieces_.length-1;i++)t.push(r.pieces_[i]);return new Le(t,0)}function ot(r,t){const i=[];for(let a=r.pieceNum_;a<r.pieces_.length;a++)i.push(r.pieces_[a]);if(t instanceof Le)for(let a=t.pieceNum_;a<t.pieces_.length;a++)i.push(t.pieces_[a]);else{const a=t.split("/");for(let o=0;o<a.length;o++)a[o].length>0&&i.push(a[o])}return new Le(i,0)}function ge(r){return r.pieceNum_>=r.pieces_.length}function It(r,t){const i=_e(r),a=_e(t);if(i===null)return t;if(i===a)return It(He(r),He(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+r+")")}function Oy(r,t){if(Vi(r)!==Vi(t))return!1;for(let i=r.pieceNum_,a=t.pieceNum_;i<=r.pieces_.length;i++,a++)if(r.pieces_[i]!==t.pieces_[a])return!1;return!0}function _n(r,t){let i=r.pieceNum_,a=t.pieceNum_;if(Vi(r)>Vi(t))return!1;for(;i<r.pieces_.length;){if(r.pieces_[i]!==t.pieces_[a])return!1;++i,++a}return!0}class D1{constructor(t,i){this.errorPrefix_=i,this.parts_=Ay(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let a=0;a<this.parts_.length;a++)this.byteLength_+=rc(this.parts_[a]);xy(this)}}function M1(r,t){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(t),r.byteLength_+=rc(t),xy(r)}function I1(r){const t=r.parts_.pop();r.byteLength_-=rc(t),r.parts_.length>0&&(r.byteLength_-=1)}function xy(r){if(r.byteLength_>z_)throw new Error(r.errorPrefix_+"has a key path longer than "+z_+" bytes ("+r.byteLength_+").");if(r.parts_.length>j_)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+j_+") or object contains a cycle "+ys(r))}function ys(r){return r.parts_.length===0?"":"in property '"+r.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf extends wy{static getInstance(){return new Bf}constructor(){super(["visible"]);let t,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const a=!document[t];a!==this.visible_&&(this.visible_=a,this.trigger("visible",a))},!1)}getInitialEvent(t){return j(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=1e3,k1=60*5*1e3,H_=30*1e3,U1=1.3,L1=3e4,j1="server_kill",P_=3;class si extends Cy{constructor(t,i,a,o,u,f,p,m){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=a,this.onConnectStatus_=o,this.onServerInfoUpdate_=u,this.authTokenProvider_=f,this.appCheckTokenProvider_=p,this.authOverride_=m,this.id=si.nextPersistentConnectionId_++,this.log_=ul("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=La,this.maxReconnectDelay_=k1,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Bf.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Qo.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,a){const o=++this.requestNumber_,u={r:o,a:t,b:i};this.log_(lt(u)),j(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),a&&(this.requestCBHash_[o]=a)}get(t){this.initConnection_();const i=new sc,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const p=f.d;f.s==="ok"?i.resolve(p):i.reject(p)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(u),i.promise}listen(t,i,a,o){this.initConnection_();const u=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+u),this.listens.has(f)||this.listens.set(f,new Map),j(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),j(!this.listens.get(f).has(u),"listen() called twice for same path/queryId.");const p={onComplete:o,hashFn:i,query:t,tag:a};this.listens.get(f).set(u,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,a=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(a)})}sendListen_(t){const i=t.query,a=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+a+" for "+o);const u={p:a},f="q";t.tag&&(u.q=i._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest(f,u,p=>{const m=p.d,g=p.s;si.warnOnListenWarnings_(m,i),(this.listens.get(a)&&this.listens.get(a).get(o))===t&&(this.log_("listen response",p),g!=="ok"&&this.removeListen_(a,o),t.onComplete&&t.onComplete(g,m))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&oi(t,"w")){const a=Nr(t,"w");if(Array.isArray(a)&&~a.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',u=i._path.toString();Ht(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||ob(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=H_)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=lb(t)?"auth":"gauth",a={cred:t};this.authOverride_===null?a.noauth=!0:typeof this.authOverride_=="object"&&(a.authvar=this.authOverride_),this.sendRequest(i,a,o=>{const u=o.s,f=o.d||"error";this.authToken_===t&&(u==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,a=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,a)})}unlisten(t,i){const a=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+a+" "+o),j(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(a,o)&&this.connected_&&this.sendUnlisten_(a,o,t._queryObject,i)}sendUnlisten_(t,i,a,o){this.log_("Unlisten on "+t+" for "+i);const u={p:t},f="n";o&&(u.q=a,u.t=o),this.sendRequest(f,u)}onDisconnectPut(t,i,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,a):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:a})}onDisconnectMerge(t,i,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,a):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:a})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,a,o){const u={p:i,d:a};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,f=>{o&&setTimeout(()=>{o(f.s,f.d)},Math.floor(0))})}put(t,i,a,o){this.putInternal("p",t,i,a,o)}merge(t,i,a,o){this.putInternal("m",t,i,a,o)}putInternal(t,i,a,o,u){this.initConnection_();const f={p:i,d:a};u!==void 0&&(f.h=u),this.outstandingPuts_.push({action:t,request:f,onComplete:o}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,a=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,a,u=>{this.log_(i+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(u.s,u.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,a=>{if(a.s!=="ok"){const u=a.d;this.log_("reportStats","Error sending stats: "+u)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+lt(t));const i=t.r,a=this.requestCBHash_[i];a&&(delete this.requestCBHash_[i],a(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):cf("Unrecognized action received from server: "+lt(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){j(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=La,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=La,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>L1&&(this.reconnectDelay_=La),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*U1)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),a=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+si.nextConnectionId_++,u=this.lastSessionId;let f=!1,p=null;const m=function(){p?p.close():(f=!0,a())},g=function(b){j(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(b)};this.realtime_={close:m,sendRequest:g};const E=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[b,N]=await Promise.all([this.authTokenProvider_.getToken(E),this.appCheckTokenProvider_.getToken(E)]);f?wt("getToken() completed but was canceled"):(wt("getToken() completed. Creating connection."),this.authToken_=b&&b.accessToken,this.appCheckToken_=N&&N.token,p=new O1(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,a,U=>{Ht(U+" ("+this.repoInfo_.toString()+")"),this.interrupt(j1)},u))}catch(b){this.log_("Failed to get token: "+b),f||(this.repoInfo_.nodeAdmin&&Ht(b),m())}}}interrupt(t){wt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){wt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Zh(this.interruptReasons_)&&(this.reconnectDelay_=La,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let a;i?a=i.map(u=>jf(u)).join("$"):a="default";const o=this.removeListen_(t,a);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,i){const a=new Le(t).toString();let o;if(this.listens.has(a)){const u=this.listens.get(a);o=u.get(i),u.delete(i),u.size===0&&this.listens.delete(a)}else o=void 0;return o}onAuthRevoked_(t,i){wt("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=P_&&(this.reconnectDelay_=H_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){wt("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=P_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+ny.replace(/\./g,"-")]=1,Tf()?t["framework.cordova"]=1:fv()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Qo.getInstance().currentlyOnline();return Zh(this.interruptReasons_)&&t}}si.nextPersistentConnectionId_=0;si.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(t,i){this.name=t,this.node=i}static Wrap(t,i){return new de(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,i){const a=new de(Or,t),o=new de(Or,i);return this.compare(a,o)!==0}minPost(){return de.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xo;class Dy extends cc{static get __EMPTY_NODE(){return xo}static set __EMPTY_NODE(t){xo=t}compare(t,i){return Lr(t.name,i.name)}isDefinedOn(t){throw Mr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,i){return!1}minPost(){return de.MIN}maxPost(){return new de(Ns,xo)}makePost(t,i){return j(typeof t=="string","KeyIndex indexValue must always be a string."),new de(t,xo)}toString(){return".key"}}const wr=new Dy;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(t,i,a,o,u=null){this.isReverse_=o,this.resultGenerator_=u,this.nodeStack_=[];let f=1;for(;!t.isEmpty();)if(t=t,f=i?a(t.key,i):1,o&&(f*=-1),f<0)this.isReverse_?t=t.left:t=t.right;else if(f===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(t.key,t.value):i={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class pt{constructor(t,i,a,o,u){this.key=t,this.value=i,this.color=a??pt.RED,this.left=o??zt.EMPTY_NODE,this.right=u??zt.EMPTY_NODE}copy(t,i,a,o,u){return new pt(t??this.key,i??this.value,a??this.color,o??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,a){let o=this;const u=a(t,o.key);return u<0?o=o.copy(null,null,null,o.left.insert(t,i,a),null):u===0?o=o.copy(null,i,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,i,a)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return zt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let a,o;if(a=this,i(t,a.key)<0)!a.left.isEmpty()&&!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.remove(t,i),null);else{if(a.left.isRed_()&&(a=a.rotateRight_()),!a.right.isEmpty()&&!a.right.isRed_()&&!a.right.left.isRed_()&&(a=a.moveRedRight_()),i(t,a.key)===0){if(a.right.isEmpty())return zt.EMPTY_NODE;o=a.right.min_(),a=a.copy(o.key,o.value,null,null,a.right.removeMin_())}a=a.copy(null,null,null,null,a.right.remove(t,i))}return a.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}pt.RED=!0;pt.BLACK=!1;class z1{copy(t,i,a,o,u){return this}insert(t,i,a){return new pt(t,i,null)}remove(t,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class zt{constructor(t,i=zt.EMPTY_NODE){this.comparator_=t,this.root_=i}insert(t,i){return new zt(this.comparator_,this.root_.insert(t,i,this.comparator_).copy(null,null,pt.BLACK,null,null))}remove(t){return new zt(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,pt.BLACK,null,null))}get(t){let i,a=this.root_;for(;!a.isEmpty();){if(i=this.comparator_(t,a.key),i===0)return a.value;i<0?a=a.left:i>0&&(a=a.right)}return null}getPredecessorKey(t){let i,a=this.root_,o=null;for(;!a.isEmpty();)if(i=this.comparator_(t,a.key),i===0){if(a.left.isEmpty())return o?o.key:null;for(a=a.left;!a.right.isEmpty();)a=a.right;return a.key}else i<0?a=a.left:i>0&&(o=a,a=a.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Do(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,i){return new Do(this.root_,t,this.comparator_,!1,i)}getReverseIteratorFrom(t,i){return new Do(this.root_,t,this.comparator_,!0,i)}getReverseIterator(t){return new Do(this.root_,null,this.comparator_,!0,t)}}zt.EMPTY_NODE=new z1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(r,t){return Lr(r.name,t.name)}function qf(r,t){return Lr(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hf;function P1(r){hf=r}const My=function(r){return typeof r=="number"?"number:"+ly(r):"string:"+r},Iy=function(r){if(r.isLeafNode()){const t=r.val();j(typeof t=="string"||typeof t=="number"||typeof t=="object"&&oi(t,".sv"),"Priority must be a string or number.")}else j(r===hf||r.isEmpty(),"priority of unexpected type.");j(r===hf||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let B_;class dt{static set __childrenNodeConstructor(t){B_=t}static get __childrenNodeConstructor(){return B_}constructor(t,i=dt.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,j(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Iy(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new dt(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:dt.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ge(t)?this:_e(t)===".priority"?this.priorityNode_:dt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:dt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const a=_e(t);return a===null?i:i.isEmpty()&&a!==".priority"?this:(j(a!==".priority"||Vi(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(a,dt.__childrenNodeConstructor.EMPTY_NODE.updateChild(He(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+My(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",i==="number"?t+=ly(this.value_):t+=this.value_,this.lazyHash_=sy(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===dt.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof dt.__childrenNodeConstructor?-1:(j(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,a=typeof this.value_,o=dt.VALUE_TYPE_ORDER.indexOf(i),u=dt.VALUE_TYPE_ORDER.indexOf(a);return j(o>=0,"Unknown leaf type: "+i),j(u>=0,"Unknown leaf type: "+a),o===u?a==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}dt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ky,Uy;function B1(r){ky=r}function q1(r){Uy=r}class G1 extends cc{compare(t,i){const a=t.node.getPriority(),o=i.node.getPriority(),u=a.compareTo(o);return u===0?Lr(t.name,i.name):u}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,i){return!t.getPriority().equals(i.getPriority())}minPost(){return de.MIN}maxPost(){return new de(Ns,new dt("[PRIORITY-POST]",Uy))}makePost(t,i){const a=ky(t);return new de(i,new dt("[PRIORITY-POST]",a))}toString(){return".priority"}}const We=new G1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=Math.log(2);class Y1{constructor(t){const i=u=>parseInt(Math.log(u)/V1,10),a=u=>parseInt(Array(u+1).join("1"),2);this.count=i(t+1),this.current_=this.count-1;const o=a(this.count);this.bits_=t+1&o}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Ko=function(r,t,i,a){r.sort(t);const o=function(m,g){const E=g-m;let b,N;if(E===0)return null;if(E===1)return b=r[m],N=i?i(b):b,new pt(N,b.node,pt.BLACK,null,null);{const U=parseInt(E/2,10)+m,H=o(m,U),$=o(U+1,g);return b=r[U],N=i?i(b):b,new pt(N,b.node,pt.BLACK,H,$)}},u=function(m){let g=null,E=null,b=r.length;const N=function(H,$){const ue=b-H,Ae=b;b-=H;const Re=o(ue+1,Ae),Ee=r[ue],it=i?i(Ee):Ee;U(new pt(it,Ee.node,$,null,Re))},U=function(H){g?(g.left=H,g=H):(E=H,g=H)};for(let H=0;H<m.count;++H){const $=m.nextBitIsOne(),ue=Math.pow(2,m.count-(H+1));$?N(ue,pt.BLACK):(N(ue,pt.BLACK),N(ue,pt.RED))}return E},f=new Y1(r.length),p=u(f);return new zt(a||t,p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh;const vr={};class ni{static get Default(){return j(vr&&We,"ChildrenNode.ts has not been loaded"),Gh=Gh||new ni({".priority":vr},{".priority":We}),Gh}constructor(t,i){this.indexes_=t,this.indexSet_=i}get(t){const i=Nr(this.indexes_,t);if(!i)throw new Error("No index defined for "+t);return i instanceof zt?i:null}hasIndex(t){return oi(this.indexSet_,t.toString())}addIndex(t,i){j(t!==wr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const a=[];let o=!1;const u=i.getIterator(de.Wrap);let f=u.getNext();for(;f;)o=o||t.isDefinedOn(f.node),a.push(f),f=u.getNext();let p;o?p=Ko(a,t.getCompare()):p=vr;const m=t.toString(),g=Object.assign({},this.indexSet_);g[m]=t;const E=Object.assign({},this.indexes_);return E[m]=p,new ni(E,g)}addToIndexes(t,i){const a=Ho(this.indexes_,(o,u)=>{const f=Nr(this.indexSet_,u);if(j(f,"Missing index implementation for "+u),o===vr)if(f.isDefinedOn(t.node)){const p=[],m=i.getIterator(de.Wrap);let g=m.getNext();for(;g;)g.name!==t.name&&p.push(g),g=m.getNext();return p.push(t),Ko(p,f.getCompare())}else return vr;else{const p=i.get(t.name);let m=o;return p&&(m=m.remove(new de(t.name,p))),m.insert(t,t.node)}});return new ni(a,this.indexSet_)}removeFromIndexes(t,i){const a=Ho(this.indexes_,o=>{if(o===vr)return o;{const u=i.get(t.name);return u?o.remove(new de(t.name,u)):o}});return new ni(a,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ja;class ne{static get EMPTY_NODE(){return ja||(ja=new ne(new zt(qf),null,ni.Default))}constructor(t,i,a){this.children_=t,this.priorityNode_=i,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&Iy(this.priorityNode_),this.children_.isEmpty()&&j(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ja}updatePriority(t){return this.children_.isEmpty()?this:new ne(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const i=this.children_.get(t);return i===null?ja:i}}getChild(t){const i=_e(t);return i===null?this:this.getImmediateChild(i).getChild(He(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(j(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{const a=new de(t,i);let o,u;i.isEmpty()?(o=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(a,this.children_)):(o=this.children_.insert(t,i),u=this.indexMap_.addToIndexes(a,this.children_));const f=o.isEmpty()?ja:this.priorityNode_;return new ne(o,f,u)}}updateChild(t,i){const a=_e(t);if(a===null)return i;{j(_e(t)!==".priority"||Vi(t)===1,".priority must be the last token in a path");const o=this.getImmediateChild(a).updateChild(He(t),i);return this.updateImmediateChild(a,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let a=0,o=0,u=!0;if(this.forEachChild(We,(f,p)=>{i[f]=p.val(t),a++,u&&ne.INTEGER_REGEXP_.test(f)?o=Math.max(o,Number(f)):u=!1}),!t&&u&&o<2*a){const f=[];for(const p in i)f[p]=i[p];return f}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+My(this.getPriority().val())+":"),this.forEachChild(We,(i,a)=>{const o=a.hash();o!==""&&(t+=":"+i+":"+o)}),this.lazyHash_=t===""?"":sy(t)}return this.lazyHash_}getPredecessorChildName(t,i,a){const o=this.resolveIndex_(a);if(o){const u=o.getPredecessorKey(new de(t,i));return u?u.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const a=i.minKey();return a&&a.name}else return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new de(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const a=i.maxKey();return a&&a.name}else return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new de(i,this.children_.get(i)):null}forEachChild(t,i){const a=this.resolveIndex_(t);return a?a.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const a=this.resolveIndex_(i);if(a)return a.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,de.Wrap);let u=o.peek();for(;u!=null&&i.compare(u,t)<0;)o.getNext(),u=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const a=this.resolveIndex_(i);if(a)return a.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,de.Wrap);let u=o.peek();for(;u!=null&&i.compare(u,t)>0;)o.getNext(),u=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===hl?-1:0}withIndex(t){if(t===wr||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new ne(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===wr||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const a=this.getIterator(We),o=i.getIterator(We);let u=a.getNext(),f=o.getNext();for(;u&&f;){if(u.name!==f.name||!u.node.equals(f.node))return!1;u=a.getNext(),f=o.getNext()}return u===null&&f===null}else return!1;else return!1}}resolveIndex_(t){return t===wr?null:this.indexMap_.get(t.toString())}}ne.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class F1 extends ne{constructor(){super(new zt(qf),ne.EMPTY_NODE,ni.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return ne.EMPTY_NODE}isEmpty(){return!1}}const hl=new F1;Object.defineProperties(de,{MIN:{value:new de(Or,ne.EMPTY_NODE)},MAX:{value:new de(Ns,hl)}});Dy.__EMPTY_NODE=ne.EMPTY_NODE;dt.__childrenNodeConstructor=ne;P1(hl);q1(hl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=!0;function mt(r,t=null){if(r===null)return ne.EMPTY_NODE;if(typeof r=="object"&&".priority"in r&&(t=r[".priority"]),j(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof r=="object"&&".value"in r&&r[".value"]!==null&&(r=r[".value"]),typeof r!="object"||".sv"in r){const i=r;return new dt(i,mt(t))}if(!(r instanceof Array)&&Q1){const i=[];let a=!1;if(Pt(r,(f,p)=>{if(f.substring(0,1)!=="."){const m=mt(p);m.isEmpty()||(a=a||!m.getPriority().isEmpty(),i.push(new de(f,m)))}}),i.length===0)return ne.EMPTY_NODE;const u=Ko(i,H1,f=>f.name,qf);if(a){const f=Ko(i,We.getCompare());return new ne(u,mt(t),new ni({".priority":f},{".priority":We}))}else return new ne(u,mt(t),ni.Default)}else{let i=ne.EMPTY_NODE;return Pt(r,(a,o)=>{if(oi(r,a)&&a.substring(0,1)!=="."){const u=mt(o);(u.isLeafNode()||!u.isEmpty())&&(i=i.updateImmediateChild(a,u))}}),i.updatePriority(mt(t))}}B1(mt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1 extends cc{constructor(t){super(),this.indexPath_=t,j(!ge(t)&&_e(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,i){const a=this.extractChild(t.node),o=this.extractChild(i.node),u=a.compareTo(o);return u===0?Lr(t.name,i.name):u}makePost(t,i){const a=mt(t),o=ne.EMPTY_NODE.updateChild(this.indexPath_,a);return new de(i,o)}maxPost(){const t=ne.EMPTY_NODE.updateChild(this.indexPath_,hl);return new de(Ns,t)}toString(){return Ay(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1 extends cc{compare(t,i){const a=t.node.compareTo(i.node);return a===0?Lr(t.name,i.name):a}isDefinedOn(t){return!0}indexedValueChanged(t,i){return!t.equals(i)}minPost(){return de.MIN}maxPost(){return de.MAX}makePost(t,i){const a=mt(t);return new de(i,a)}toString(){return".value"}}const X1=new W1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(r){return{type:"value",snapshotNode:r}}function xr(r,t){return{type:"child_added",snapshotNode:t,childName:r}}function Za(r,t){return{type:"child_removed",snapshotNode:t,childName:r}}function $a(r,t,i){return{type:"child_changed",snapshotNode:t,childName:r,oldSnap:i}}function Z1(r,t){return{type:"child_moved",snapshotNode:t,childName:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(t){this.index_=t}updateChild(t,i,a,o,u,f){j(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=t.getImmediateChild(i);return p.getChild(o).equals(a.getChild(o))&&p.isEmpty()===a.isEmpty()||(f!=null&&(a.isEmpty()?t.hasChild(i)?f.trackChildChange(Za(i,p)):j(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?f.trackChildChange(xr(i,a)):f.trackChildChange($a(i,a,p))),t.isLeafNode()&&a.isEmpty())?t:t.updateImmediateChild(i,a).withIndex(this.index_)}updateFullNode(t,i,a){return a!=null&&(t.isLeafNode()||t.forEachChild(We,(o,u)=>{i.hasChild(o)||a.trackChildChange(Za(o,u))}),i.isLeafNode()||i.forEachChild(We,(o,u)=>{if(t.hasChild(o)){const f=t.getImmediateChild(o);f.equals(u)||a.trackChildChange($a(o,u,f))}else a.trackChildChange(xr(o,u))})),i.withIndex(this.index_)}updatePriority(t,i){return t.isEmpty()?ne.EMPTY_NODE:t.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(t){this.indexedFilter_=new Gf(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Ja.getStartPost_(t),this.endPost_=Ja.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const i=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,a=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return i&&a}updateChild(t,i,a,o,u,f){return this.matches(new de(i,a))||(a=ne.EMPTY_NODE),this.indexedFilter_.updateChild(t,i,a,o,u,f)}updateFullNode(t,i,a){i.isLeafNode()&&(i=ne.EMPTY_NODE);let o=i.withIndex(this.index_);o=o.updatePriority(ne.EMPTY_NODE);const u=this;return i.forEachChild(We,(f,p)=>{u.matches(new de(f,p))||(o=o.updateImmediateChild(f,ne.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,o,a)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const i=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),i)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const i=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),i)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(t){this.withinDirectionalStart=i=>this.reverse_?this.withinEndPost(i):this.withinStartPost(i),this.withinDirectionalEnd=i=>this.reverse_?this.withinStartPost(i):this.withinEndPost(i),this.withinStartPost=i=>{const a=this.index_.compare(this.rangedFilter_.getStartPost(),i);return this.startIsInclusive_?a<=0:a<0},this.withinEndPost=i=>{const a=this.index_.compare(i,this.rangedFilter_.getEndPost());return this.endIsInclusive_?a<=0:a<0},this.rangedFilter_=new Ja(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,i,a,o,u,f){return this.rangedFilter_.matches(new de(i,a))||(a=ne.EMPTY_NODE),t.getImmediateChild(i).equals(a)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,i,a,o,u,f):this.fullLimitUpdateChild_(t,i,a,u,f)}updateFullNode(t,i,a){let o;if(i.isLeafNode()||i.isEmpty())o=ne.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){o=ne.EMPTY_NODE.withIndex(this.index_);let u;this.reverse_?u=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let f=0;for(;u.hasNext()&&f<this.limit_;){const p=u.getNext();if(this.withinDirectionalStart(p))if(this.withinDirectionalEnd(p))o=o.updateImmediateChild(p.name,p.node),f++;else break;else continue}}else{o=i.withIndex(this.index_),o=o.updatePriority(ne.EMPTY_NODE);let u;this.reverse_?u=o.getReverseIterator(this.index_):u=o.getIterator(this.index_);let f=0;for(;u.hasNext();){const p=u.getNext();f<this.limit_&&this.withinDirectionalStart(p)&&this.withinDirectionalEnd(p)?f++:o=o.updateImmediateChild(p.name,ne.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,o,a)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,i,a,o,u){let f;if(this.reverse_){const b=this.index_.getCompare();f=(N,U)=>b(U,N)}else f=this.index_.getCompare();const p=t;j(p.numChildren()===this.limit_,"");const m=new de(i,a),g=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),E=this.rangedFilter_.matches(m);if(p.hasChild(i)){const b=p.getImmediateChild(i);let N=o.getChildAfterChild(this.index_,g,this.reverse_);for(;N!=null&&(N.name===i||p.hasChild(N.name));)N=o.getChildAfterChild(this.index_,N,this.reverse_);const U=N==null?1:f(N,m);if(E&&!a.isEmpty()&&U>=0)return u!=null&&u.trackChildChange($a(i,a,b)),p.updateImmediateChild(i,a);{u!=null&&u.trackChildChange(Za(i,b));const $=p.updateImmediateChild(i,ne.EMPTY_NODE);return N!=null&&this.rangedFilter_.matches(N)?(u!=null&&u.trackChildChange(xr(N.name,N.node)),$.updateImmediateChild(N.name,N.node)):$}}else return a.isEmpty()?t:E&&f(g,m)>=0?(u!=null&&(u.trackChildChange(Za(g.name,g.node)),u.trackChildChange(xr(i,a))),p.updateImmediateChild(i,a).updateImmediateChild(g.name,ne.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=We}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return j(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return j(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Or}hasEnd(){return this.endSet_}getIndexEndValue(){return j(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return j(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ns}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return j(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===We}copy(){const t=new Vf;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function J1(r){return r.loadsAllData()?new Gf(r.getIndex()):r.hasLimit()?new $1(r):new Ja(r)}function q_(r){const t={};if(r.isDefault())return t;let i;if(r.index_===We?i="$priority":r.index_===X1?i="$value":r.index_===wr?i="$key":(j(r.index_ instanceof K1,"Unrecognized index type!"),i=r.index_.toString()),t.orderBy=lt(i),r.startSet_){const a=r.startAfterSet_?"startAfter":"startAt";t[a]=lt(r.indexStartValue_),r.startNameSet_&&(t[a]+=","+lt(r.indexStartName_))}if(r.endSet_){const a=r.endBeforeSet_?"endBefore":"endAt";t[a]=lt(r.indexEndValue_),r.endNameSet_&&(t[a]+=","+lt(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?t.limitToFirst=r.limit_:t.limitToLast=r.limit_),t}function G_(r){const t={};if(r.startSet_&&(t.sp=r.indexStartValue_,r.startNameSet_&&(t.sn=r.indexStartName_),t.sin=!r.startAfterSet_),r.endSet_&&(t.ep=r.indexEndValue_,r.endNameSet_&&(t.en=r.indexEndName_),t.ein=!r.endBeforeSet_),r.limitSet_){t.l=r.limit_;let i=r.viewFrom_;i===""&&(r.isViewFromLeft()?i="l":i="r"),t.vf=i}return r.index_!==We&&(t.i=r.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo extends Cy{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,i){return i!==void 0?"tag$"+i:(j(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,i,a,o){super(),this.repoInfo_=t,this.onDataUpdate_=i,this.authTokenProvider_=a,this.appCheckTokenProvider_=o,this.log_=ul("p:rest:"),this.listens_={}}listen(t,i,a,o){const u=t._path.toString();this.log_("Listen called for "+u+" "+t._queryIdentifier);const f=Wo.getListenId_(t,a),p={};this.listens_[f]=p;const m=q_(t._queryParams);this.restRequest_(u+".json",m,(g,E)=>{let b=E;if(g===404&&(b=null,g=null),g===null&&this.onDataUpdate_(u,b,!1,a),Nr(this.listens_,f)===p){let N;g?g===401?N="permission_denied":N="rest_error:"+g:N="ok",o(N,null)}})}unlisten(t,i){const a=Wo.getListenId_(t,i);delete this.listens_[a]}get(t){const i=q_(t._queryParams),a=t._path.toString(),o=new sc;return this.restRequest_(a+".json",i,(u,f)=>{let p=f;u===404&&(p=null,u=null),u===null?(this.onDataUpdate_(a,p,!1,null),o.resolve(p)):o.reject(new Error(p))}),o.promise}refreshAuthToken(t){}restRequest_(t,i={},a){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,u])=>{o&&o.accessToken&&(i.auth=o.accessToken),u&&u.token&&(i.ac=u.token);const f=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Ir(i);this.log_("Sending REST request for "+f);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(a&&p.readyState===4){this.log_("REST Response for "+f+" received. status:",p.status,"response:",p.responseText);let m=null;if(p.status>=200&&p.status<300){try{m=Qa(p.responseText)}catch{Ht("Failed to parse JSON response for "+f+": "+p.responseText)}a(null,m)}else p.status!==401&&p.status!==404&&Ht("Got unsuccessful REST response for "+f+" Status: "+p.status),a(p.status);a=null}},p.open("GET",f,!0),p.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.rootNode_=ne.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,i){this.rootNode_=this.rootNode_.updateChild(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(){return{value:null,children:new Map}}function jy(r,t,i){if(ge(t))r.value=i,r.children.clear();else if(r.value!==null)r.value=r.value.updateChild(t,i);else{const a=_e(t);r.children.has(a)||r.children.set(a,Xo());const o=r.children.get(a);t=He(t),jy(o,t,i)}}function ff(r,t,i){r.value!==null?i(t,r.value):tN(r,(a,o)=>{const u=new Le(t.toString()+"/"+a);ff(o,u,i)})}function tN(r,t){r.children.forEach((i,a)=>{t(a,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),i=Object.assign({},t);return this.last_&&Pt(this.last_,(a,o)=>{i[a]=i[a]-o}),this.last_=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=10*1e3,iN=30*1e3,sN=5*60*1e3;class rN{constructor(t,i){this.server_=i,this.statsToReport_={},this.statsListener_=new nN(t);const a=V_+(iN-V_)*Math.random();Ga(this.reportStats_.bind(this),Math.floor(a))}reportStats_(){const t=this.statsListener_.get(),i={};let a=!1;Pt(t,(o,u)=>{u>0&&oi(this.statsToReport_,o)&&(i[o]=u,a=!0)}),a&&this.server_.reportStats(i),Ga(this.reportStats_.bind(this),Math.floor(Math.random()*2*sN))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vn;(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(vn||(vn={}));function zy(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Yf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Ff(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(t,i,a){this.path=t,this.affectedTree=i,this.revert=a,this.type=vn.ACK_USER_WRITE,this.source=zy()}operationForChild(t){if(ge(this.path)){if(this.affectedTree.value!=null)return j(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new Le(t));return new Zo(we(),i,this.revert)}}else return j(_e(this.path)===t,"operationForChild called for unrelated child."),new Zo(He(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(t,i){this.source=t,this.path=i,this.type=vn.LISTEN_COMPLETE}operationForChild(t){return ge(this.path)?new el(this.source,we()):new el(this.source,He(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(t,i,a){this.source=t,this.path=i,this.snap=a,this.type=vn.OVERWRITE}operationForChild(t){return ge(this.path)?new As(this.source,we(),this.snap.getImmediateChild(t)):new As(this.source,He(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(t,i,a){this.source=t,this.path=i,this.children=a,this.type=vn.MERGE}operationForChild(t){if(ge(this.path)){const i=this.children.subtree(new Le(t));return i.isEmpty()?null:i.value?new As(this.source,we(),i.value):new tl(this.source,we(),i)}else return j(_e(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new tl(this.source,He(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(t,i,a){this.node_=t,this.fullyInitialized_=i,this.filtered_=a}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(ge(t))return this.isFullyInitialized()&&!this.filtered_;const i=_e(t);return this.isCompleteForChild(i)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function lN(r,t,i,a){const o=[],u=[];return t.forEach(f=>{f.type==="child_changed"&&r.index_.indexedValueChanged(f.oldSnap,f.snapshotNode)&&u.push(Z1(f.childName,f.snapshotNode))}),za(r,o,"child_removed",t,a,i),za(r,o,"child_added",t,a,i),za(r,o,"child_moved",u,a,i),za(r,o,"child_changed",t,a,i),za(r,o,"value",t,a,i),o}function za(r,t,i,a,o,u){const f=a.filter(p=>p.type===i);f.sort((p,m)=>cN(r,p,m)),f.forEach(p=>{const m=oN(r,p,u);o.forEach(g=>{g.respondsTo(p.type)&&t.push(g.createEvent(m,r.query_))})})}function oN(r,t,i){return t.type==="value"||t.type==="child_removed"||(t.prevName=i.getPredecessorChildName(t.childName,t.snapshotNode,r.index_)),t}function cN(r,t,i){if(t.childName==null||i.childName==null)throw Mr("Should only compare child_ events.");const a=new de(t.childName,t.snapshotNode),o=new de(i.childName,i.snapshotNode);return r.index_.compare(a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(r,t){return{eventCache:r,serverCache:t}}function Va(r,t,i,a){return uc(new Yi(t,i,a),r.serverCache)}function Hy(r,t,i,a){return uc(r.eventCache,new Yi(t,i,a))}function $o(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function Rs(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh;const uN=()=>(Vh||(Vh=new zt(Ww)),Vh);class Be{static fromObject(t){let i=new Be(null);return Pt(t,(a,o)=>{i=i.set(new Le(a),o)}),i}constructor(t,i=uN()){this.value=t,this.children=i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,i){if(this.value!=null&&i(this.value))return{path:we(),value:this.value};if(ge(t))return null;{const a=_e(t),o=this.children.get(a);if(o!==null){const u=o.findRootMostMatchingPathAndValue(He(t),i);return u!=null?{path:ot(new Le(a),u.path),value:u.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(ge(t))return this;{const i=_e(t),a=this.children.get(i);return a!==null?a.subtree(He(t)):new Be(null)}}set(t,i){if(ge(t))return new Be(i,this.children);{const a=_e(t),u=(this.children.get(a)||new Be(null)).set(He(t),i),f=this.children.insert(a,u);return new Be(this.value,f)}}remove(t){if(ge(t))return this.children.isEmpty()?new Be(null):new Be(null,this.children);{const i=_e(t),a=this.children.get(i);if(a){const o=a.remove(He(t));let u;return o.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,o),this.value===null&&u.isEmpty()?new Be(null):new Be(this.value,u)}else return this}}get(t){if(ge(t))return this.value;{const i=_e(t),a=this.children.get(i);return a?a.get(He(t)):null}}setTree(t,i){if(ge(t))return i;{const a=_e(t),u=(this.children.get(a)||new Be(null)).setTree(He(t),i);let f;return u.isEmpty()?f=this.children.remove(a):f=this.children.insert(a,u),new Be(this.value,f)}}fold(t){return this.fold_(we(),t)}fold_(t,i){const a={};return this.children.inorderTraversal((o,u)=>{a[o]=u.fold_(ot(t,o),i)}),i(t,this.value,a)}findOnPath(t,i){return this.findOnPath_(t,we(),i)}findOnPath_(t,i,a){const o=this.value?a(i,this.value):!1;if(o)return o;if(ge(t))return null;{const u=_e(t),f=this.children.get(u);return f?f.findOnPath_(He(t),ot(i,u),a):null}}foreachOnPath(t,i){return this.foreachOnPath_(t,we(),i)}foreachOnPath_(t,i,a){if(ge(t))return this;{this.value&&a(i,this.value);const o=_e(t),u=this.children.get(o);return u?u.foreachOnPath_(He(t),ot(i,o),a):new Be(null)}}foreach(t){this.foreach_(we(),t)}foreach_(t,i){this.children.inorderTraversal((a,o)=>{o.foreach_(ot(t,a),i)}),this.value&&i(t,this.value)}foreachChild(t){this.children.inorderTraversal((i,a)=>{a.value&&t(i,a.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t){this.writeTree_=t}static empty(){return new yn(new Be(null))}}function Ya(r,t,i){if(ge(t))return new yn(new Be(i));{const a=r.writeTree_.findRootMostValueAndPath(t);if(a!=null){const o=a.path;let u=a.value;const f=It(o,t);return u=u.updateChild(f,i),new yn(r.writeTree_.set(o,u))}else{const o=new Be(i),u=r.writeTree_.setTree(t,o);return new yn(u)}}}function Y_(r,t,i){let a=r;return Pt(i,(o,u)=>{a=Ya(a,ot(t,o),u)}),a}function F_(r,t){if(ge(t))return yn.empty();{const i=r.writeTree_.setTree(t,new Be(null));return new yn(i)}}function df(r,t){return xs(r,t)!=null}function xs(r,t){const i=r.writeTree_.findRootMostValueAndPath(t);return i!=null?r.writeTree_.get(i.path).getChild(It(i.path,t)):null}function Q_(r){const t=[],i=r.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(We,(a,o)=>{t.push(new de(a,o))}):r.writeTree_.children.inorderTraversal((a,o)=>{o.value!=null&&t.push(new de(a,o.value))}),t}function qi(r,t){if(ge(t))return r;{const i=xs(r,t);return i!=null?new yn(new Be(i)):new yn(r.writeTree_.subtree(t))}}function pf(r){return r.writeTree_.isEmpty()}function Dr(r,t){return Py(we(),r.writeTree_,t)}function Py(r,t,i){if(t.value!=null)return i.updateChild(r,t.value);{let a=null;return t.children.inorderTraversal((o,u)=>{o===".priority"?(j(u.value!==null,"Priority writes must always be leaf nodes"),a=u.value):i=Py(ot(r,o),u,i)}),!i.getChild(r).isEmpty()&&a!==null&&(i=i.updateChild(ot(r,".priority"),a)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(r,t){return Vy(t,r)}function hN(r,t,i,a,o){j(a>r.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),r.allWrites.push({path:t,snap:i,writeId:a,visible:o}),o&&(r.visibleWrites=Ya(r.visibleWrites,t,i)),r.lastWriteId=a}function fN(r,t){for(let i=0;i<r.allWrites.length;i++){const a=r.allWrites[i];if(a.writeId===t)return a}return null}function dN(r,t){const i=r.allWrites.findIndex(p=>p.writeId===t);j(i>=0,"removeWrite called with nonexistent writeId.");const a=r.allWrites[i];r.allWrites.splice(i,1);let o=a.visible,u=!1,f=r.allWrites.length-1;for(;o&&f>=0;){const p=r.allWrites[f];p.visible&&(f>=i&&pN(p,a.path)?o=!1:_n(a.path,p.path)&&(u=!0)),f--}if(o){if(u)return mN(r),!0;if(a.snap)r.visibleWrites=F_(r.visibleWrites,a.path);else{const p=a.children;Pt(p,m=>{r.visibleWrites=F_(r.visibleWrites,ot(a.path,m))})}return!0}else return!1}function pN(r,t){if(r.snap)return _n(r.path,t);for(const i in r.children)if(r.children.hasOwnProperty(i)&&_n(ot(r.path,i),t))return!0;return!1}function mN(r){r.visibleWrites=By(r.allWrites,gN,we()),r.allWrites.length>0?r.lastWriteId=r.allWrites[r.allWrites.length-1].writeId:r.lastWriteId=-1}function gN(r){return r.visible}function By(r,t,i){let a=yn.empty();for(let o=0;o<r.length;++o){const u=r[o];if(t(u)){const f=u.path;let p;if(u.snap)_n(i,f)?(p=It(i,f),a=Ya(a,p,u.snap)):_n(f,i)&&(p=It(f,i),a=Ya(a,we(),u.snap.getChild(p)));else if(u.children){if(_n(i,f))p=It(i,f),a=Y_(a,p,u.children);else if(_n(f,i))if(p=It(f,i),ge(p))a=Y_(a,we(),u.children);else{const m=Nr(u.children,_e(p));if(m){const g=m.getChild(He(p));a=Ya(a,we(),g)}}}else throw Mr("WriteRecord should have .snap or .children")}}return a}function qy(r,t,i,a,o){if(!a&&!o){const u=xs(r.visibleWrites,t);if(u!=null)return u;{const f=qi(r.visibleWrites,t);if(pf(f))return i;if(i==null&&!df(f,we()))return null;{const p=i||ne.EMPTY_NODE;return Dr(f,p)}}}else{const u=qi(r.visibleWrites,t);if(!o&&pf(u))return i;if(!o&&i==null&&!df(u,we()))return null;{const f=function(g){return(g.visible||o)&&(!a||!~a.indexOf(g.writeId))&&(_n(g.path,t)||_n(t,g.path))},p=By(r.allWrites,f,t),m=i||ne.EMPTY_NODE;return Dr(p,m)}}}function _N(r,t,i){let a=ne.EMPTY_NODE;const o=xs(r.visibleWrites,t);if(o)return o.isLeafNode()||o.forEachChild(We,(u,f)=>{a=a.updateImmediateChild(u,f)}),a;if(i){const u=qi(r.visibleWrites,t);return i.forEachChild(We,(f,p)=>{const m=Dr(qi(u,new Le(f)),p);a=a.updateImmediateChild(f,m)}),Q_(u).forEach(f=>{a=a.updateImmediateChild(f.name,f.node)}),a}else{const u=qi(r.visibleWrites,t);return Q_(u).forEach(f=>{a=a.updateImmediateChild(f.name,f.node)}),a}}function vN(r,t,i,a,o){j(a||o,"Either existingEventSnap or existingServerSnap must exist");const u=ot(t,i);if(df(r.visibleWrites,u))return null;{const f=qi(r.visibleWrites,u);return pf(f)?o.getChild(i):Dr(f,o.getChild(i))}}function yN(r,t,i,a){const o=ot(t,i),u=xs(r.visibleWrites,o);if(u!=null)return u;if(a.isCompleteForChild(i)){const f=qi(r.visibleWrites,o);return Dr(f,a.getNode().getImmediateChild(i))}else return null}function EN(r,t){return xs(r.visibleWrites,t)}function SN(r,t,i,a,o,u,f){let p;const m=qi(r.visibleWrites,t),g=xs(m,we());if(g!=null)p=g;else if(i!=null)p=Dr(m,i);else return[];if(p=p.withIndex(f),!p.isEmpty()&&!p.isLeafNode()){const E=[],b=f.getCompare(),N=u?p.getReverseIteratorFrom(a,f):p.getIteratorFrom(a,f);let U=N.getNext();for(;U&&E.length<o;)b(U,a)!==0&&E.push(U),U=N.getNext();return E}else return[]}function bN(){return{visibleWrites:yn.empty(),allWrites:[],lastWriteId:-1}}function Jo(r,t,i,a){return qy(r.writeTree,r.treePath,t,i,a)}function Qf(r,t){return _N(r.writeTree,r.treePath,t)}function K_(r,t,i,a){return vN(r.writeTree,r.treePath,t,i,a)}function ec(r,t){return EN(r.writeTree,ot(r.treePath,t))}function TN(r,t,i,a,o,u){return SN(r.writeTree,r.treePath,t,i,a,o,u)}function Kf(r,t,i){return yN(r.writeTree,r.treePath,t,i)}function Gy(r,t){return Vy(ot(r.treePath,t),r.writeTree)}function Vy(r,t){return{treePath:r,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.changeMap=new Map}trackChildChange(t){const i=t.type,a=t.childName;j(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),j(a!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(a);if(o){const u=o.type;if(i==="child_added"&&u==="child_removed")this.changeMap.set(a,$a(a,t.snapshotNode,o.snapshotNode));else if(i==="child_removed"&&u==="child_added")this.changeMap.delete(a);else if(i==="child_removed"&&u==="child_changed")this.changeMap.set(a,Za(a,o.oldSnap));else if(i==="child_changed"&&u==="child_added")this.changeMap.set(a,xr(a,t.snapshotNode));else if(i==="child_changed"&&u==="child_changed")this.changeMap.set(a,$a(a,t.snapshotNode,o.oldSnap));else throw Mr("Illegal combination of changes: "+t+" occurred after "+o)}else this.changeMap.set(a,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{getCompleteChild(t){return null}getChildAfterChild(t,i,a){return null}}const Yy=new wN;class Wf{constructor(t,i,a=null){this.writes_=t,this.viewCache_=i,this.optCompleteServerCache_=a}getCompleteChild(t){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(t))return i.getNode().getImmediateChild(t);{const a=this.optCompleteServerCache_!=null?new Yi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Kf(this.writes_,t,a)}}getChildAfterChild(t,i,a){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Rs(this.viewCache_),u=TN(this.writes_,o,i,1,a,t);return u.length===0?null:u[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(r){return{filter:r}}function AN(r,t){j(t.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),j(t.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}function RN(r,t,i,a,o){const u=new CN;let f,p;if(i.type===vn.OVERWRITE){const g=i;g.source.fromUser?f=mf(r,t,g.path,g.snap,a,o,u):(j(g.source.fromServer,"Unknown source."),p=g.source.tagged||t.serverCache.isFiltered()&&!ge(g.path),f=tc(r,t,g.path,g.snap,a,o,p,u))}else if(i.type===vn.MERGE){const g=i;g.source.fromUser?f=xN(r,t,g.path,g.children,a,o,u):(j(g.source.fromServer,"Unknown source."),p=g.source.tagged||t.serverCache.isFiltered(),f=gf(r,t,g.path,g.children,a,o,p,u))}else if(i.type===vn.ACK_USER_WRITE){const g=i;g.revert?f=IN(r,t,g.path,a,o,u):f=DN(r,t,g.path,g.affectedTree,a,o,u)}else if(i.type===vn.LISTEN_COMPLETE)f=MN(r,t,i.path,a,u);else throw Mr("Unknown operation type: "+i.type);const m=u.getChanges();return ON(t,f,m),{viewCache:f,changes:m}}function ON(r,t,i){const a=t.eventCache;if(a.isFullyInitialized()){const o=a.getNode().isLeafNode()||a.getNode().isEmpty(),u=$o(r);(i.length>0||!r.eventCache.isFullyInitialized()||o&&!a.getNode().equals(u)||!a.getNode().getPriority().equals(u.getPriority()))&&i.push(Ly($o(t)))}}function Fy(r,t,i,a,o,u){const f=t.eventCache;if(ec(a,i)!=null)return t;{let p,m;if(ge(i))if(j(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const g=Rs(t),E=g instanceof ne?g:ne.EMPTY_NODE,b=Qf(a,E);p=r.filter.updateFullNode(t.eventCache.getNode(),b,u)}else{const g=Jo(a,Rs(t));p=r.filter.updateFullNode(t.eventCache.getNode(),g,u)}else{const g=_e(i);if(g===".priority"){j(Vi(i)===1,"Can't have a priority with additional path components");const E=f.getNode();m=t.serverCache.getNode();const b=K_(a,i,E,m);b!=null?p=r.filter.updatePriority(E,b):p=f.getNode()}else{const E=He(i);let b;if(f.isCompleteForChild(g)){m=t.serverCache.getNode();const N=K_(a,i,f.getNode(),m);N!=null?b=f.getNode().getImmediateChild(g).updateChild(E,N):b=f.getNode().getImmediateChild(g)}else b=Kf(a,g,t.serverCache);b!=null?p=r.filter.updateChild(f.getNode(),g,b,E,o,u):p=f.getNode()}}return Va(t,p,f.isFullyInitialized()||ge(i),r.filter.filtersNodes())}}function tc(r,t,i,a,o,u,f,p){const m=t.serverCache;let g;const E=f?r.filter:r.filter.getIndexedFilter();if(ge(i))g=E.updateFullNode(m.getNode(),a,null);else if(E.filtersNodes()&&!m.isFiltered()){const U=m.getNode().updateChild(i,a);g=E.updateFullNode(m.getNode(),U,null)}else{const U=_e(i);if(!m.isCompleteForPath(i)&&Vi(i)>1)return t;const H=He(i),ue=m.getNode().getImmediateChild(U).updateChild(H,a);U===".priority"?g=E.updatePriority(m.getNode(),ue):g=E.updateChild(m.getNode(),U,ue,H,Yy,null)}const b=Hy(t,g,m.isFullyInitialized()||ge(i),E.filtersNodes()),N=new Wf(o,b,u);return Fy(r,b,i,o,N,p)}function mf(r,t,i,a,o,u,f){const p=t.eventCache;let m,g;const E=new Wf(o,t,u);if(ge(i))g=r.filter.updateFullNode(t.eventCache.getNode(),a,f),m=Va(t,g,!0,r.filter.filtersNodes());else{const b=_e(i);if(b===".priority")g=r.filter.updatePriority(t.eventCache.getNode(),a),m=Va(t,g,p.isFullyInitialized(),p.isFiltered());else{const N=He(i),U=p.getNode().getImmediateChild(b);let H;if(ge(N))H=a;else{const $=E.getCompleteChild(b);$!=null?Ny(N)===".priority"&&$.getChild(Ry(N)).isEmpty()?H=$:H=$.updateChild(N,a):H=ne.EMPTY_NODE}if(U.equals(H))m=t;else{const $=r.filter.updateChild(p.getNode(),b,H,N,E,f);m=Va(t,$,p.isFullyInitialized(),r.filter.filtersNodes())}}}return m}function W_(r,t){return r.eventCache.isCompleteForChild(t)}function xN(r,t,i,a,o,u,f){let p=t;return a.foreach((m,g)=>{const E=ot(i,m);W_(t,_e(E))&&(p=mf(r,p,E,g,o,u,f))}),a.foreach((m,g)=>{const E=ot(i,m);W_(t,_e(E))||(p=mf(r,p,E,g,o,u,f))}),p}function X_(r,t,i){return i.foreach((a,o)=>{t=t.updateChild(a,o)}),t}function gf(r,t,i,a,o,u,f,p){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let m=t,g;ge(i)?g=a:g=new Be(null).setTree(i,a);const E=t.serverCache.getNode();return g.children.inorderTraversal((b,N)=>{if(E.hasChild(b)){const U=t.serverCache.getNode().getImmediateChild(b),H=X_(r,U,N);m=tc(r,m,new Le(b),H,o,u,f,p)}}),g.children.inorderTraversal((b,N)=>{const U=!t.serverCache.isCompleteForChild(b)&&N.value===null;if(!E.hasChild(b)&&!U){const H=t.serverCache.getNode().getImmediateChild(b),$=X_(r,H,N);m=tc(r,m,new Le(b),$,o,u,f,p)}}),m}function DN(r,t,i,a,o,u,f){if(ec(o,i)!=null)return t;const p=t.serverCache.isFiltered(),m=t.serverCache;if(a.value!=null){if(ge(i)&&m.isFullyInitialized()||m.isCompleteForPath(i))return tc(r,t,i,m.getNode().getChild(i),o,u,p,f);if(ge(i)){let g=new Be(null);return m.getNode().forEachChild(wr,(E,b)=>{g=g.set(new Le(E),b)}),gf(r,t,i,g,o,u,p,f)}else return t}else{let g=new Be(null);return a.foreach((E,b)=>{const N=ot(i,E);m.isCompleteForPath(N)&&(g=g.set(E,m.getNode().getChild(N)))}),gf(r,t,i,g,o,u,p,f)}}function MN(r,t,i,a,o){const u=t.serverCache,f=Hy(t,u.getNode(),u.isFullyInitialized()||ge(i),u.isFiltered());return Fy(r,f,i,a,Yy,o)}function IN(r,t,i,a,o,u){let f;if(ec(a,i)!=null)return t;{const p=new Wf(a,t,o),m=t.eventCache.getNode();let g;if(ge(i)||_e(i)===".priority"){let E;if(t.serverCache.isFullyInitialized())E=Jo(a,Rs(t));else{const b=t.serverCache.getNode();j(b instanceof ne,"serverChildren would be complete if leaf node"),E=Qf(a,b)}E=E,g=r.filter.updateFullNode(m,E,u)}else{const E=_e(i);let b=Kf(a,E,t.serverCache);b==null&&t.serverCache.isCompleteForChild(E)&&(b=m.getImmediateChild(E)),b!=null?g=r.filter.updateChild(m,E,b,He(i),p,u):t.eventCache.getNode().hasChild(E)?g=r.filter.updateChild(m,E,ne.EMPTY_NODE,He(i),p,u):g=m,g.isEmpty()&&t.serverCache.isFullyInitialized()&&(f=Jo(a,Rs(t)),f.isLeafNode()&&(g=r.filter.updateFullNode(g,f,u)))}return f=t.serverCache.isFullyInitialized()||ec(a,we())!=null,Va(t,g,f,r.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(t,i){this.query_=t,this.eventRegistrations_=[];const a=this.query_._queryParams,o=new Gf(a.getIndex()),u=J1(a);this.processor_=NN(u);const f=i.serverCache,p=i.eventCache,m=o.updateFullNode(ne.EMPTY_NODE,f.getNode(),null),g=u.updateFullNode(ne.EMPTY_NODE,p.getNode(),null),E=new Yi(m,f.isFullyInitialized(),o.filtersNodes()),b=new Yi(g,p.isFullyInitialized(),u.filtersNodes());this.viewCache_=uc(b,E),this.eventGenerator_=new aN(this.query_)}get query(){return this.query_}}function UN(r){return r.viewCache_.serverCache.getNode()}function LN(r){return $o(r.viewCache_)}function jN(r,t){const i=Rs(r.viewCache_);return i&&(r.query._queryParams.loadsAllData()||!ge(t)&&!i.getImmediateChild(_e(t)).isEmpty())?i.getChild(t):null}function Z_(r){return r.eventRegistrations_.length===0}function zN(r,t){r.eventRegistrations_.push(t)}function $_(r,t,i){const a=[];if(i){j(t==null,"A cancel should cancel all event registrations.");const o=r.query._path;r.eventRegistrations_.forEach(u=>{const f=u.createCancelEvent(i,o);f&&a.push(f)})}if(t){let o=[];for(let u=0;u<r.eventRegistrations_.length;++u){const f=r.eventRegistrations_[u];if(!f.matches(t))o.push(f);else if(t.hasAnyCallback()){o=o.concat(r.eventRegistrations_.slice(u+1));break}}r.eventRegistrations_=o}else r.eventRegistrations_=[];return a}function J_(r,t,i,a){t.type===vn.MERGE&&t.source.queryId!==null&&(j(Rs(r.viewCache_),"We should always have a full cache before handling merges"),j($o(r.viewCache_),"Missing event cache, even though we have a server cache"));const o=r.viewCache_,u=RN(r.processor_,o,t,i,a);return AN(r.processor_,u.viewCache),j(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=u.viewCache,Qy(r,u.changes,u.viewCache.eventCache.getNode(),null)}function HN(r,t){const i=r.viewCache_.eventCache,a=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(We,(u,f)=>{a.push(xr(u,f))}),i.isFullyInitialized()&&a.push(Ly(i.getNode())),Qy(r,a,i.getNode(),t)}function Qy(r,t,i,a){const o=a?[a]:r.eventRegistrations_;return lN(r.eventGenerator_,t,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nc;class Ky{constructor(){this.views=new Map}}function PN(r){j(!nc,"__referenceConstructor has already been defined"),nc=r}function BN(){return j(nc,"Reference.ts has not been loaded"),nc}function qN(r){return r.views.size===0}function Xf(r,t,i,a){const o=t.source.queryId;if(o!==null){const u=r.views.get(o);return j(u!=null,"SyncTree gave us an op for an invalid query."),J_(u,t,i,a)}else{let u=[];for(const f of r.views.values())u=u.concat(J_(f,t,i,a));return u}}function Wy(r,t,i,a,o){const u=t._queryIdentifier,f=r.views.get(u);if(!f){let p=Jo(i,o?a:null),m=!1;p?m=!0:a instanceof ne?(p=Qf(i,a),m=!1):(p=ne.EMPTY_NODE,m=!1);const g=uc(new Yi(p,m,!1),new Yi(a,o,!1));return new kN(t,g)}return f}function GN(r,t,i,a,o,u){const f=Wy(r,t,a,o,u);return r.views.has(t._queryIdentifier)||r.views.set(t._queryIdentifier,f),zN(f,i),HN(f,i)}function VN(r,t,i,a){const o=t._queryIdentifier,u=[];let f=[];const p=Fi(r);if(o==="default")for(const[m,g]of r.views.entries())f=f.concat($_(g,i,a)),Z_(g)&&(r.views.delete(m),g.query._queryParams.loadsAllData()||u.push(g.query));else{const m=r.views.get(o);m&&(f=f.concat($_(m,i,a)),Z_(m)&&(r.views.delete(o),m.query._queryParams.loadsAllData()||u.push(m.query)))}return p&&!Fi(r)&&u.push(new(BN())(t._repo,t._path)),{removed:u,events:f}}function Xy(r){const t=[];for(const i of r.views.values())i.query._queryParams.loadsAllData()||t.push(i);return t}function Gi(r,t){let i=null;for(const a of r.views.values())i=i||jN(a,t);return i}function Zy(r,t){if(t._queryParams.loadsAllData())return fc(r);{const a=t._queryIdentifier;return r.views.get(a)}}function $y(r,t){return Zy(r,t)!=null}function Fi(r){return fc(r)!=null}function fc(r){for(const t of r.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ic;function YN(r){j(!ic,"__referenceConstructor has already been defined"),ic=r}function FN(){return j(ic,"Reference.ts has not been loaded"),ic}let QN=1;class ev{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Be(null),this.pendingWriteTree_=bN(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Jy(r,t,i,a,o){return hN(r.pendingWriteTree_,t,i,a,o),o?dl(r,new As(zy(),t,i)):[]}function Ss(r,t,i=!1){const a=fN(r.pendingWriteTree_,t);if(dN(r.pendingWriteTree_,t)){let u=new Be(null);return a.snap!=null?u=u.set(we(),!0):Pt(a.children,f=>{u=u.set(new Le(f),!0)}),dl(r,new Zo(a.path,u,i))}else return[]}function fl(r,t,i){return dl(r,new As(Yf(),t,i))}function KN(r,t,i){const a=Be.fromObject(i);return dl(r,new tl(Yf(),t,a))}function WN(r,t){return dl(r,new el(Yf(),t))}function XN(r,t,i){const a=$f(r,i);if(a){const o=Jf(a),u=o.path,f=o.queryId,p=It(u,t),m=new el(Ff(f),p);return ed(r,u,m)}else return[]}function e0(r,t,i,a,o=!1){const u=t._path,f=r.syncPointTree_.get(u);let p=[];if(f&&(t._queryIdentifier==="default"||$y(f,t))){const m=VN(f,t,i,a);qN(f)&&(r.syncPointTree_=r.syncPointTree_.remove(u));const g=m.removed;if(p=m.events,!o){const E=g.findIndex(N=>N._queryParams.loadsAllData())!==-1,b=r.syncPointTree_.findOnPath(u,(N,U)=>Fi(U));if(E&&!b){const N=r.syncPointTree_.subtree(u);if(!N.isEmpty()){const U=eA(N);for(let H=0;H<U.length;++H){const $=U[H],ue=$.query,Ae=s0(r,$);r.listenProvider_.startListening(Fa(ue),nl(r,ue),Ae.hashFn,Ae.onComplete)}}}!b&&g.length>0&&!a&&(E?r.listenProvider_.stopListening(Fa(t),null):g.forEach(N=>{const U=r.queryToTagMap.get(dc(N));r.listenProvider_.stopListening(Fa(N),U)}))}tA(r,g)}return p}function t0(r,t,i,a){const o=$f(r,a);if(o!=null){const u=Jf(o),f=u.path,p=u.queryId,m=It(f,t),g=new As(Ff(p),m,i);return ed(r,f,g)}else return[]}function ZN(r,t,i,a){const o=$f(r,a);if(o){const u=Jf(o),f=u.path,p=u.queryId,m=It(f,t),g=Be.fromObject(i),E=new tl(Ff(p),m,g);return ed(r,f,E)}else return[]}function $N(r,t,i,a=!1){const o=t._path;let u=null,f=!1;r.syncPointTree_.foreachOnPath(o,(N,U)=>{const H=It(N,o);u=u||Gi(U,H),f=f||Fi(U)});let p=r.syncPointTree_.get(o);p?(f=f||Fi(p),u=u||Gi(p,we())):(p=new Ky,r.syncPointTree_=r.syncPointTree_.set(o,p));let m;u!=null?m=!0:(m=!1,u=ne.EMPTY_NODE,r.syncPointTree_.subtree(o).foreachChild((U,H)=>{const $=Gi(H,we());$&&(u=u.updateImmediateChild(U,$))}));const g=$y(p,t);if(!g&&!t._queryParams.loadsAllData()){const N=dc(t);j(!r.queryToTagMap.has(N),"View does not exist, but we have a tag");const U=nA();r.queryToTagMap.set(N,U),r.tagToQueryMap.set(U,N)}const E=hc(r.pendingWriteTree_,o);let b=GN(p,t,i,E,u,m);if(!g&&!f&&!a){const N=Zy(p,t);b=b.concat(iA(r,t,N))}return b}function Zf(r,t,i){const o=r.pendingWriteTree_,u=r.syncPointTree_.findOnPath(t,(f,p)=>{const m=It(f,t),g=Gi(p,m);if(g)return g});return qy(o,t,u,i,!0)}function JN(r,t){const i=t._path;let a=null;r.syncPointTree_.foreachOnPath(i,(g,E)=>{const b=It(g,i);a=a||Gi(E,b)});let o=r.syncPointTree_.get(i);o?a=a||Gi(o,we()):(o=new Ky,r.syncPointTree_=r.syncPointTree_.set(i,o));const u=a!=null,f=u?new Yi(a,!0,!1):null,p=hc(r.pendingWriteTree_,t._path),m=Wy(o,t,p,u?f.getNode():ne.EMPTY_NODE,u);return LN(m)}function dl(r,t){return n0(t,r.syncPointTree_,null,hc(r.pendingWriteTree_,we()))}function n0(r,t,i,a){if(ge(r.path))return i0(r,t,i,a);{const o=t.get(we());i==null&&o!=null&&(i=Gi(o,we()));let u=[];const f=_e(r.path),p=r.operationForChild(f),m=t.children.get(f);if(m&&p){const g=i?i.getImmediateChild(f):null,E=Gy(a,f);u=u.concat(n0(p,m,g,E))}return o&&(u=u.concat(Xf(o,r,a,i))),u}}function i0(r,t,i,a){const o=t.get(we());i==null&&o!=null&&(i=Gi(o,we()));let u=[];return t.children.inorderTraversal((f,p)=>{const m=i?i.getImmediateChild(f):null,g=Gy(a,f),E=r.operationForChild(f);E&&(u=u.concat(i0(E,p,m,g)))}),o&&(u=u.concat(Xf(o,r,a,i))),u}function s0(r,t){const i=t.query,a=nl(r,i);return{hashFn:()=>(UN(t)||ne.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return a?XN(r,i._path,a):WN(r,i._path);{const u=$w(o,i);return e0(r,i,null,u)}}}}function nl(r,t){const i=dc(t);return r.queryToTagMap.get(i)}function dc(r){return r._path.toString()+"$"+r._queryIdentifier}function $f(r,t){return r.tagToQueryMap.get(t)}function Jf(r){const t=r.indexOf("$");return j(t!==-1&&t<r.length-1,"Bad queryKey."),{queryId:r.substr(t+1),path:new Le(r.substr(0,t))}}function ed(r,t,i){const a=r.syncPointTree_.get(t);j(a,"Missing sync point for query tag that we're tracking");const o=hc(r.pendingWriteTree_,t);return Xf(a,i,o,null)}function eA(r){return r.fold((t,i,a)=>{if(i&&Fi(i))return[fc(i)];{let o=[];return i&&(o=Xy(i)),Pt(a,(u,f)=>{o=o.concat(f)}),o}})}function Fa(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(FN())(r._repo,r._path):r}function tA(r,t){for(let i=0;i<t.length;++i){const a=t[i];if(!a._queryParams.loadsAllData()){const o=dc(a),u=r.queryToTagMap.get(o);r.queryToTagMap.delete(o),r.tagToQueryMap.delete(u)}}}function nA(){return QN++}function iA(r,t,i){const a=t._path,o=nl(r,t),u=s0(r,i),f=r.listenProvider_.startListening(Fa(t),o,u.hashFn,u.onComplete),p=r.syncPointTree_.subtree(a);if(o)j(!Fi(p.value),"If we're adding a query, it shouldn't be shadowed");else{const m=p.fold((g,E,b)=>{if(!ge(g)&&E&&Fi(E))return[fc(E).query];{let N=[];return E&&(N=N.concat(Xy(E).map(U=>U.query))),Pt(b,(U,H)=>{N=N.concat(H)}),N}});for(let g=0;g<m.length;++g){const E=m[g];r.listenProvider_.stopListening(Fa(E),nl(r,E))}}return f}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(t){this.node_=t}getImmediateChild(t){const i=this.node_.getImmediateChild(t);return new td(i)}node(){return this.node_}}class nd{constructor(t,i){this.syncTree_=t,this.path_=i}getImmediateChild(t){const i=ot(this.path_,t);return new nd(this.syncTree_,i)}node(){return Zf(this.syncTree_,this.path_)}}const sA=function(r){return r=r||{},r.timestamp=r.timestamp||new Date().getTime(),r},tv=function(r,t,i){if(!r||typeof r!="object")return r;if(j(".sv"in r,"Unexpected leaf node or priority contents"),typeof r[".sv"]=="string")return rA(r[".sv"],t,i);if(typeof r[".sv"]=="object")return aA(r[".sv"],t);j(!1,"Unexpected server value: "+JSON.stringify(r,null,2))},rA=function(r,t,i){switch(r){case"timestamp":return i.timestamp;default:j(!1,"Unexpected server value: "+r)}},aA=function(r,t,i){r.hasOwnProperty("increment")||j(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const a=r.increment;typeof a!="number"&&j(!1,"Unexpected increment value: "+a);const o=t.node();if(j(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return a;const f=o.getValue();return typeof f!="number"?a:f+a},lA=function(r,t,i,a){return id(t,new nd(i,r),a)},r0=function(r,t,i){return id(r,new td(t),i)};function id(r,t,i){const a=r.getPriority().val(),o=tv(a,t.getImmediateChild(".priority"),i);let u;if(r.isLeafNode()){const f=r,p=tv(f.getValue(),t,i);return p!==f.getValue()||o!==f.getPriority().val()?new dt(p,mt(o)):r}else{const f=r;return u=f,o!==f.getPriority().val()&&(u=u.updatePriority(new dt(o))),f.forEachChild(We,(p,m)=>{const g=id(m,t.getImmediateChild(p),i);g!==m&&(u=u.updateImmediateChild(p,g))}),u}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(t="",i=null,a={children:{},childCount:0}){this.name=t,this.parent=i,this.node=a}}function rd(r,t){let i=t instanceof Le?t:new Le(t),a=r,o=_e(i);for(;o!==null;){const u=Nr(a.node.children,o)||{children:{},childCount:0};a=new sd(o,a,u),i=He(i),o=_e(i)}return a}function zr(r){return r.node.value}function a0(r,t){r.node.value=t,_f(r)}function l0(r){return r.node.childCount>0}function oA(r){return zr(r)===void 0&&!l0(r)}function pc(r,t){Pt(r.node.children,(i,a)=>{t(new sd(i,r,a))})}function o0(r,t,i,a){i&&t(r),pc(r,o=>{o0(o,t,!0)})}function cA(r,t,i){let a=r.parent;for(;a!==null;){if(t(a))return!0;a=a.parent}return!1}function pl(r){return new Le(r.parent===null?r.name:pl(r.parent)+"/"+r.name)}function _f(r){r.parent!==null&&uA(r.parent,r.name,r)}function uA(r,t,i){const a=oA(i),o=oi(r.node.children,t);a&&o?(delete r.node.children[t],r.node.childCount--,_f(r)):!a&&!o&&(r.node.children[t]=i.node,r.node.childCount++,_f(r))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=/[\[\].#$\/\u0000-\u001F\u007F]/,fA=/[\[\].#$\u0000-\u001F\u007F]/,Yh=10*1024*1024,c0=function(r){return typeof r=="string"&&r.length!==0&&!hA.test(r)},u0=function(r){return typeof r=="string"&&r.length!==0&&!fA.test(r)},dA=function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),u0(r)},pA=function(r,t,i,a){ad(Cf(r,"value"),t,i)},ad=function(r,t,i){const a=i instanceof Le?new D1(i,r):i;if(t===void 0)throw new Error(r+"contains undefined "+ys(a));if(typeof t=="function")throw new Error(r+"contains a function "+ys(a)+" with contents = "+t.toString());if(ry(t))throw new Error(r+"contains "+t.toString()+" "+ys(a));if(typeof t=="string"&&t.length>Yh/3&&rc(t)>Yh)throw new Error(r+"contains a string greater than "+Yh+" utf8 bytes "+ys(a)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let o=!1,u=!1;if(Pt(t,(f,p)=>{if(f===".value")o=!0;else if(f!==".priority"&&f!==".sv"&&(u=!0,!c0(f)))throw new Error(r+" contains an invalid key ("+f+") "+ys(a)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);M1(a,f),ad(r,p,a),I1(a)}),o&&u)throw new Error(r+' contains ".value" child '+ys(a)+" in addition to actual children.")}},h0=function(r,t,i,a){if(!u0(i))throw new Error(Cf(r,t)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},mA=function(r,t,i,a){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),h0(r,t,i)},gA=function(r,t){if(_e(t)===".info")throw new Error(r+" failed = Can't modify data under /.info/")},_A=function(r,t){const i=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!c0(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!dA(i))throw new Error(Cf(r,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function f0(r,t){let i=null;for(let a=0;a<t.length;a++){const o=t[a],u=o.getPath();i!==null&&!Oy(u,i.path)&&(r.eventLists_.push(i),i=null),i===null&&(i={events:[],path:u}),i.events.push(o)}i&&r.eventLists_.push(i)}function Dn(r,t,i){f0(r,i),yA(r,a=>_n(a,t)||_n(t,a))}function yA(r,t){r.recursionDepth_++;let i=!0;for(let a=0;a<r.eventLists_.length;a++){const o=r.eventLists_[a];if(o){const u=o.path;t(u)?(EA(r.eventLists_[a]),r.eventLists_[a]=null):i=!1}}i&&(r.eventLists_=[]),r.recursionDepth_--}function EA(r){for(let t=0;t<r.events.length;t++){const i=r.events[t];if(i!==null){r.events[t]=null;const a=i.getEventRunner();qa&&wt("event: "+i.toString()),jr(a)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="repo_interrupt",bA=25;class TA{constructor(t,i,a,o){this.repoInfo_=t,this.forceRestClient_=i,this.authTokenProvider_=a,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Xo(),this.transactionQueueTree_=new sd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function CA(r,t,i){if(r.stats_=Hf(r.repoInfo_),r.forceRestClient_||n1())r.server_=new Wo(r.repoInfo_,(a,o,u,f)=>{nv(r,a,o,u,f)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>iv(r,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{lt(i)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}r.persistentConnection_=new si(r.repoInfo_,t,(a,o,u,f)=>{nv(r,a,o,u,f)},a=>{iv(r,a)},a=>{NA(r,a)},r.authTokenProvider_,r.appCheckProvider_,i),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(a=>{r.server_.refreshAuthToken(a)}),r.appCheckProvider_.addTokenChangeListener(a=>{r.server_.refreshAppCheckToken(a.token)}),r.statsReporter_=l1(r.repoInfo_,()=>new rN(r.stats_,r.server_)),r.infoData_=new eN,r.infoSyncTree_=new ev({startListening:(a,o,u,f)=>{let p=[];const m=r.infoData_.getNode(a._path);return m.isEmpty()||(p=fl(r.infoSyncTree_,a._path,m),setTimeout(()=>{f("ok")},0)),p},stopListening:()=>{}}),od(r,"connected",!1),r.serverSyncTree_=new ev({startListening:(a,o,u,f)=>(r.server_.listen(a,u,o,(p,m)=>{const g=f(p,m);Dn(r.eventQueue_,a._path,g)}),[]),stopListening:(a,o)=>{r.server_.unlisten(a,o)}})}function wA(r){const i=r.infoData_.getNode(new Le(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function ld(r){return sA({timestamp:wA(r)})}function nv(r,t,i,a,o){r.dataUpdateCount++;const u=new Le(t);i=r.interceptServerDataCallback_?r.interceptServerDataCallback_(t,i):i;let f=[];if(o)if(a){const m=Ho(i,g=>mt(g));f=ZN(r.serverSyncTree_,u,m,o)}else{const m=mt(i);f=t0(r.serverSyncTree_,u,m,o)}else if(a){const m=Ho(i,g=>mt(g));f=KN(r.serverSyncTree_,u,m)}else{const m=mt(i);f=fl(r.serverSyncTree_,u,m)}let p=u;f.length>0&&(p=gc(r,u)),Dn(r.eventQueue_,p,f)}function iv(r,t){od(r,"connected",t),t===!1&&OA(r)}function NA(r,t){Pt(t,(i,a)=>{od(r,i,a)})}function od(r,t,i){const a=new Le("/.info/"+t),o=mt(i);r.infoData_.updateSnapshot(a,o);const u=fl(r.infoSyncTree_,a,o);Dn(r.eventQueue_,a,u)}function d0(r){return r.nextWriteId_++}function AA(r,t,i){const a=JN(r.serverSyncTree_,t);return a!=null?Promise.resolve(a):r.server_.get(t).then(o=>{const u=mt(o).withIndex(t._queryParams.getIndex());$N(r.serverSyncTree_,t,i,!0);let f;if(t._queryParams.loadsAllData())f=fl(r.serverSyncTree_,t._path,u);else{const p=nl(r.serverSyncTree_,t);f=t0(r.serverSyncTree_,t._path,u,p)}return Dn(r.eventQueue_,t._path,f),e0(r.serverSyncTree_,t,i,null,!0),u},o=>(mc(r,"get for query "+lt(t)+" failed: "+o),Promise.reject(new Error(o))))}function RA(r,t,i,a,o){mc(r,"set",{path:t.toString(),value:i,priority:a});const u=ld(r),f=mt(i,a),p=Zf(r.serverSyncTree_,t),m=r0(f,p,u),g=d0(r),E=Jy(r.serverSyncTree_,t,m,g,!0);f0(r.eventQueue_,E),r.server_.put(t.toString(),f.val(!0),(N,U)=>{const H=N==="ok";H||Ht("set at "+t+" failed: "+N);const $=Ss(r.serverSyncTree_,g,!H);Dn(r.eventQueue_,t,$),DA(r,o,N,U)});const b=v0(r,t);gc(r,b),Dn(r.eventQueue_,b,[])}function OA(r){mc(r,"onDisconnectEvents");const t=ld(r),i=Xo();ff(r.onDisconnect_,we(),(o,u)=>{const f=lA(o,u,r.serverSyncTree_,t);jy(i,o,f)});let a=[];ff(i,we(),(o,u)=>{a=a.concat(fl(r.serverSyncTree_,o,u));const f=v0(r,o);gc(r,f)}),r.onDisconnect_=Xo(),Dn(r.eventQueue_,we(),a)}function xA(r){r.persistentConnection_&&r.persistentConnection_.interrupt(SA)}function mc(r,...t){let i="";r.persistentConnection_&&(i=r.persistentConnection_.id+":"),wt(i,...t)}function DA(r,t,i,a){t&&jr(()=>{if(i==="ok")t(null);else{const o=(i||"error").toUpperCase();let u=o;a&&(u+=": "+a);const f=new Error(u);f.code=o,t(f)}})}function p0(r,t,i){return Zf(r.serverSyncTree_,t,i)||ne.EMPTY_NODE}function cd(r,t=r.transactionQueueTree_){if(t||_c(r,t),zr(t)){const i=g0(r,t);j(i.length>0,"Sending zero length transaction queue"),i.every(o=>o.status===0)&&MA(r,pl(t),i)}else l0(t)&&pc(t,i=>{cd(r,i)})}function MA(r,t,i){const a=i.map(g=>g.currentWriteId),o=p0(r,t,a);let u=o;const f=o.hash();for(let g=0;g<i.length;g++){const E=i[g];j(E.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const b=It(t,E.path);u=u.updateChild(b,E.currentOutputSnapshotRaw)}const p=u.val(!0),m=t;r.server_.put(m.toString(),p,g=>{mc(r,"transaction put response",{path:m.toString(),status:g});let E=[];if(g==="ok"){const b=[];for(let N=0;N<i.length;N++)i[N].status=2,E=E.concat(Ss(r.serverSyncTree_,i[N].currentWriteId)),i[N].onComplete&&b.push(()=>i[N].onComplete(null,!0,i[N].currentOutputSnapshotResolved)),i[N].unwatcher();_c(r,rd(r.transactionQueueTree_,t)),cd(r,r.transactionQueueTree_),Dn(r.eventQueue_,t,E);for(let N=0;N<b.length;N++)jr(b[N])}else{if(g==="datastale")for(let b=0;b<i.length;b++)i[b].status===3?i[b].status=4:i[b].status=0;else{Ht("transaction at "+m.toString()+" failed: "+g);for(let b=0;b<i.length;b++)i[b].status=4,i[b].abortReason=g}gc(r,t)}},f)}function gc(r,t){const i=m0(r,t),a=pl(i),o=g0(r,i);return IA(r,o,a),a}function IA(r,t,i){if(t.length===0)return;const a=[];let o=[];const f=t.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<t.length;p++){const m=t[p],g=It(i,m.path);let E=!1,b;if(j(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)E=!0,b=m.abortReason,o=o.concat(Ss(r.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=bA)E=!0,b="maxretry",o=o.concat(Ss(r.serverSyncTree_,m.currentWriteId,!0));else{const N=p0(r,m.path,f);m.currentInputSnapshot=N;const U=t[p].update(N.val());if(U!==void 0){ad("transaction failed: Data returned ",U,m.path);let H=mt(U);typeof U=="object"&&U!=null&&oi(U,".priority")||(H=H.updatePriority(N.getPriority()));const ue=m.currentWriteId,Ae=ld(r),Re=r0(H,N,Ae);m.currentOutputSnapshotRaw=H,m.currentOutputSnapshotResolved=Re,m.currentWriteId=d0(r),f.splice(f.indexOf(ue),1),o=o.concat(Jy(r.serverSyncTree_,m.path,Re,m.currentWriteId,m.applyLocally)),o=o.concat(Ss(r.serverSyncTree_,ue,!0))}else E=!0,b="nodata",o=o.concat(Ss(r.serverSyncTree_,m.currentWriteId,!0))}Dn(r.eventQueue_,i,o),o=[],E&&(t[p].status=2,function(N){setTimeout(N,Math.floor(0))}(t[p].unwatcher),t[p].onComplete&&(b==="nodata"?a.push(()=>t[p].onComplete(null,!1,t[p].currentInputSnapshot)):a.push(()=>t[p].onComplete(new Error(b),!1,null))))}_c(r,r.transactionQueueTree_);for(let p=0;p<a.length;p++)jr(a[p]);cd(r,r.transactionQueueTree_)}function m0(r,t){let i,a=r.transactionQueueTree_;for(i=_e(t);i!==null&&zr(a)===void 0;)a=rd(a,i),t=He(t),i=_e(t);return a}function g0(r,t){const i=[];return _0(r,t,i),i.sort((a,o)=>a.order-o.order),i}function _0(r,t,i){const a=zr(t);if(a)for(let o=0;o<a.length;o++)i.push(a[o]);pc(t,o=>{_0(r,o,i)})}function _c(r,t){const i=zr(t);if(i){let a=0;for(let o=0;o<i.length;o++)i[o].status!==2&&(i[a]=i[o],a++);i.length=a,a0(t,i.length>0?i:void 0)}pc(t,a=>{_c(r,a)})}function v0(r,t){const i=pl(m0(r,t)),a=rd(r.transactionQueueTree_,t);return cA(a,o=>{Fh(r,o)}),Fh(r,a),o0(a,o=>{Fh(r,o)}),i}function Fh(r,t){const i=zr(t);if(i){const a=[];let o=[],u=-1;for(let f=0;f<i.length;f++)i[f].status===3||(i[f].status===1?(j(u===f-1,"All SENT items should be at beginning of queue."),u=f,i[f].status=3,i[f].abortReason="set"):(j(i[f].status===0,"Unexpected transaction status in abort"),i[f].unwatcher(),o=o.concat(Ss(r.serverSyncTree_,i[f].currentWriteId,!0)),i[f].onComplete&&a.push(i[f].onComplete.bind(null,new Error("set"),!1,null))));u===-1?a0(t,void 0):i.length=u+1,Dn(r.eventQueue_,pl(t),o);for(let f=0;f<a.length;f++)jr(a[f])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(r){let t="";const i=r.split("/");for(let a=0;a<i.length;a++)if(i[a].length>0){let o=i[a];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}t+="/"+o}return t}function UA(r){const t={};r.charAt(0)==="?"&&(r=r.substring(1));for(const i of r.split("&")){if(i.length===0)continue;const a=i.split("=");a.length===2?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Ht(`Invalid query segment '${i}' in query '${r}'`)}return t}const sv=function(r,t){const i=LA(r),a=i.namespace;i.domain==="firebase.com"&&li(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!a||a==="undefined")&&i.domain!=="localhost"&&li("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||Qw();const o=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new _y(i.host,i.secure,a,o,t,"",a!==i.subdomain),path:new Le(i.pathString)}},LA=function(r){let t="",i="",a="",o="",u="",f=!0,p="https",m=443;if(typeof r=="string"){let g=r.indexOf("//");g>=0&&(p=r.substring(0,g-1),r=r.substring(g+2));let E=r.indexOf("/");E===-1&&(E=r.length);let b=r.indexOf("?");b===-1&&(b=r.length),t=r.substring(0,Math.min(E,b)),E<b&&(o=kA(r.substring(E,b)));const N=UA(r.substring(Math.min(r.length,b)));g=t.indexOf(":"),g>=0?(f=p==="https"||p==="wss",m=parseInt(t.substring(g+1),10)):g=t.length;const U=t.slice(0,g);if(U.toLowerCase()==="localhost")i="localhost";else if(U.split(".").length<=2)i=U;else{const H=t.indexOf(".");a=t.substring(0,H).toLowerCase(),i=t.substring(H+1),u=a}"ns"in N&&(u=N.ns)}return{host:t,port:m,domain:i,subdomain:a,secure:f,scheme:p,pathString:o,namespace:u}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(t,i,a,o){this.eventType=t,this.eventRegistration=i,this.snapshot=a,this.prevName=o}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+lt(this.snapshot.exportVal())}}class zA{constructor(t,i,a){this.eventRegistration=t,this.error=i,this.path=a}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(t,i){this.snapshotCallback=t,this.cancelCallback=i}onValue(t,i){this.snapshotCallback.call(null,t,i)}onCancel(t){return j(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(t,i,a,o){this._repo=t,this._path=i,this._queryParams=a,this._orderByCalled=o}get key(){return ge(this._path)?null:Ny(this._path)}get ref(){return new ui(this._repo,this._path)}get _queryIdentifier(){const t=G_(this._queryParams),i=jf(t);return i==="{}"?"default":i}get _queryObject(){return G_(this._queryParams)}isEqual(t){if(t=Nt(t),!(t instanceof ud))return!1;const i=this._repo===t._repo,a=Oy(this._path,t._path),o=this._queryIdentifier===t._queryIdentifier;return i&&a&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+x1(this._path)}}class ui extends ud{constructor(t,i){super(t,i,new Vf,!1)}get parent(){const t=Ry(this._path);return t===null?null:new ui(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class il{constructor(t,i,a){this._node=t,this.ref=i,this._index=a}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const i=new Le(t),a=vf(this.ref,t);return new il(this._node.getChild(i),a,We)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(a,o)=>t(new il(o,vf(this.ref,a),We)))}hasChild(t){const i=new Le(t);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function PA(r,t){return r=Nt(r),r._checkNotDeleted("ref"),t!==void 0?vf(r._root,t):r._root}function vf(r,t){return r=Nt(r),_e(r._path)===null?mA("child","path",t):h0("child","path",t),new ui(r._repo,ot(r._path,t))}function BA(r,t){r=Nt(r),gA("set",r._path),pA("set",t,r._path);const i=new sc;return RA(r._repo,r._path,t,null,i.wrapCallback(()=>{})),i.promise}function qA(r){r=Nt(r);const t=new HA(()=>{}),i=new hd(t);return AA(r._repo,r,i).then(a=>new il(a,new ui(r._repo,r._path),r._queryParams.getIndex()))}class hd{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,i){const a=i._queryParams.getIndex();return new jA("value",this,new il(t.snapshotNode,new ui(i._repo,i._path),a))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,i){return this.callbackContext.hasCancelCallback?new zA(this,t,i):null}matches(t){return t instanceof hd?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}PN(ui);YN(ui);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="FIREBASE_DATABASE_EMULATOR_HOST",yf={};let VA=!1;function YA(r,t,i,a){r.repoInfo_=new _y(t,!1,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams,!0,i),a&&(r.authTokenProvider_=a)}function FA(r,t,i,a,o){let u=a||r.options.databaseURL;u===void 0&&(r.options.projectId||li("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),wt("Using default host for project ",r.options.projectId),u=`${r.options.projectId}-default-rtdb.firebaseio.com`);let f=sv(u,o),p=f.repoInfo,m;typeof process<"u"&&w_&&(m=w_[GA]),m?(u=`http://${m}?ns=${p.namespace}`,f=sv(u,o),p=f.repoInfo):f.repoInfo.secure;const g=new s1(r.name,r.options,t);_A("Invalid Firebase Database URL",f),ge(f.path)||li("Database URL must point to the root of a Firebase Database (not including a child path).");const E=KA(p,r,g,new i1(r,i));return new WA(E,r)}function QA(r,t){const i=yf[t];(!i||i[r.key]!==r)&&li(`Database ${t}(${r.repoInfo_}) has already been deleted.`),xA(r),delete i[r.key]}function KA(r,t,i,a){let o=yf[t.name];o||(o={},yf[t.name]=o);let u=o[r.toURLString()];return u&&li("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new TA(r,VA,i,a),o[r.toURLString()]=u,u}class WA{constructor(t,i){this._repoInternal=t,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(CA(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ui(this._repo,we())),this._rootInternal}_delete(){return this._rootInternal!==null&&(QA(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&li("Cannot call "+t+" on a deleted database.")}}function XA(r=_v(),t){const i=Af(r,"database").getImmediate({identifier:t});if(!i._instanceStarted){const a=XS("database");a&&ZA(i,...a)}return i}function ZA(r,t,i,a={}){r=Nt(r),r._checkNotDeleted("useEmulator");const o=`${t}:${i}`,u=r._repoInternal;if(r._instanceStarted){if(o===r._repoInternal.repoInfo_.host&&bs(a,u.repoInfo_.emulatorOptions))return;li("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let f;if(u.repoInfo_.nodeAdmin)a.mockUserToken&&li('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),f=new Lo(Lo.OWNER);else if(a.mockUserToken){const p=typeof a.mockUserToken=="string"?a.mockUserToken:ZS(a.mockUserToken,r.app.options.projectId);f=new Lo(p)}YA(u,o,a,f)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(r){Bw(kr),Ar(new Ts("database",(t,{instanceIdentifier:i})=>{const a=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),u=t.getProvider("app-check-internal");return FA(a,o,u,i)},"PUBLIC").setMultipleInstances(!0)),Bi(N_,A_,r),Bi(N_,A_,"esm2017")}si.prototype.simpleListen=function(r,t){this.sendRequest("q",{p:r},t)};si.prototype.echo=function(r,t){this.sendRequest("echo",{d:r},t)};$A();const JA="/assets/homeMusic-LcxnBK9j.mp3",eR="/assets/gameMusic-DweckkLB.mp3",tR="/assets/clickSound-CHil4oU_.mp3",ki=Hw(Ev),Qh=()=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:v.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),nR=()=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),v.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}),Kh=()=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),v.jsx("polyline",{points:"16 17 21 12 16 7"}),v.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),iR=()=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),v.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),sR=()=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),v.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),rR=()=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),v.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),v.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),aR=()=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),v.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),v.jsx("path",{d:"M4 22h16"}),v.jsx("path",{d:"M10 14.66V17c0 .55-.47 1-1.05 1H8"}),v.jsx("path",{d:"M14 14.66V17c0 .55.47 1 1.05 1H16"}),v.jsx("path",{d:"M12 16v6"}),v.jsx("path",{d:"M8 6h8v8a4 4 0 0 1-8 0V6z"})]}),lR=()=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("circle",{cx:"18",cy:"5",r:"3"}),v.jsx("circle",{cx:"6",cy:"12",r:"3"}),v.jsx("circle",{cx:"18",cy:"19",r:"3"}),v.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),v.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),Wh=()=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),v.jsx("polyline",{points:"10 17 15 12 10 7"}),v.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),Xh=()=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),v.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),oR=()=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),v.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"})]}),cR=()=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),v.jsx("line",{x1:"23",y1:"9",x2:"17",y2:"15"}),v.jsx("line",{x1:"17",y1:"9",x2:"23",y2:"15"})]}),uR=()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"#a0a0a0"}),v.jsx("circle",{cx:"12",cy:"12",r:"6",fill:"#c0c0c0"}),v.jsx("rect",{x:"11",y:"7",width:"2",height:"10",rx:"1",fill:"#808080"})]}),hR=({size:r=8,opacity:t=.7})=>v.jsx("svg",{width:r,height:r*1.5,viewBox:"0 0 8 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",opacity:t,children:v.jsx("path",{d:"M4 0C4 0 0 4 0 8C0 10.2 1.8 12 4 12C6.2 12 8 10.2 8 8C8 4 4 0 4 0Z",fill:"#95c2db"})}),fR=()=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("rect",{x:"18",y:"3",width:"4",height:"18"}),v.jsx("rect",{x:"10",y:"8",width:"4",height:"13"}),v.jsx("rect",{x:"2",y:"13",width:"4",height:"8"})]}),dR=()=>{const[r,t]=Z.useState(!1),[i,a]=Z.useState(!1),[o,u]=Z.useState(30),[f,p]=Z.useState({correct:0,blocked:0}),[m,g]=Z.useState([]),[E,b]=Z.useState(!1),[N,U]=Z.useState(0),[H,$]=Z.useState(null),[ue,Ae]=Z.useState(0),[Re,Ee]=Z.useState(!1),[it,he]=Z.useState(0),[Oe,gt]=Z.useState([]),[St,B]=Z.useState(null),[ie,qe]=Z.useState(!1),[st,bt]=Z.useState(!1),Pe=Z.useRef(new Audio(JA)),be=Z.useRef(new Audio(eR)),z=Z.useRef(new Audio(tR)),[J,Q]=Z.useState(null),[ve,S]=Z.useState(!1),[k,F]=Z.useState(""),[W,P]=Z.useState(!1),[le,se]=Z.useState("login"),[Xe,re]=Z.useState(null),xe=Z.useRef(null),Ne=Z.useRef(null),At=Z.useRef(null),[M,Y]=Z.useState(!1),$e=9,Sn=2500,Bt=["You are now a certified asshole!","Bold move! Everyone's judging you now.","Social etiquette has left the chat.","That's how you make enemies in bathrooms!","Congratulations! You're that guy everyone avoids."],Ds=["Serial pusher alert!","You REALLY enjoy chaos, don't you?","Bathroom terrorist spotted!","Your bathroom karma is terrible now.","Are you the urinal police??"];Z.useEffect(()=>{Pe.current.volume=.3,be.current.volume=.3,z.current.volume=.3,Pe.current.loop=!0,be.current.loop=!0},[]);const Ms=()=>{const L=!st;bt(L),Pe.current.muted=L,be.current.muted=L,z.current.muted=L};Z.useEffect(()=>{const L=()=>{!r&&Pe.current.paused&&Pe.current.play().catch(G=>console.error("Home music play error:",G)),document.removeEventListener("click",L)};return document.addEventListener("click",L),()=>{document.removeEventListener("click",L)}},[r]),Z.useEffect(()=>{if(!ki)return console.error("Firebase Auth not initialized"),()=>{};const L=AC(ki,G=>{G?(console.log("User logged in:",G.email),Q(G),F(G.displayName||G.email.split("@")[0]),S(!1)):(console.log("No user logged in"),Q(null),F(""))});return()=>L()},[]),Z.useEffect(()=>{r&&!i?(Pe.current.pause(),be.current.currentTime=0,be.current.play().catch(L=>console.error("Game music play error:",L))):(be.current.pause(),Pe.current.currentTime=0,Pe.current.play().catch(L=>console.error("Home music play error:",L)))},[r,i]);const Is=Z.useCallback(L=>{const G=[],X={0:[],1:[],2:[]};for(let ke=0;ke<L.length;ke++)if(L[ke]==="empty"){G.push(ke);let Je=0;const kn=ke>0?L[ke-1]:null,hi=ke<L.length-1?L[ke+1]:null;kn==="taken"&&Je++,hi==="taken"&&Je++,X[Je].push(ke)}if(G.length===0)return{validSpots:[],shouldWait:!0};let pe=[];if(X[0].length>0?pe=X[0]:X[1].length>0?pe=X[1]:pe=X[2],pe.length===1||X[0].length===0)return{validSpots:pe,shouldWait:!1};const qt=[];for(const ke of pe){const Je=[...L];Je[ke]="taken";const kn=[];for(let Gt=0;Gt<Je.length;Gt++)if(Je[Gt]==="empty"){const hn=Gt>0?Je[Gt-1]:null,xt=Gt<Je.length-1?Je[Gt+1]:null;(!hn||hn==="empty")&&(!xt||xt==="empty")&&kn.push(Gt)}let hi=0;if(kn.length>0)for(const Gt of kn){const hn=[...Je];hn[Gt]="taken";let xt=0;for(let Ge=0;Ge<hn.length;Ge++)if(hn[Ge]==="empty"){const _t=Ge>0?hn[Ge-1]:null,Un=Ge<hn.length-1?hn[Ge+1]:null;(!_t||_t==="empty")&&(!Un||Un==="empty")&&xt++}xt>hi&&(hi=xt)}qt.push({position:ke,futureZeroNeighborCount:kn.length,bestThirdUserOptions:hi,distanceFromEdge:Math.min(ke,L.length-1-ke)})}qt.sort((ke,Je)=>ke.futureZeroNeighborCount!==Je.futureZeroNeighborCount?Je.futureZeroNeighborCount-ke.futureZeroNeighborCount:ke.bestThirdUserOptions!==Je.bestThirdUserOptions?Je.bestThirdUserOptions-ke.bestThirdUserOptions:ke.distanceFromEdge-Je.distanceFromEdge);const Ut=qt[0].futureZeroNeighborCount,Hr=qt[0].bestThirdUserOptions;return{validSpots:qt.filter(ke=>ke.futureZeroNeighborCount===Ut&&ke.bestThirdUserOptions===Hr).map(ke=>ke.position),shouldWait:!1}},[]),un=Z.useCallback(()=>{const L=Array($e).fill("empty"),G=Math.floor(Math.random()*7)+2,X=[];for(;X.length<G;){const Ut=Math.floor(Math.random()*$e);X.includes(Ut)||(X.push(Ut),L[Ut]="taken")}const{validSpots:pe,shouldWait:qt}=Is(L);gt(pe),Ee(qt),g(L)},[Is]),Mn=()=>{be.current&&(be.current.pause(),be.current.currentTime=0,be.current.play().catch(L=>console.error("Game music play error:",L))),Pe.current&&Pe.current.pause(),g([]),t(!0),a(!1),u(30),p({correct:0,blocked:0}),Ae(0),b(!1),U(0),he(0),gt([]),B(null),qe(!1)},vc=()=>{const L=`Guest${Math.floor(Math.random()*1e4)}`;F(L),S(!0),Q(null),Mn()},yc=L=>{if(L.preventDefault(),re(null),!ki){re("Authentication not available");return}bC(ki,xe.current.value,Ne.current.value).then(G=>{console.log("Login successful"),P(!1)}).catch(G=>{console.error("Login error:",G),re(G.message)})},Wt=async L=>{if(L.preventDefault(),re(null),!ki){re("Authentication not available");return}const G=At.current.value,X=XA(Ev),pe=PA(X,"usernames/"+G);if((await qA(pe)).exists()){re("Display name already taken. Please choose another one.");return}SC(ki,xe.current.value,Ne.current.value).then(Ut=>(console.log("Signup successful, updating profile"),CC(Ut.user,{displayName:G}).then(()=>BA(pe,Ut.user.uid)).then(()=>{F(G),P(!1),Mn()}))).catch(Ut=>{console.error("Signup error:",Ut),re(Ut.message)})},ml=()=>{if(!ki){console.error("Authentication not available");return}RC(ki).then(()=>{Q(null),F(""),S(!1),(r||i)&&(t(!1),a(!1))}).catch(L=>{console.error("Logout error:",L)})},In=L=>{se(L),re(null),P(!0)},gl=()=>{P(!1),re(null)},ks=()=>{t(!1),a(!0)},_l=()=>{Y(!0)},vl=()=>{Y(!1)},Ec=()=>{const{percentile:L,genderGuess:G}=El(),X=`I scored ${f.correct} points in Only Real Men Know Where to Pee and ranked in the ${L}! The game says I'm "${G}". Can you beat my score?`;navigator.share?navigator.share({title:"My Urinal Game Score",text:X,url:window.location.href}).catch(pe=>{console.log("Error sharing:",pe),yl(X)}):yl(X)},yl=L=>{navigator.clipboard.writeText(L).then(()=>{Tn("success","Results copied to clipboard!")}).catch(G=>{console.error("Failed to copy:",G),Tn("error","Couldn't copy to clipboard")})},Wi=L=>{if(z.current&&(z.current.currentTime=0,z.current.play().catch(X=>console.error("Click sound error:",X))),ie||!r)return;if(m[L]==="taken"){Tn("error","That's already occupied!");return}if(Oe.includes(L))p(X=>({...X,correct:X.correct+1})),Tn("success","Good choice! Maximum privacy"),Ae(X=>X+1),un();else{qe(!0),u(pe=>Math.max(1,pe-2)),p(pe=>({...pe,blocked:pe.blocked+1}));const X=Oe.length>0?`Optimal spot(s): urinal ${Oe.map(pe=>pe+1).join(" or ")}`:"You should have waited - no good spots available!";Tn("error",`Not the best choice! ${X}`),Ae(pe=>pe+1),setTimeout(()=>{qe(!1),un()},Sn)}},Rt=L=>{r&&!ie&&m[L]==="empty"&&B(L)},Sc=()=>{B(null)},bn=()=>{if(!(ie||!r))if(Re)p(L=>({...L,correct:L.correct+1})),Tn("success","Smart choice to wait!"),Ae(L=>L+1),un();else{qe(!0),u(G=>Math.max(1,G-2)),p(G=>({...G,blocked:G.blocked+1}));const L=Oe.length>0?`Optimal spot(s): urinal ${Oe.map(G=>G+1).join(" or ")}`:"There weren't any good spots (this shouldn't happen)";Tn("error",`There was a good spot! ${L}`),Ae(G=>G+1),setTimeout(()=>{qe(!1),un()},Sn)}},Ot=()=>{if(ie||!r)return;qe(!0),u(X=>Math.max(1,X-3)),p(X=>({...X,blocked:X.blocked+1}));const L=it+1;he(L);let G;L>=5?G=Ds[Math.min(L-5,Ds.length-1)]:G=Bt[Math.min(L-1,Bt.length-1)],Tn("warning",G),Ae(X=>X+1),setTimeout(()=>{qe(!1),un()},Sn)},Tn=(L,G)=>{$({type:L,message:G}),ie||setTimeout(()=>$(null),2500)},El=()=>{const L=f.correct,G=it/(ue||1);let X="Bottom 50%";L>15?X="Top 1%":L>10?X="Top 10%":L>5&&(X="Top 50%");let pe;return G>.5?pe="Chaotic Evil Bathroom Menace":G>.3?pe="Urinal Boundary Tester":it>5?pe="Personal Space Invader":L>=12?pe="Definitely male":L>=7?pe="Probably male":pe="Either confused or you read the meme",{percentile:X,genderGuess:pe}};Z.useEffect(()=>{let L=null;return r&&o>0&&!ie?L=setInterval(()=>{u(G=>G-1)},1e3):o===0&&r&&ks(),()=>{L&&clearInterval(L)}},[r,o,ie]),Z.useEffect(()=>{let L=null;return E&&N>0?L=setInterval(()=>{U(G=>G-1)},1e3):N===0&&E&&b(!1),()=>{L&&clearInterval(L)}},[E,N]),Z.useEffect(()=>{r&&m.length===0&&un()},[r,m.length,un]);const bc=(L=3)=>r?Array(L).fill(0).map((G,X)=>v.jsx("div",{className:`water-drop drop-${X+1}`,style:{left:`${50+(X-1)*30}%`},children:v.jsx(hR,{size:6+X*2,opacity:.5+X*.1})},`drop-${X}`)):null,Us=()=>m.map((L,G)=>{const X=St===G,pe=Oe.includes(G),qt=ie&&pe||H&&H.type==="error"&&pe;return v.jsxs("div",{onClick:()=>Wi(G),onMouseEnter:()=>Rt(G),onMouseLeave:Sc,className:`urinal
            ${L==="taken"?"urinal-taken":"urinal-empty"}
            ${X&&L!=="taken"?"urinal-hovered":""}
            ${X&&pe&&L!=="taken"?"urinal-valid":""}
            ${X&&!pe&&L!=="taken"?"urinal-invalid":""}
            ${qt?"urinal-correct-answer":""}`,children:[v.jsxs("div",{className:"urinal-bowl",children:[v.jsx("div",{className:"urinal-interior"}),v.jsx("div",{className:"urinal-drain"}),L==="taken"&&bc(),v.jsx("div",{className:"urinal-flush",children:v.jsx(uR,{})})]}),v.jsx("div",{className:"urinal-divider urinal-divider-left"}),v.jsx("div",{className:"urinal-divider urinal-divider-right"}),L==="taken"&&v.jsxs("div",{className:"person",children:[v.jsx("div",{className:"person-shadow"}),v.jsxs("div",{className:"person-body",children:[v.jsx("div",{className:"person-head"}),v.jsxs("div",{className:"person-arms",children:[v.jsx("div",{className:"person-arm person-arm-left"}),v.jsx("div",{className:"person-arm person-arm-right"})]}),v.jsxs("div",{className:"person-legs",children:[v.jsx("div",{className:"person-leg person-leg-left"}),v.jsx("div",{className:"person-leg person-leg-right"})]})]})]})]},G)}),Xi=i?El():{percentile:"",genderGuess:""};return v.jsxs("div",{className:"game-container",children:[v.jsxs("button",{onClick:Ms,className:`sound-control-button ${st?"muted":""}`,children:[st?v.jsx(cR,{}):v.jsx(oR,{}),v.jsx("span",{className:"button-text",children:st?"Unmute":"Mute"})]}),v.jsxs("div",{className:"persistent-buttons",children:[J&&!ve&&v.jsxs("button",{onClick:ml,className:"top-logout-button",children:[v.jsx(Kh,{})," ",v.jsxs("span",{className:"button-text",children:["Logout (",k,")"]})]}),r&&v.jsxs("button",{onClick:Mn,className:"top-new-game-button",children:[v.jsx(Qh,{})," ",v.jsx("span",{className:"button-text",children:"New Game"})]})]}),(J||ve)&&!r&&!i&&v.jsx("div",{className:"auth-status"}),!r&&!i?v.jsxs("div",{className:"start-screen",children:[v.jsx("h1",{className:"game-title",children:"Only Real Men Know Where to Pee"}),v.jsx("p",{className:"game-subtitle",children:"Test your knowledge of the unwritten bathroom code!"}),!J&&!ve?v.jsxs(v.Fragment,{children:[v.jsxs("button",{onClick:vc,className:"start-button guest-play-button",children:[v.jsx("span",{className:"icon-margin",children:v.jsx(Qh,{})})," Play as Guest"]}),v.jsxs("button",{onClick:()=>In("login"),className:"start-button login-button",children:[v.jsx("span",{className:"icon-margin",children:v.jsx(Wh,{})})," Login"]}),v.jsxs("button",{onClick:()=>In("signup"),className:"start-button signup-button",children:[v.jsx("span",{className:"icon-margin",children:v.jsx(Xh,{})})," Sign Up"]})]}):v.jsxs(v.Fragment,{children:[v.jsxs("button",{onClick:Mn,className:"start-button play-button",children:[v.jsx("span",{className:"icon-margin",children:v.jsx(Qh,{})})," Start Game"]}),ve?v.jsxs(v.Fragment,{children:[v.jsxs("button",{onClick:()=>In("login"),className:"start-button login-button",children:[v.jsx("span",{className:"icon-margin",children:v.jsx(Wh,{})})," Login"]}),v.jsxs("button",{onClick:()=>In("signup"),className:"start-button signup-button",children:[v.jsx("span",{className:"icon-margin",children:v.jsx(Xh,{})})," Sign Up"]})]}):v.jsxs("button",{onClick:ml,className:"start-button logout-button",children:[v.jsx("span",{className:"icon-margin",children:v.jsx(Kh,{})})," Logout"]})]}),v.jsxs("button",{onClick:_l,className:"leaderboard-button start-button",children:[v.jsx("span",{className:"icon-margin",children:v.jsx(fR,{})})," Global Leaderboard"]})]}):i?v.jsxs("div",{className:"end-screen",children:[v.jsx("h1",{className:"end-title",children:"Game Over!"}),v.jsxs("div",{className:"score-box",children:[v.jsx("h2",{className:"score-title",children:"Final Score"}),v.jsx("p",{className:"final-score",children:f.correct}),v.jsxs("p",{className:"score-details",children:["Correct: ",f.correct," | Blocked: ",f.blocked]})]}),v.jsxs("div",{children:[v.jsxs("p",{className:"result-rank",children:["Your Rank: ",v.jsx("span",{className:"rank-highlight",children:Xi.percentile})]}),v.jsxs("p",{className:"result-gender",children:['"',Xi.genderGuess,'"']})]}),v.jsxs("div",{className:"button-container",children:[v.jsx("button",{onClick:Mn,className:"play-again-button",children:"Play Again"}),v.jsxs("button",{onClick:_l,className:"did-i-cook-button",children:[v.jsx("span",{className:"icon-margin",children:v.jsx(aR,{})})," Did I Cook?"]}),v.jsxs("button",{onClick:Ec,className:"share-button",children:[v.jsx("span",{className:"icon-margin",children:v.jsx(lR,{})})," Share Results"]})]}),ve&&v.jsxs("div",{className:"guest-notice",children:[v.jsx("p",{children:"Playing as guest. Login or sign up to save your scores to the leaderboard!"}),v.jsxs("div",{className:"guest-auth-buttons",children:[v.jsxs("button",{onClick:()=>In("login"),className:"guest-auth-button",children:[v.jsx(Wh,{})," Login"]}),v.jsxs("button",{onClick:()=>In("signup"),className:"guest-auth-button",children:[v.jsx(Xh,{})," Sign Up"]})]})]})]}):v.jsxs("div",{className:`game-screen ${ie?"review-phase":""}`,children:[v.jsxs("div",{className:"top-bar",children:[v.jsx("div",{children:v.jsxs("div",{className:`timer-text ${o<=10?"timer-warning":"timer-normal"}`,children:[String(o).padStart(2,"0"),"s"]})}),v.jsxs("div",{className:"score-container",children:[v.jsxs("div",{className:"score-item",children:[v.jsx("span",{className:"score-correct",children:v.jsx(iR,{})}),v.jsx("span",{className:"score-value",children:f.correct})]}),v.jsxs("div",{className:"score-item",children:[v.jsx("span",{className:"score-blocked",children:v.jsx(sR,{})}),v.jsx("span",{className:"score-value",children:f.blocked})]})]})]}),H&&v.jsx("div",{className:`feedback-box ${H.type==="success"?"feedback-success":H.type==="error"?"feedback-error":"feedback-warning"}`,children:H.message}),E&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"block-overlay"}),v.jsx("div",{className:"block-message-container",children:v.jsxs("div",{className:"block-message",children:[v.jsx("div",{className:"block-icon",children:v.jsx(rR,{})}),v.jsx("h2",{className:"block-title",children:"Blocked!"}),v.jsxs("p",{children:["Wait ",N," seconds..."]})]})})]}),v.jsxs("div",{className:"game-area",children:[v.jsx("h2",{className:"game-heading",children:"Choose a urinal or wait"}),v.jsxs("div",{className:"urinal-row",children:[v.jsx("div",{className:"wet-floor-sign"}),v.jsx("div",{className:"bathroom-wall",children:v.jsx("div",{className:"bathroom-tiles"})}),v.jsxs("div",{className:"bathroom-floor",children:[v.jsx("div",{className:"floor-tiles"}),v.jsx("div",{className:"floor-drain"})]}),v.jsx("div",{className:"urinal-container",children:Us()})]})]}),v.jsxs("div",{className:"controls",children:[v.jsxs("button",{onClick:bn,className:"button wait-button",disabled:ie,children:[v.jsx("span",{className:"icon-margin",children:v.jsx(nR,{})})," Wait"]}),v.jsxs("button",{onClick:Ot,className:"button push-button",disabled:ie,children:[v.jsx("span",{className:"icon-margin",children:v.jsx(Kh,{})})," Push Someone"]})]})]}),v.jsx(HS,{isOpen:M,onClose:vl,currentScore:f.correct,userName:k,isGuest:ve}),W&&v.jsx("div",{className:"auth-modal-overlay",children:v.jsxs("div",{className:"auth-modal",children:[v.jsx("button",{className:"close-button",onClick:gl,children:"×"}),v.jsx("h2",{children:le==="login"?"Login":"Sign Up"}),Xe&&v.jsx("div",{className:"auth-error",children:Xe}),v.jsxs("form",{onSubmit:le==="login"?yc:Wt,children:[le==="signup"&&v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"displayName",children:"Display Name"}),v.jsx("input",{type:"text",id:"displayName",ref:At,required:!0,placeholder:"What should we call you?"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"email",children:"Email"}),v.jsx("input",{type:"email",id:"email",ref:xe,required:!0,placeholder:"your@email.com"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"password",children:"Password"}),v.jsx("input",{type:"password",id:"password",ref:Ne,required:!0,placeholder:"Password",minLength:"6"})]}),v.jsx("button",{type:"submit",className:"auth-submit-button",children:le==="login"?"Login":"Sign Up"})]}),v.jsx("div",{className:"auth-switch",children:le==="login"?v.jsxs("p",{children:["Don't have an account?"," ",v.jsx("button",{onClick:()=>se("signup"),className:"auth-switch-button",children:"Sign Up"})]}):v.jsxs("p",{children:["Already have an account?"," ",v.jsx("button",{onClick:()=>se("login"),className:"auth-switch-button",children:"Login"})]})})]})})]})};jS.createRoot(document.getElementById("root")).render(v.jsx(Z.StrictMode,{children:v.jsx(dR,{})}));
